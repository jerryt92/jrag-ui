var t=Object.defineProperty,e=(e,n,s)=>(((e,n,s)=>{n in e?t(e,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[n]=s})(e,"symbol"!=typeof n?n+"":n,s),s);export function __vite_legacy_guard(){import("data:text/javascript,")}import{r as n,C as s,w as o,d as r,k as a,c as i,L as u,J as c,u as l,H as p,a5 as h,o as m,aa as f}from"./chunks/@vue-b6573999.js";import{u as d,c as g,a as b,b as B}from"./chunks/vue-router-e68aa853.js";import{a as L}from"./chunks/axios-ff411c8f.js";import{m as _}from"./chunks/mitt-106818fe.js";import{z as y,e as v,E as w,a as E}from"./chunks/element-plus-594afa91.js";import{d as P,e as k,a as j,h as F}from"./chunks/lodash-es-0d8c957d.js";import"./chunks/@vueuse-f9ccc613.js";import"./chunks/@popperjs-19b81b33.js";import"./chunks/@element-plus-142e0c99.js";import"./chunks/async-validator-b6f94fc9.js";import"./chunks/@ctrl-d2fe7c9e.js";!function(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver((t=>{for(const n of t)if("childList"===n.type)for(const t of n.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&e(t)})).observe(document,{childList:!0,subtree:!0})}function e(t){if(t.ep)return;t.ep=!0;const e=function(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerpolicy&&(e.referrerPolicy=t.referrerpolicy),"use-credentials"===t.crossorigin?e.credentials="include":"anonymous"===t.crossorigin?e.credentials="omit":e.credentials="same-origin",e}(t);fetch(t.href,e)}}();const M={},T=function(t,e){return e&&0!==e.length?Promise.all(e.map((t=>{if((t=`${t}`)in M)return;M[t]=!0;const e=t.endsWith(".css"),n=e?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${t}"]${n}`))return;const s=document.createElement("link");return s.rel=e?"stylesheet":"modulepreload",e||(s.as="script",s.crossOrigin=""),s.href=t,document.head.appendChild(s),e?new Promise(((t,e)=>{s.addEventListener("load",t),s.addEventListener("error",e)})):void 0}))).then((()=>t())):t()};const A=[{path:"/login",name:"Login",component:()=>T((()=>import("./chunks/Login-a13cf29b.js")),["chunks/Login-a13cf29b.js","assets/Login-3f002db1.css","chunks/@vue-b6573999.js","chunks/vue-router-e68aa853.js","chunks/login.api-4111bd52.js","chunks/axios-ff411c8f.js","chunks/element-plus-594afa91.js","chunks/@vueuse-f9ccc613.js","chunks/@popperjs-19b81b33.js","chunks/lodash-es-0d8c957d.js","chunks/@element-plus-142e0c99.js","chunks/async-validator-b6f94fc9.js","chunks/@ctrl-d2fe7c9e.js","chunks/plugin-vue_export-helper-3b0dab4c.js","chunks/mitt-106818fe.js"])},{path:"/logout",name:"Logout",component:()=>T((()=>import("./chunks/Logout-e2088dec.js")),["chunks/Logout-e2088dec.js","chunks/vue-router-e68aa853.js","chunks/@vue-b6573999.js","chunks/login.api-4111bd52.js","chunks/axios-ff411c8f.js","chunks/mitt-106818fe.js","chunks/element-plus-594afa91.js","chunks/@vueuse-f9ccc613.js","chunks/@popperjs-19b81b33.js","chunks/lodash-es-0d8c957d.js","chunks/@element-plus-142e0c99.js","chunks/async-validator-b6f94fc9.js","chunks/@ctrl-d2fe7c9e.js"])},{path:"/",name:"Index",component:()=>T((()=>import("./chunks/AIAssistantPage-02f64bae.js")),["chunks/AIAssistantPage-02f64bae.js","assets/AIAssistantPage-967b430d.css","chunks/@vue-b6573999.js","chunks/@element-plus-142e0c99.js","chunks/markdown-it-b5917cbb.js","chunks/mdurl-265342ab.js","chunks/uc.micro-caa990fc.js","chunks/entities-a9d5f18d.js","chunks/linkify-it-fb3f2949.js","chunks/punycode.js-94cdf097.js","chunks/sse.js-f7ab3f8c.js","chunks/plugin-vue_export-helper-3b0dab4c.js","chunks/element-plus-594afa91.js","chunks/@vueuse-f9ccc613.js","chunks/@popperjs-19b81b33.js","chunks/lodash-es-0d8c957d.js","chunks/async-validator-b6f94fc9.js","chunks/@ctrl-d2fe7c9e.js","chunks/vue-router-e68aa853.js","chunks/axios-ff411c8f.js","chunks/mitt-106818fe.js"])},...[{path:"/chat/assistant",name:"AIAssistant",component:()=>T((()=>import("./chunks/AIAssistantPage-02f64bae.js")),["chunks/AIAssistantPage-02f64bae.js","assets/AIAssistantPage-967b430d.css","chunks/@vue-b6573999.js","chunks/@element-plus-142e0c99.js","chunks/markdown-it-b5917cbb.js","chunks/mdurl-265342ab.js","chunks/uc.micro-caa990fc.js","chunks/entities-a9d5f18d.js","chunks/linkify-it-fb3f2949.js","chunks/punycode.js-94cdf097.js","chunks/sse.js-f7ab3f8c.js","chunks/plugin-vue_export-helper-3b0dab4c.js","chunks/element-plus-594afa91.js","chunks/@vueuse-f9ccc613.js","chunks/@popperjs-19b81b33.js","chunks/lodash-es-0d8c957d.js","chunks/async-validator-b6f94fc9.js","chunks/@ctrl-d2fe7c9e.js","chunks/vue-router-e68aa853.js","chunks/axios-ff411c8f.js","chunks/mitt-106818fe.js"])},{path:"/chat/speech",name:"SpeechDemo",component:()=>T((()=>import("./chunks/SpeechDemo-a8093211.js")),["chunks/SpeechDemo-a8093211.js","chunks/@vue-b6573999.js","chunks/plugin-vue_export-helper-3b0dab4c.js"])}],...[{path:"/upload",name:"FileUploader",component:()=>T((()=>import("./chunks/FileUploader-16aedaad.js")),["chunks/FileUploader-16aedaad.js","assets/FileUploader-f1e76048.css","chunks/@vue-b6573999.js","chunks/plugin-vue_export-helper-3b0dab4c.js","chunks/element-plus-594afa91.js","chunks/@vueuse-f9ccc613.js","chunks/@popperjs-19b81b33.js","chunks/lodash-es-0d8c957d.js","chunks/@element-plus-142e0c99.js","chunks/async-validator-b6f94fc9.js","chunks/@ctrl-d2fe7c9e.js","chunks/vue-router-e68aa853.js","chunks/axios-ff411c8f.js","chunks/mitt-106818fe.js"])}]];const O=async t=>{let e={};if(void 0!=={"./lang/en.js":()=>T((()=>import("./chunks/en-f36f86ad.js")),[]),"./lang/zh.js":()=>T((()=>import("./chunks/zh-67b45053.js")),[])}[`./lang/${t}.js`])try{e=(await function(t){switch(t){case"./lang/en.js":return T((()=>import("./chunks/en-f36f86ad.js")),[]);case"./lang/zh.js":return T((()=>import("./chunks/zh-67b45053.js")),[]);default:return new Promise((function(e,n){("function"==typeof queueMicrotask?queueMicrotask:setTimeout)(n.bind(null,new Error("Unknown variable dynamic import: "+t)))}))}}(`./lang/${t}.js`)).default}catch(n){}return{...e}};var S=async t=>({...await O(t)});function C(t){const e=I();e&&e===t||function(t,e,n=!1){const s=n?sessionStorage:localStorage;null!=e&&s.setItem(t,String(e))}("lang",t)}function I(){return localStorage.getItem("lang")}function x(t,e,n=0,s="children",o=null){n++;for(let r=0;r<t.length;r++){const a=t[r],i=a[s],u=P(i)&&!k(i);e(a,n,!u,o,r),u&&x(a[s],e,n,s,a)}}function G(t){return function(t,e="-",n){return-1===t.indexOf(e)?t:t.split(e).filter((t=>t&&t.trim())).map(((t,e)=>e>0||n?t.charAt(0).toUpperCase()+t.substring(1):t)).join("")}(`page/${t}`,"/",!0)}var $,R;function D(t){let e;return()=>{if(j(e)){const n=Array.prototype.slice.apply(arguments);e=t.apply(null,n)}return e}}function z(t,e){if(!F(e))throw new Error("wrapFunction expect args type Function");return function(...n){F(t)&&t.apply(this,[...n]),e.apply(this,[...n])}}(R=$||($={}))[R.sync=0]="sync",R[R.async=1]="async";const V={},Y=_();V.$on=Y.on,V.$off=Y.off,V.$emit=Y.emit;const Z={valueFormats:{},bytesToSize:function(t){let e,n=1024;if(t<0&&(e=Math.floor(Math.log(-t)/Math.log(n))),t>=0&&t<1)return{a:0,b:"0 GB"};t>=1&&(e=Math.floor(Math.log(t)/Math.log(n)));const s=(t/n**e).toPrecision(3)>=0?(t/n**e).toPrecision(3):0;return{a:t.toPrecision(3),b:s+" "+["B","KB","MB","GB","TB","PB","EB","ZB","YB"][e]}},numGet:function(t,e){let n=String(t);const s=n.length,o=n.indexOf(".");return(-1===o?0:s-o-1)>e&&(n=n.substr(0,o+e+1)),n},toFixed:function(t,e){if(null===t)return"";const n=e?10**Math.max(0,e):1;let s=String(Math.round(t*n)/n);if(-1!==s.indexOf("e")||0===t)return s;if(null!=e){const t=s.indexOf("."),o=-1===t?0:s.length-t-1;if(o<e)return(o?s:s+".")+String(n).substr(1,e-o)}return s=Z.numGet(s,2),s},formatFuncCreator:function(t,e){return function(n,s,o){if(null===n)return"";let r=0;const a=e.length;for(;Math.abs(n)>=t;)if(r++,n/=t,r>=a)return"NA";return r>0&&null!==o&&(s=o+3*r),Z.toFixed(n,s)+e[r]}}};Z.valueFormats.bits=Z.formatFuncCreator(1024,[" b"," Kib"," Mib"," Gib"," Tib"," Pib"," Eib"," Zib"," Yib"]),Z.valueFormats.bytes=Z.formatFuncCreator(1024,[" B"," KB"," MB"," GB"," TB"," PB"," EB"," ZB"," YB"]),Z.valueFormats.bytes_rate=Z.formatFuncCreator(1024,[" B/s"," KB/s"," MB/s"," GB/s"," TB/s"," PB/s"," EB/s"," ZB/s"," YB/s"]),Z.valueFormats.kbytes=Z.formatFuncCreator(1024,[" KiB"," MiB"," GiB"," TiB"," PiB"," EiB"," ZiB"," YiB"]),Z.valueFormats.mbytes=Z.formatFuncCreator(1024,[" MiB"," GiB"," TiB"," PiB"," EiB"," ZiB"," YiB"]),Z.valueFormats.gbytes=Z.formatFuncCreator(1024,[" GB"," TB"," PB"," EB"," ZB"," YB"]),Z.valueFormats.bps=Z.formatFuncCreator(1e3,[" bps"," Kbps"," Mbps"," Gbps"," Tbps"," Pbps"," Ebps"," Zbps"," Ybps"]),Z.valueFormats.pps=Z.formatFuncCreator(1e3,[" pps"," Kpps"," Mpps"," Gpps"," Tpps"," Ppps"," Epps"," Zpps"," Ypps"]),Z.valueFormats.Bps=Z.formatFuncCreator(1e3,[" Bps"," KBps"," MBps"," GBps"," TBps"," PBps"," EBps"," ZBps"," YBps"]),Z.valueFormats.ops=Z.formatFuncCreator(1e3,[" ops"," kops","Mops","Gops","Tops","Pops","Eops","Zops","Yops"]),Z.valueFormats.none=Z.toFixed,Z.valueFormats.percent=function(t,e){return Z.toFixed(t,e)+" %"},Z.valueFormats.special=function(t,e,n){return Z.toFixed(t,e)+" "+n},Z.roundValue=function(t,e){if(null===t)return null;const n=10**e;return Math.round((n*t).toFixed(e))/n};const K={zh:y,en:v},U=D((t=>{const e=I(),s=n("zh"===e?y:v);return{elLocale:s,switchLang:t=>{s.value=K[t]??y}}})),q=()=>window.matchMedia&&void 0!==window.matchMedia("(prefers-color-scheme: dark)").matches,N=t=>{const e=document.documentElement;"dark"===t?e.classList.add("dark"):e.classList.remove("dark")},H=D((()=>{const t=n(q()&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");if(q()){const e=window.matchMedia("(prefers-color-scheme: dark)"),n=e=>{t.value=e.matches?"dark":"light"};e.addEventListener("change",n),s((()=>{e.removeEventListener("change",n)}))}return o(t,(t=>{N(t)}),{immediate:!0}),{currentTheme:t,isDarkModeSupported:q,setThemeClass:N}}));const W=r({__name:"App",setup(t){const{elLocale:e}=U(),s=d(),r=n(!1);o((()=>s.hash),((t,e)=>{t&&t.indexOf("big-screen")>-1?r.value=!0:r.value=!1}));const f=a((()=>({isScreen:r.value})));return(t,n)=>{const s=h("router-view");return m(),i("div",{class:p(["web-app",f.value])},[u(l(w),{locale:l(e)},{default:c((()=>[u(s)])),_:1},8,["locale"])],2)}}}),J=new Map;const Q=new class{constructor(){e(this,"langLoaders",new Set),e(this,"lang",n("")),e(this,"pair",n({}))}registerLangLoader(t){Array.isArray(t)?t.forEach((t=>this.langLoaders.add(t))):this.langLoaders.add(t)}async use(t,e){if(J.has(t)){const e=J.get(t);e&&this.update(t,e)}if(e&&Object.keys(e).length)this.update(t,e),J.set(t,e);else{const e=[];this.langLoaders.forEach((n=>{const s=n(t);e.push(s)}));const n=function(t){return t.reduce(((t,e)=>({...t,...e})),{})}(await Promise.all(e));this.update(t,n),J.set(t,n)}}update(t,e){document.querySelector("html").setAttribute("lang",t),this.lang.value=t,this.pair.value=e||{}}translate(...t){const[e,n,s]=t;if(!e)return e;let o,r=this.pair.value;if("string"==typeof r[e])return this.compile(r[e],n);const a=e.split(".");for(let i=0,u=a.length;i<u;i++){if(o=r[a[i]],!o)return s||e;if(i===u-1)return this.compile(o,n);r=o}}compile(t,e){return t&&e?"string"!=typeof t?t:t.replace(/\{(\w+)\}/g,((t,n)=>e[n])):t}},X=(...t)=>Q.translate(...t);function tt(t){x(t,((t,e,n,s)=>{if(t.path=s?function(...t){return t.reduce(((t,e)=>t+(e&&e.startsWith("/")?e:`/${e}`)),"").replace(/\/[\/]+/,"/")}(s.path,t.path):t.path,t.component)if(F(t.component)){const e=t.component;t.component=async()=>{const n=await e(),s=n.default?n.default:n;return s.name=s.name??G(t.path),s}}else t.component.name=G(t.path)}))}class et{constructor(t){e(this,"options",{}),e(this,"lang",n("zh")),e(this,"theme",n("primary")),e(this,"isLoading",n(!1)),e(this,"app"),e(this,"router"),e(this,"plugins"),e(this,"langMessage",{}),this.initOptions(t)}initOptions(t){this.options=t||{},this.create(t?.root),this.initBuildInGlobalConfig(),this.setGlobalConfig(t?.config),t?.plugins&&t.plugins.forEach((t=>{this.registerPlugin(t)}))}create(t){const e=t||W;return this.app=f(e),this.options.onBeforeLaunch&&this.options.onBeforeLaunch(this),window.webApp=this,this}setUpLang(t){t&&this.registerLangLoader(t),this.lang.value=I()||this.options.lang||"zh",this.setLang(this.lang.value)}createRouter(t){this.router=function({routes:t,routeBase:e,routeType:n}){t&&tt(t);const s=g({history:"hash"===n?b(e):B(e),routes:t||[]});return s.beforeEach((t=>{t.meta.title?document.title=`${X(t.meta.title)}`:document.title=`${X("APP_HOME","",document.title)}`})),s.afterEach((t=>{t.meta.title?document.title=`${X(t.meta.title)}`:document.title=`${X("APP_HOME","",document.title)}`})),s}({routes:t||[],routeBase:this.options.routeBase||"",routeType:this.options.routeType||"hash"}),this.registerPlugin(this.router)}initBuildInGlobalConfig(){const t=this.app.config.globalProperties;Object.defineProperty(t,"$appLoading",{writable:!1,value:this.isLoading}),Object.defineProperty(t,"$lang",{writable:!1,value:this.lang}),Object.defineProperty(t,"$t",{writable:!1,value:X}),Object.defineProperty(t,"$eventbus",{writable:!1,value:V})}setGlobalConfig(t){const e=this.app.config.globalProperties;for(const n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return this}registerLangLoader(t){return Q.registerLangLoader(t),this}registerPlugin(t,...e){return this.app.use(t,...e),this}registerRoutes(t){return t.forEach((t=>{this.router.addRoute(t)})),this}setLang(t){C(t),Q.use(t,this.langMessage),this.lang.value=t;const e=this.options.onSwitchLang;return e&&e(t),this}getLang(){return I()||this.options.lang||"zh"}switchLang(t){return this.setLang(t),this}mount(t){return this.isLoading.value=!0,this.isLoading.value=!1,this.app.mount(t),this.options.onAfterLaunch&&this.options.onAfterLaunch(this),this}onLaunch(t){return this.options.onAfterLaunch=z(this.options.onAfterLaunch,t),this}onBeforeLaunch(t){return this.options.onBeforeLaunch=z(this.options.onBeforeLaunch,t),this}onSwitchLang(t){return this.options.onSwitchLang=z(this.options.onSwitchLang,t),this}onSwitchTheme(t){return this.options.onSwitchTheme=z(this.options.onSwitchTheme,t),this}}const nt=L.create({baseURL:"/",timeout:5e3});nt.interceptors.response.use((t=>t),(t=>{const{status:e}=t.response;return 401===e&&window.location.assign("/#/login"),Promise.reject(t)}));!async function(){const t=new et({routeType:"hash",routes:A,routeBase:"",langLoaders:[S],plugins:[E]}),e=await S(t.getLang());t.langMessage=e,t.setUpLang([S]),H(),t.createRouter(A),t.mount("#app")}();export{nt as h,X as t};
