var t=Object.defineProperty,e=(e,n,s)=>(((e,n,s)=>{n in e?t(e,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[n]=s})(e,"symbol"!=typeof n?n+"":n,s),s);export function __vite_legacy_guard(){import("data:text/javascript,")}import{r as n,d as s,w as o,k as r,c as i,L as a,J as u,u as c,H as l,a4 as p,o as h,aa as f}from"./chunks/@vue-2527e674.js";import{u as m,c as g,a as d,b}from"./chunks/vue-router-f6a6a654.js";import{a as B}from"./chunks/axios-ff411c8f.js";import{m as L}from"./chunks/mitt-106818fe.js";import{z as _,e as y,E as v,a as P}from"./chunks/element-plus-c1d4f178.js";import{d as E,e as w,a as j,h as F}from"./chunks/lodash-es-0d8c957d.js";import"./chunks/@popperjs-19b81b33.js";import"./chunks/@vueuse-4568576e.js";import"./chunks/@element-plus-f2588365.js";import"./chunks/async-validator-b6f94fc9.js";import"./chunks/@ctrl-d2fe7c9e.js";!function(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver((t=>{for(const n of t)if("childList"===n.type)for(const t of n.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&e(t)})).observe(document,{childList:!0,subtree:!0})}function e(t){if(t.ep)return;t.ep=!0;const e=function(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerpolicy&&(e.referrerPolicy=t.referrerpolicy),"use-credentials"===t.crossorigin?e.credentials="include":"anonymous"===t.crossorigin?e.credentials="omit":e.credentials="same-origin",e}(t);fetch(t.href,e)}}();const k={},A=function(t,e){return e&&0!==e.length?Promise.all(e.map((t=>{if((t=`${t}`)in k)return;k[t]=!0;const e=t.endsWith(".css"),n=e?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${t}"]${n}`))return;const s=document.createElement("link");return s.rel=e?"stylesheet":"modulepreload",e||(s.as="script",s.crossOrigin=""),s.href=t,document.head.appendChild(s),e?new Promise(((t,e)=>{s.addEventListener("load",t),s.addEventListener("error",e)})):void 0}))).then((()=>t())):t()};const T=[{path:"/login",name:"Login",component:()=>A((()=>import("./chunks/Login-0aafbf87.js")),["chunks/Login-0aafbf87.js","assets/Login-ea0ae50f.css","chunks/@vue-2527e674.js","chunks/vue-router-f6a6a654.js","chunks/login.api-6d961594.js","chunks/plugin-vue_export-helper-3b0dab4c.js","chunks/element-plus-c1d4f178.js","chunks/@popperjs-19b81b33.js","chunks/@vueuse-4568576e.js","chunks/lodash-es-0d8c957d.js","chunks/@element-plus-f2588365.js","chunks/async-validator-b6f94fc9.js","chunks/@ctrl-d2fe7c9e.js","chunks/axios-ff411c8f.js","chunks/mitt-106818fe.js"])},{path:"/logout",name:"Logout",component:()=>A((()=>import("./chunks/Logout-0646cfdd.js")),["chunks/Logout-0646cfdd.js","chunks/vue-router-f6a6a654.js","chunks/@vue-2527e674.js","chunks/login.api-6d961594.js","chunks/axios-ff411c8f.js","chunks/mitt-106818fe.js","chunks/element-plus-c1d4f178.js","chunks/@popperjs-19b81b33.js","chunks/@vueuse-4568576e.js","chunks/lodash-es-0d8c957d.js","chunks/@element-plus-f2588365.js","chunks/async-validator-b6f94fc9.js","chunks/@ctrl-d2fe7c9e.js"])},{path:"/",name:"Index",component:()=>A((()=>import("./chunks/AIAssistantPage-04425910.js")),["chunks/AIAssistantPage-04425910.js","assets/AIAssistantPage-ec6d8c65.css","chunks/@vue-2527e674.js","chunks/@element-plus-f2588365.js","chunks/markdown-it-b5917cbb.js","chunks/mdurl-265342ab.js","chunks/uc.micro-caa990fc.js","chunks/entities-a9d5f18d.js","chunks/linkify-it-fb3f2949.js","chunks/punycode.js-94cdf097.js","chunks/sse.js-f7ab3f8c.js","chunks/plugin-vue_export-helper-3b0dab4c.js","chunks/element-plus-c1d4f178.js","chunks/@popperjs-19b81b33.js","chunks/@vueuse-4568576e.js","chunks/lodash-es-0d8c957d.js","chunks/async-validator-b6f94fc9.js","chunks/@ctrl-d2fe7c9e.js","chunks/vue-router-f6a6a654.js","chunks/axios-ff411c8f.js","chunks/mitt-106818fe.js"])},...[{path:"/chat/assistant",name:"AIAssistant",component:()=>A((()=>import("./chunks/AIAssistantPage-04425910.js")),["chunks/AIAssistantPage-04425910.js","assets/AIAssistantPage-ec6d8c65.css","chunks/@vue-2527e674.js","chunks/@element-plus-f2588365.js","chunks/markdown-it-b5917cbb.js","chunks/mdurl-265342ab.js","chunks/uc.micro-caa990fc.js","chunks/entities-a9d5f18d.js","chunks/linkify-it-fb3f2949.js","chunks/punycode.js-94cdf097.js","chunks/sse.js-f7ab3f8c.js","chunks/plugin-vue_export-helper-3b0dab4c.js","chunks/element-plus-c1d4f178.js","chunks/@popperjs-19b81b33.js","chunks/@vueuse-4568576e.js","chunks/lodash-es-0d8c957d.js","chunks/async-validator-b6f94fc9.js","chunks/@ctrl-d2fe7c9e.js","chunks/vue-router-f6a6a654.js","chunks/axios-ff411c8f.js","chunks/mitt-106818fe.js"])},{path:"/chat/speech",name:"SpeechDemo",component:()=>A((()=>import("./chunks/SpeechDemo-c087b614.js")),["chunks/SpeechDemo-c087b614.js","chunks/@vue-2527e674.js","chunks/plugin-vue_export-helper-3b0dab4c.js"])}],...[{path:"/upload",name:"FileUploader",component:()=>A((()=>import("./chunks/FileUploader-456bc8b0.js")),["chunks/FileUploader-456bc8b0.js","assets/FileUploader-f1e76048.css","chunks/@vue-2527e674.js","chunks/plugin-vue_export-helper-3b0dab4c.js","chunks/element-plus-c1d4f178.js","chunks/@popperjs-19b81b33.js","chunks/@vueuse-4568576e.js","chunks/lodash-es-0d8c957d.js","chunks/@element-plus-f2588365.js","chunks/async-validator-b6f94fc9.js","chunks/@ctrl-d2fe7c9e.js","chunks/vue-router-f6a6a654.js","chunks/axios-ff411c8f.js","chunks/mitt-106818fe.js"])}]];const M=async t=>{let e={};if(void 0!=={"./lang/en.js":()=>A((()=>import("./chunks/en-9d77c714.js")),[]),"./lang/zh.js":()=>A((()=>import("./chunks/zh-00f04f2b.js")),[])}[`./lang/${t}.js`])try{e=(await function(t){switch(t){case"./lang/en.js":return A((()=>import("./chunks/en-9d77c714.js")),[]);case"./lang/zh.js":return A((()=>import("./chunks/zh-00f04f2b.js")),[]);default:return new Promise((function(e,n){("function"==typeof queueMicrotask?queueMicrotask:setTimeout)(n.bind(null,new Error("Unknown variable dynamic import: "+t)))}))}}(`./lang/${t}.js`)).default}catch(n){}return{...e}};var O=async t=>({...await M(t)});function S(t){const e=I();e&&e===t||function(t,e,n=!1){const s=n?sessionStorage:localStorage;null!=e&&s.setItem(t,String(e))}("lang",t)}function I(){return localStorage.getItem("lang")}function x(t,e,n=0,s="children",o=null){n++;for(let r=0;r<t.length;r++){const i=t[r],a=i[s],u=E(a)&&!w(a);e(i,n,!u,o,r),u&&x(i[s],e,n,s,i)}}function G(t){return function(t,e="-",n){return-1===t.indexOf(e)?t:t.split(e).filter((t=>t&&t.trim())).map(((t,e)=>e>0||n?t.charAt(0).toUpperCase()+t.substring(1):t)).join("")}(`page/${t}`,"/",!0)}var $,C;function R(t,e){if(!F(e))throw new Error("wrapFunction expect args type Function");return function(...n){F(t)&&t.apply(this,[...n]),e.apply(this,[...n])}}(C=$||($={}))[C.sync=0]="sync",C[C.async=1]="async";const D={},z=L();D.$on=z.on,D.$off=z.off,D.$emit=z.emit;const V={valueFormats:{},bytesToSize:function(t){let e,n=1024;if(t<0&&(e=Math.floor(Math.log(-t)/Math.log(n))),t>=0&&t<1)return{a:0,b:"0 GB"};t>=1&&(e=Math.floor(Math.log(t)/Math.log(n)));const s=(t/n**e).toPrecision(3)>=0?(t/n**e).toPrecision(3):0;return{a:t.toPrecision(3),b:s+" "+["B","KB","MB","GB","TB","PB","EB","ZB","YB"][e]}},numGet:function(t,e){let n=String(t);const s=n.length,o=n.indexOf(".");return(-1===o?0:s-o-1)>e&&(n=n.substr(0,o+e+1)),n},toFixed:function(t,e){if(null===t)return"";const n=e?10**Math.max(0,e):1;let s=String(Math.round(t*n)/n);if(-1!==s.indexOf("e")||0===t)return s;if(null!=e){const t=s.indexOf("."),o=-1===t?0:s.length-t-1;if(o<e)return(o?s:s+".")+String(n).substr(1,e-o)}return s=V.numGet(s,2),s},formatFuncCreator:function(t,e){return function(n,s,o){if(null===n)return"";let r=0;const i=e.length;for(;Math.abs(n)>=t;)if(r++,n/=t,r>=i)return"NA";return r>0&&null!==o&&(s=o+3*r),V.toFixed(n,s)+e[r]}}};V.valueFormats.bits=V.formatFuncCreator(1024,[" b"," Kib"," Mib"," Gib"," Tib"," Pib"," Eib"," Zib"," Yib"]),V.valueFormats.bytes=V.formatFuncCreator(1024,[" B"," KB"," MB"," GB"," TB"," PB"," EB"," ZB"," YB"]),V.valueFormats.bytes_rate=V.formatFuncCreator(1024,[" B/s"," KB/s"," MB/s"," GB/s"," TB/s"," PB/s"," EB/s"," ZB/s"," YB/s"]),V.valueFormats.kbytes=V.formatFuncCreator(1024,[" KiB"," MiB"," GiB"," TiB"," PiB"," EiB"," ZiB"," YiB"]),V.valueFormats.mbytes=V.formatFuncCreator(1024,[" MiB"," GiB"," TiB"," PiB"," EiB"," ZiB"," YiB"]),V.valueFormats.gbytes=V.formatFuncCreator(1024,[" GB"," TB"," PB"," EB"," ZB"," YB"]),V.valueFormats.bps=V.formatFuncCreator(1e3,[" bps"," Kbps"," Mbps"," Gbps"," Tbps"," Pbps"," Ebps"," Zbps"," Ybps"]),V.valueFormats.pps=V.formatFuncCreator(1e3,[" pps"," Kpps"," Mpps"," Gpps"," Tpps"," Ppps"," Epps"," Zpps"," Ypps"]),V.valueFormats.Bps=V.formatFuncCreator(1e3,[" Bps"," KBps"," MBps"," GBps"," TBps"," PBps"," EBps"," ZBps"," YBps"]),V.valueFormats.ops=V.formatFuncCreator(1e3,[" ops"," kops","Mops","Gops","Tops","Pops","Eops","Zops","Yops"]),V.valueFormats.none=V.toFixed,V.valueFormats.percent=function(t,e){return V.toFixed(t,e)+" %"},V.valueFormats.special=function(t,e,n){return V.toFixed(t,e)+" "+n},V.roundValue=function(t,e){if(null===t)return null;const n=10**e;return Math.round((n*t).toFixed(e))/n};const Y={zh:_,en:y},Z=function(t){let e;return()=>{if(j(e)){const n=Array.prototype.slice.apply(arguments);e=t.apply(null,n)}return e}}((t=>{const e=I(),s=n("zh"===e?_:y);return{elLocale:s,switchLang:t=>{s.value=Y[t]??_}}}));const K=s({__name:"App",setup(t){const{elLocale:e}=Z(),s=m(),f=n(!1);o((()=>s.hash),((t,e)=>{t&&t.indexOf("big-screen")>-1?f.value=!0:f.value=!1}));const g=r((()=>({isScreen:f.value})));return(t,n)=>{const s=p("router-view");return h(),i("div",{class:l(["web-app",g.value])},[a(c(v),{locale:c(e)},{default:u((()=>[a(s)])),_:1},8,["locale"])],2)}}}),U=new Map;const q=new class{constructor(){e(this,"langLoaders",new Set),e(this,"lang",n("")),e(this,"pair",n({}))}registerLangLoader(t){Array.isArray(t)?t.forEach((t=>this.langLoaders.add(t))):this.langLoaders.add(t)}async use(t,e){if(U.has(t)){const e=U.get(t);e&&this.update(t,e)}if(e&&Object.keys(e).length)this.update(t,e),U.set(t,e);else{const e=[];this.langLoaders.forEach((n=>{const s=n(t);e.push(s)}));const n=function(t){return t.reduce(((t,e)=>({...t,...e})),{})}(await Promise.all(e));this.update(t,n),U.set(t,n)}}update(t,e){document.querySelector("html").setAttribute("lang",t),this.lang.value=t,this.pair.value=e||{}}translate(...t){const[e,n,s]=t;if(!e)return e;let o,r=this.pair.value;if("string"==typeof r[e])return this.compile(r[e],n);const i=e.split(".");for(let a=0,u=i.length;a<u;a++){if(o=r[i[a]],!o)return s||e;if(a===u-1)return this.compile(o,n);r=o}}compile(t,e){return t&&e?"string"!=typeof t?t:t.replace(/\{(\w+)\}/g,((t,n)=>e[n])):t}},N=(...t)=>q.translate(...t);function H(t){x(t,((t,e,n,s)=>{if(t.path=s?function(...t){return t.reduce(((t,e)=>t+(e&&e.startsWith("/")?e:`/${e}`)),"").replace(/\/[\/]+/,"/")}(s.path,t.path):t.path,t.component)if(F(t.component)){const e=t.component;t.component=async()=>{const n=await e(),s=n.default?n.default:n;return s.name=s.name??G(t.path),s}}else t.component.name=G(t.path)}))}class W{constructor(t){e(this,"options",{}),e(this,"lang",n("zh")),e(this,"theme",n("primary")),e(this,"isLoading",n(!1)),e(this,"app"),e(this,"router"),e(this,"plugins"),e(this,"langMessage",{}),this.initOptions(t)}initOptions(t){this.options=t||{},this.create(t?.root),this.initBuildInGlobalConfig(),this.setGlobalConfig(t?.config),t?.plugins&&t.plugins.forEach((t=>{this.registerPlugin(t)}))}create(t){const e=t||K;return this.app=f(e),this.options.onBeforeLaunch&&this.options.onBeforeLaunch(this),window.webApp=this,this}setUpLang(t){t&&this.registerLangLoader(t),this.lang.value=I()||this.options.lang||"zh",this.setLang(this.lang.value)}createRouter(t){this.router=function({routes:t,routeBase:e,routeType:n}){t&&H(t);const s=g({history:"hash"===n?d(e):b(e),routes:t||[]});return s.beforeEach((t=>{t.meta.title?document.title=`${N(t.meta.title)}`:document.title=`${N("APP_HOME","",document.title)}`})),s.afterEach((t=>{t.meta.title?document.title=`${N(t.meta.title)}`:document.title=`${N("APP_HOME","",document.title)}`})),s}({routes:t||[],routeBase:this.options.routeBase||"",routeType:this.options.routeType||"hash"}),this.registerPlugin(this.router)}initBuildInGlobalConfig(){const t=this.app.config.globalProperties;Object.defineProperty(t,"$appLoading",{writable:!1,value:this.isLoading}),Object.defineProperty(t,"$lang",{writable:!1,value:this.lang}),Object.defineProperty(t,"$t",{writable:!1,value:N}),Object.defineProperty(t,"$eventbus",{writable:!1,value:D})}setGlobalConfig(t){const e=this.app.config.globalProperties;for(const n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return this}registerLangLoader(t){return q.registerLangLoader(t),this}registerPlugin(t,...e){return this.app.use(t,...e),this}registerRoutes(t){return t.forEach((t=>{this.router.addRoute(t)})),this}setLang(t){S(t),q.use(t,this.langMessage),this.lang.value=t;const e=this.options.onSwitchLang;return e&&e(t),this}getLang(){return I()||this.options.lang||"zh"}switchLang(t){return this.setLang(t),this}mount(t){return this.isLoading.value=!0,this.isLoading.value=!1,this.app.mount(t),this.options.onAfterLaunch&&this.options.onAfterLaunch(this),this}onLaunch(t){return this.options.onAfterLaunch=R(this.options.onAfterLaunch,t),this}onBeforeLaunch(t){return this.options.onBeforeLaunch=R(this.options.onBeforeLaunch,t),this}onSwitchLang(t){return this.options.onSwitchLang=R(this.options.onSwitchLang,t),this}onSwitchTheme(t){return this.options.onSwitchTheme=R(this.options.onSwitchTheme,t),this}}const J=B.create({baseURL:"/",timeout:5e3});J.interceptors.response.use((t=>t),(t=>{const{status:e}=t.response;return 401===e&&window.location.assign("/#/login"),Promise.reject(t)}));!async function(){const t=new W({routeType:"hash",routes:T,routeBase:"",langLoaders:[O],plugins:[P]}),e=await O(t.getLang());t.langMessage=e,t.setUpLang([O]),t.createRouter(T),t.mount("#app")}();export{J as h,N as t};
