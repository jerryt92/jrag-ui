!function(){function e(e){return function(e){if(Array.isArray(e))return n(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return n(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}function t(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,n,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.toStringTag||"@@toStringTag";function l(t,a,o,i){var l=a&&a.prototype instanceof c?a:c,f=Object.create(l.prototype);return r(f,"_invoke",function(t,r,a){var o,i,l,c=0,f=a||[],d=!1,p={p:0,n:0,v:e,a:s,f:s.bind(e,4),d:function(n,t){return o=n,i=0,l=e,p.n=t,u}};function s(t,r){for(i=t,l=r,n=0;!d&&c&&!a&&n<f.length;n++){var a,o=f[n],s=p.p,v=o[2];t>3?(a=v===r)&&(l=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=s&&((a=t<2&&s<o[1])?(i=0,p.v=r,p.n=o[1]):s<v&&(a=t<3||o[0]>r||r>v)&&(o[4]=t,o[5]=r,p.n=v,i=0))}if(a||t>1)return u;throw d=!0,r}return function(a,f,v){if(c>1)throw TypeError("Generator is already running");for(d&&1===f&&s(f,v),i=f,l=v;(n=i<2?e:l)||!d;){o||(i?i<3?(i>1&&(p.n=-1),s(i,l)):p.n=l:p.v=l);try{if(c=2,o){if(i||(a="next"),n=o[a]){if(!(n=n.call(o,l)))throw TypeError("iterator result is not an object");if(!n.done)return n;l=n.value,i<2&&(i=0)}else 1===i&&(n=o.return)&&n.call(o),i<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((n=(d=p.n<0)?l:t.call(r,p))!==u)break}catch(n){o=e,i=1,l=n}finally{c=1}}return{value:n,done:d}}}(t,o,i),!0),f}var u={};function c(){}function f(){}function d(){}n=Object.getPrototypeOf;var p=[][o]?n(n([][o]())):(r(n={},o,(function(){return this})),n),s=d.prototype=c.prototype=Object.create(p);function v(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,r(e,i,"GeneratorFunction")),e.prototype=Object.create(s),e}return f.prototype=d,r(s,"constructor",d),r(d,"constructor",f),f.displayName="GeneratorFunction",r(d,i,"GeneratorFunction"),r(s),r(s,i,"Generator"),r(s,o,(function(){return this})),r(s,"toString",(function(){return"[object Generator]"})),(t=function(){return{w:l,m:v}})()}function r(e,n,t,a){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}r=function(e,n,t,a){function i(n,t){r(e,n,(function(e){return this._invoke(n,t,e)}))}n?o?o(e,n,{value:t,enumerable:!a,configurable:!a,writable:!a}):e[n]=t:(i("next",0),i("throw",1),i("return",2))},r(e,n,t,a)}function a(e,n,t,r,a,o,i){try{var l=e[o](i),u=l.value}catch(e){return void t(e)}l.done?n(u):Promise.resolve(u).then(r,a)}function o(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var i=e.apply(n,t);function l(e){a(i,r,o,l,u,"next",e)}function u(e){a(i,r,o,l,u,"throw",e)}l(void 0)}))}}var i=document.createElement("style");i.innerHTML=".uploader-container[data-v-9d468dc6]{font-family:Arial,sans-serif;padding:70px 20px 20px}.uploader-container .text-chunk-preview[data-v-9d468dc6],.uploader-container .outline-preview[data-v-9d468dc6]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.uploader-container .text-chunk-full[data-v-9d468dc6],.uploader-container .outline-full[data-v-9d468dc6]{max-height:300px;overflow-y:auto}.uploader-container .el-pagination[data-v-9d468dc6]{margin-top:20px;display:flex;justify-content:center}.uploader-container[data-v-33e515ff]{font-family:Arial,sans-serif;padding:70px 20px 20px}.uploader-container .top-bar[data-v-33e515ff]{position:fixed;top:0;left:0;right:0;height:50px;background:color-mix(in srgb,var(--n-color-neutral-w),transparent 80%);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.18);box-shadow:0 8px 32px rgba(31,38,135,.1);display:flex;align-items:center;justify-content:left;z-index:100}.uploader-container .top-bar h3[data-v-33e515ff]{margin-left:20px;font-size:20px;font-weight:500;color:var(--n-color-font-dark);text-shadow:0 2px 4px rgba(0,0,0,.1)}.uploader-container .top-bar .menu-button-box[data-v-33e515ff]{position:absolute;display:flex;right:0}.uploader-container .top-bar .menu-button-box .menu-button[data-v-33e515ff]{font-size:24px;margin-right:5px;cursor:pointer;width:36px;height:36px;display:flex;align-items:center;justify-content:center;color:#666;border-radius:8px;transition:all .3s}.uploader-container .top-bar .menu-button-box .menu-button[data-v-33e515ff]:hover{background-color:rgba(0,0,0,.05)}.uploader-container .top-bar .menu-button-box .menu-button.active[data-v-33e515ff]{color:var(--el-color-primary);background-color:rgba(var(--el-color-primary-rgb),.1)}.uploader-container .menu-card[data-v-33e515ff]{position:fixed;top:60px;right:10px;z-index:100}.drop-zone[data-v-33e515ff]{border:2px dashed #ccc;border-radius:8px;padding:30px;text-align:center;background-color:#f9f9f9;transition:border-color .3s ease}.drop-zone[data-v-33e515ff]:hover{border-color:#888}.drop-zone input[type=file][data-v-33e515ff]{display:none}.drop-zone p[data-v-33e515ff]{margin:0;color:#666}.drop-zone .file-info[data-v-33e515ff]{margin-top:10px;font-size:14px;color:#333}.file-info[data-v-33e515ff]{margin-top:15px;color:#333}.error-message[data-v-33e515ff]{margin-top:10px;color:red;font-weight:700}.layout-container[data-v-6018f500]{display:flex;flex-direction:column;height:100vh;overflow:hidden}.layout-container .top-bar[data-v-6018f500]{position:relative;height:50px;background:color-mix(in srgb,var(--n-color-neutral-w),transparent 80%);backdrop-filter:blur(10px);border-bottom:1px solid rgba(255,255,255,.18);box-shadow:0 8px 32px rgba(31,38,135,.1);display:flex;align-items:center;justify-content:space-between;padding:0 20px;z-index:100}.layout-container .top-bar h3[data-v-6018f500]{font-size:20px;font-weight:500;color:var(--n-color-font-dark);text-shadow:0 2px 4px rgba(0,0,0,.1)}.layout-container .top-bar .menu-button-box .menu-button[data-v-6018f500]{font-size:24px;cursor:pointer;width:36px;height:36px;display:flex;align-items:center;justify-content:center;color:#666;border-radius:8px;transition:all .3s}.layout-container .top-bar .menu-button-box .menu-button[data-v-6018f500]:hover{background-color:rgba(0,0,0,.05)}.layout-container .menu-card[data-v-6018f500]{position:fixed;top:60px;right:10px;z-index:100}.layout-container .content-wrapper[data-v-6018f500]{display:flex;flex:1;overflow:hidden}.layout-container .content-wrapper[data-v-6018f500] .el-menu{border-right:none;height:100%;background:color-mix(in srgb,var(--n-color-neutral-w),transparent 80%);backdrop-filter:blur(10px);border-right:1px solid rgba(255,255,255,.18);box-shadow:0 8px 32px rgba(31,38,135,.1)}.layout-container .content-wrapper[data-v-6018f500] .el-menu-item{border-radius:8px;margin:5px 10px;transition:all .3s;color:var(--n-color-font-dark)}.layout-container .content-wrapper[data-v-6018f500] .el-menu-item.is-active,.layout-container .content-wrapper[data-v-6018f500] .el-menu-item:hover{background-color:var(--el-color-primary);color:var(--n-color-neutral-w)}.layout-container .content-wrapper[data-v-6018f500] .el-menu--collapse .el-menu-item{margin:5px}.layout-container .content-wrapper .main-content[data-v-6018f500]{flex:1;display:flex;flex-direction:column;overflow:hidden}.layout-container .content-wrapper .main-content .content-area[data-v-6018f500]{flex:1;overflow:auto;padding:20px}.layout-container .content-wrapper .main-content .content-area .placeholder[data-v-6018f500]{display:flex;justify-content:center;align-items:center;height:100%;font-size:18px;color:#999}\n",document.head.appendChild(i),System.register(["../index-legacy-010e5fe2.js","./plugin-vue_export-helper-legacy-1285489a.js","./element-plus-legacy-f7c2fe8d.js","./@vue-legacy-679761dc.js","./menuCard-legacy-becfd4bc.js","./vue-router-legacy-023693fc.js","./axios-legacy-ec40b469.js","./mitt-legacy-e809dc6d.js","./lodash-es-legacy-0f78b4f1.js","./@vueuse-legacy-057012f9.js","./@element-plus-legacy-e0305bcc.js","./async-validator-legacy-9f2b928b.js","./@ctrl-legacy-93ea6807.js","./@popperjs-legacy-f5ef238f.js","./normalize-wheel-es-legacy-2498f61f.js"],(function(n){"use strict";var r,a,i,l,u,c,f,d,p,s,v,g,b,x,h,m,y,w,k,j,_,z,C,S,O,A,T,I,M,P,G;return{setters:[function(e){r=e.h,a=e.t},function(e){i=e._},function(e){l=e.p,u=e.q,c=e.r,f=e.s,d=e.b,p=e.t,s=e.u},function(e){v=e.d,g=e.r,b=e.f,x=e.ag,h=e.o,m=e.c,y=e.Q,w=e.I,k=e.J,j=e.S,_=e.u,z=e.a,C=e.M,S=e.G,O=e.a7,A=e.H,T=e.F,I=e.s,M=e.a2,P=e.K},function(e){G=e.M},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){}],execute:function(){var F={class:"uploader-container"},D={class:"text-chunk-preview"},E={class:"text-chunk-full"},B={class:"outline-preview"},U={class:"outline-full"},J=v({__name:"KnowledgeBase",setup:function(e){var n=g([]),i=g(!1),d=g(1),p=g(10),s=g(0),v=function(){var e=o(t().m((function e(){var a,o,l;return t().w((function(e){for(;;)switch(e.p=e.n){case 0:return i.value=!0,e.p=1,e.n=2,t=(d.value-1)*p.value,u=p.value+1,r.get("/v1/rest/jrag/knowledge",{params:{offset:t,limit:u}});case 2:o=e.v,(l=(null===(a=o.data)||void 0===a?void 0:a.data)||[]).length>p.value?(n.value=l.slice(0,p.value),s.value=(d.value+1)*p.value):(n.value=l,s.value=(d.value-1)*p.value+l.length),e.n=4;break;case 3:e.p=3,e.v,n.value=[],s.value=0;case 4:return e.p=4,i.value=!1,e.f(4);case 5:return e.a(2)}var t,u}),e,null,[[1,3,4,5]])})));return function(){return e.apply(this,arguments)}}(),A=function(e){p.value=e,v()},T=function(e){d.value=e,v()};return b((function(){v()})),function(e,t){var r=x("loading");return h(),m("div",F,[y((h(),w(_(c),{data:n.value,style:{width:"100%"}},{default:k((function(){return[j(_(l),{prop:"fileName",label:_(a)("kb.fileName")},null,8,["label"]),j(_(l),{prop:"description",label:_(a)("kb.description")},null,8,["label"]),j(_(l),{prop:"embeddingModel",label:_(a)("kb.embeddingModel")},null,8,["label"]),j(_(l),{prop:"embeddingProvider",label:_(a)("kb.embeddingProvider")},null,8,["label"]),j(_(l),{label:_(a)("kb.textChunk"),width:"300"},{default:k((function(e){return[j(_(u),{effect:"dark",trigger:"hover",placement:"top",width:"400"},{reference:k((function(){return[z("div",D,C(e.row.textChunk),1)]})),default:k((function(){return[z("div",E,C(e.row.textChunk),1)]})),_:2},1024)]})),_:1},8,["label"]),j(_(l),{label:_(a)("kb.outline"),width:"300"},{default:k((function(e){return[j(_(u),{effect:"dark",trigger:"hover",placement:"top",width:"400"},{reference:k((function(){var n;return[z("div",B,C(null===(n=e.row.outline)||void 0===n?void 0:n.join(", ")),1)]})),default:k((function(){return[z("div",U,[(h(!0),m(S,null,O(e.row.outline,(function(e,n){return h(),m("div",{key:n},C(e),1)})),128))])]})),_:2},1024)]})),_:1},8,["label"])]})),_:1},8,["data"])),[[r,i.value]]),j(_(f),{"current-page":d.value,"onUpdate:currentPage":t[0]||(t[0]=function(e){return d.value=e}),"page-size":p.value,"onUpdate:pageSize":t[1]||(t[1]=function(e){return p.value=e}),"page-sizes":[10,20,50,100],total:s.value,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:A,onCurrentChange:T},null,8,["current-page","page-size","total"])])}}}),K=i(J,[["__scopeId","data-v-9d468dc6"]]),N=function(e){var n=new FormData;return n.append("file",e),r.post("/v1/rest/jrag/knowledge/markdown",n)},H={class:"uploader-container"},R={class:"top-bar"},q={class:"menu-button-box"},L={key:0,class:"file-info"},Q={key:1,class:"error-message"},W=["disabled"],$=v({__name:"MarkdownUpload",setup:function(n){var r=g(null);g();var a=g("未选择文件"),i=g(""),l=g(""),u=g(null),c=g(!1),f=function(){u.value.show()},p=function(e){var n=e.target;if(n.files&&n.files.length>0){var t=n.files[0];b(t)}},s=function(e){if(e.preventDefault(),e.dataTransfer&&e.dataTransfer.files.length>0){var n=e.dataTransfer.files[0];b(n)}},v=function(e){e.preventDefault()},b=function(e){["md","zip","tar.gz","tar"].some((function(n){return e.name.endsWith("."+n)}))?(r.value=e,a.value=e.name,i.value="".concat((e.size/1024).toFixed(2)," KB"),l.value=""):l.value="仅支持后缀为 md、zip、tar.gz、tar 的文件"},x=function(){var e=o(t().m((function e(){return t().w((function(e){for(;;)switch(e.n){case 0:if(r.value){e.n=1;break}return e.a(2);case 1:l.value="",N(r.value).then((function(e){d.info("文件上传成功")}));case 2:return e.a(2)}}),e)})));return function(){return e.apply(this,arguments)}}();return function(n,t){return h(),m("div",H,[z("div",R,[t[2]||(t[2]=z("h3",null,"🤖 Jrag AI",-1)),z("div",q,[z("span",{class:A(["menu-button",{active:c.value}]),onClick:f},e(t[1]||(t[1]=[z("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-menu"},[z("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),z("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),z("line",{x1:"3",y1:"18",x2:"21",y2:"18"})],-1)])),2)])]),j(G,{ref_key:"menuCardRef",ref:u,class:"menu-card",onShowChange:t[0]||(t[0]=function(e){return c.value=e})},null,512),z("div",{class:"drop-zone",onDragover:v,onDrop:s},[t[3]||(t[3]=z("p",null,"将文件拖拽至此区域上传",-1)),t[4]||(t[4]=z("p",{class:"file-info"},"或",-1)),z("input",{type:"file",accept:"image/*",onChange:p},null,32)],32),r.value?(h(),m("div",L,[z("p",null,"文件名："+C(a.value),1),z("p",null,"大小："+C(i.value),1)])):T("",!0),l.value?(h(),m("div",Q,C(l.value),1)):T("",!0),z("button",{class:"submit-button",disabled:!r.value,onClick:x}," 提交上传 ",8,W)])}}}),V=i($,[["__scopeId","data-v-33e515ff"]]),X={class:"layout-container"},Y={class:"top-bar"},Z={class:"menu-button-box"},ee={class:"content-wrapper"},ne={class:"main-content"},te={class:"content-area"},re={key:1,class:"placeholder"},ae=v({__name:"index",setup:function(n){var t=g(null),r=g(!1),o=g("1-1"),i=I(null),l=function(e,n){},u=function(e,n){},c=function(e,n){if(o.value=e,"2"===e)i.value=V;else i.value=K},f=function(){t.value.show()};return function(n,d){return h(),m("div",X,[z("div",Y,[d[2]||(d[2]=z("h3",null,"🤖 Jrag AI",-1)),z("div",Z,[z("span",{class:A(["menu-button",{active:n.showMenuCard}]),onClick:f},e(d[1]||(d[1]=[z("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-menu"},[z("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),z("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),z("line",{x1:"3",y1:"18",x2:"21",y2:"18"})],-1)])),2)])]),z("div",ee,[j(G,{ref_key:"menuCardRef",ref:t,class:"menu-card",onShowChange:d[0]||(d[0]=function(e){return n.showMenuCard=e})},null,512),j(_(s),{"default-active":o.value,class:"el-menu-vertical-demo",collapse:r.value,onOpen:l,onClose:u,onSelect:c},{default:k((function(){return[j(_(p),{index:"1"},{default:k((function(){return[M(C(_(a)("kb.knowledge.list")),1)]})),_:1}),j(_(p),{index:"2"},{default:k((function(){return[M(C(_(a)("kb.knowledge.upload.markdown")),1)]})),_:1})]})),_:1},8,["default-active","collapse"]),z("main",ne,[z("div",te,[i.value?(h(),w(P(i.value),{key:0})):(h(),m("div",re,e(d[3]||(d[3]=[z("p",null,"请选择一个菜单项",-1)]))))])])])])}}});n("default",i(ae,[["__scopeId","data-v-6018f500"]]))}}}))}();
