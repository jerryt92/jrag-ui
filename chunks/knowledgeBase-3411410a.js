import{M as e}from"./menuCard-2cb1978e.js";import{h as a,t as l}from"../index-f326de63.js";import{_ as t}from"./plugin-vue_export-helper-3b0dab4c.js";import{p as r,q as s,r as o,s as n}from"./element-plus-195aa41e.js";import{d as u,r as i,f as d,ae as p,o as v,c,a as f,H as m,S as b,Q as g,I as h,J as w,u as k,M as j,G as x,af as y}from"./@vue-215071e0.js";import"./vue-router-aac73014.js";import"./axios-ff411c8f.js";import"./mitt-106818fe.js";import"./lodash-es-ca13b026.js";import"./@vueuse-3587b3f7.js";import"./@element-plus-c56474c5.js";import"./async-validator-b6f94fc9.js";import"./@popperjs-19b81b33.js";import"./normalize-wheel-es-233dc293.js";import"./@ctrl-d2fe7c9e.js";const _={class:"uploader-container"},C={class:"top-bar"},z={class:"menu-button-box"},M={class:"text-chunk-preview"},S={class:"text-chunk-full"},I={class:"outline-preview"},P={class:"outline-full"};var B=t(u({__name:"knowledgeBase",setup(t){const u=i(null),B=i(!1),J=i([]),N=i(!1),U=i(1),q=i(10),A=i(0),G=()=>{u.value.show()},H=async()=>{N.value=!0;try{const t=(await(e=(U.value-1)*q.value,l=q.value+1,a.get("/v1/rest/jrag/knowledge",{params:{offset:e,limit:l}}))).data?.data||[];t.length>q.value?(J.value=t.slice(0,q.value),A.value=(U.value+1)*q.value):(J.value=t,A.value=(U.value-1)*q.value+t.length)}catch(t){J.value=[],A.value=0}finally{N.value=!1}var e,l},Q=e=>{q.value=e,H()},R=e=>{U.value=e,H()};return d((()=>{H()})),(a,t)=>{const i=p("loading");return v(),c("div",_,[f("div",C,[t[4]||(t[4]=f("h3",null,"ðŸ¤– Jrag AI",-1)),f("div",z,[f("span",{class:m(["menu-button",{active:B.value}]),onClick:G},[...t[3]||(t[3]=[f("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-menu"},[f("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),f("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),f("line",{x1:"3",y1:"18",x2:"21",y2:"18"})],-1)])],2)])]),b(e,{ref_key:"menuCardRef",ref:u,class:"menu-card",onShowChange:t[0]||(t[0]=e=>B.value=e)},null,512),g((v(),h(k(o),{data:J.value,style:{width:"100%"}},{default:w((()=>[b(k(r),{prop:"fileName",label:k(l)("kb.fileName")},null,8,["label"]),b(k(r),{prop:"description",label:k(l)("kb.description")},null,8,["label"]),b(k(r),{prop:"embeddingModel",label:k(l)("kb.embeddingModel")},null,8,["label"]),b(k(r),{prop:"embeddingProvider",label:k(l)("kb.embeddingProvider")},null,8,["label"]),b(k(r),{label:k(l)("kb.textChunk"),width:"300"},{default:w((e=>[b(k(s),{effect:"dark",trigger:"hover",placement:"top",width:"400"},{reference:w((()=>[f("div",M,j(e.row.textChunk),1)])),default:w((()=>[f("div",S,j(e.row.textChunk),1)])),_:2},1024)])),_:1},8,["label"]),b(k(r),{label:k(l)("kb.outline"),width:"300"},{default:w((e=>[b(k(s),{effect:"dark",trigger:"hover",placement:"top",width:"400"},{reference:w((()=>[f("div",I,j(e.row.outline?.join(", ")),1)])),default:w((()=>[f("div",P,[(v(!0),c(x,null,y(e.row.outline,((e,a)=>(v(),c("div",{key:a},j(e),1)))),128))])])),_:2},1024)])),_:1},8,["label"])])),_:1},8,["data"])),[[i,N.value]]),b(k(n),{"current-page":U.value,"onUpdate:currentPage":t[1]||(t[1]=e=>U.value=e),"page-size":q.value,"onUpdate:pageSize":t[2]||(t[2]=e=>q.value=e),"page-sizes":[10,20,50,100],total:A.value,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:Q,onCurrentChange:R},null,8,["current-page","page-size","total"])])}}}),[["__scopeId","data-v-f6308f62"]]);export{B as default};
