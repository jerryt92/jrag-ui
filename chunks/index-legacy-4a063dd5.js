!function(){function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(e){if("string"==typeof e)return t(e,n);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function n(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",l=a.toStringTag||"@@toStringTag";function i(n,a,o,l){var i=a&&a.prototype instanceof c?a:c,s=Object.create(i.prototype);return r(s,"_invoke",function(n,r,a){var o,l,i,c=0,s=a||[],d=!1,p={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return o=t,l=0,i=e,p.n=n,u}};function f(n,r){for(l=n,i=r,t=0;!d&&c&&!a&&t<s.length;t++){var a,o=s[t],f=p.p,v=o[2];n>3?(a=v===r)&&(i=o[(l=o[4])?5:(l=3,3)],o[4]=o[5]=e):o[0]<=f&&((a=n<2&&f<o[1])?(l=0,p.v=r,p.n=o[1]):f<v&&(a=n<3||o[0]>r||r>v)&&(o[4]=n,o[5]=r,p.n=v,l=0))}if(a||n>1)return u;throw d=!0,r}return function(a,s,v){if(c>1)throw TypeError("Generator is already running");for(d&&1===s&&f(s,v),l=s,i=v;(t=l<2?e:i)||!d;){o||(l?l<3?(l>1&&(p.n=-1),f(l,i)):p.n=i:p.v=i);try{if(c=2,o){if(l||(a="next"),t=o[a]){if(!(t=t.call(o,i)))throw TypeError("iterator result is not an object");if(!t.done)return t;i=t.value,l<2&&(l=0)}else 1===l&&(t=o.return)&&t.call(o),l<2&&(i=TypeError("The iterator does not provide a '"+a+"' method"),l=1);o=e}else if((t=(d=p.n<0)?i:n.call(r,p))!==u)break}catch(t){o=e,l=1,i=t}finally{c=1}}return{value:t,done:d}}}(n,o,l),!0),s}var u={};function c(){}function s(){}function d(){}t=Object.getPrototypeOf;var p=[][o]?t(t([][o]())):(r(t={},o,(function(){return this})),t),f=d.prototype=c.prototype=Object.create(p);function v(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,r(e,l,"GeneratorFunction")),e.prototype=Object.create(f),e}return s.prototype=d,r(f,"constructor",d),r(d,"constructor",s),s.displayName="GeneratorFunction",r(d,l,"GeneratorFunction"),r(f),r(f,l,"Generator"),r(f,o,(function(){return this})),r(f,"toString",(function(){return"[object Generator]"})),(n=function(){return{w:i,m:v}})()}function r(e,t,n,a){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}r=function(e,t,n,a){function l(t,n){r(e,t,(function(e){return this._invoke(t,n,e)}))}t?o?o(e,t,{value:n,enumerable:!a,configurable:!a,writable:!a}):e[t]=n:(l("next",0),l("throw",1),l("return",2))},r(e,t,n,a)}function a(e,t,n,r,a,o,l){try{var i=e[o](l),u=i.value}catch(e){return void n(e)}i.done?t(u):Promise.resolve(u).then(r,a)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var l=e.apply(t,n);function i(e){a(l,r,o,i,u,"next",e)}function u(e){a(l,r,o,i,u,"throw",e)}i(void 0)}))}}var l=document.createElement("style");l.innerHTML=".kb-table-container[data-v-7fb40b10]{font-family:Arial,sans-serif;padding:20px;height:100%;min-width:800px;display:flex;flex-direction:column;box-sizing:border-box;background-color:color-mix(in srgb,var(--n-color-neutral-w),transparent 30%);backdrop-filter:blur(10px);border-radius:var(--n-radius-triple)}.kb-table-container .header-actions[data-v-7fb40b10]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;flex-shrink:0}.kb-table-container .header-actions .search-area[data-v-7fb40b10],.kb-table-container .header-actions .btn-area[data-v-7fb40b10]{display:flex;gap:10px}.kb-table-container .table-wrapper[data-v-7fb40b10]{border-radius:var(--n-radius-triple);flex:1;overflow:hidden}.kb-table-container .table-wrapper[data-v-7fb40b10] .el-table{height:100%!important}.kb-table-container .pagination-wrapper[data-v-7fb40b10]{margin-top:16px;display:flex;justify-content:flex-end;flex-shrink:0}.kb-table-container .text-chunk-preview[data-v-7fb40b10],.kb-table-container .outline-preview[data-v-7fb40b10]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;cursor:pointer;color:var(--el-color-primary)}.kb-table-container .text-chunk-full[data-v-7fb40b10],.kb-table-container .outline-full[data-v-7fb40b10]{max-height:300px;overflow-y:auto}.hit-test-container[data-v-dceb1c4e]{font-family:Arial,sans-serif;height:100%}.hit-test-container .header-with-tooltip[data-v-dceb1c4e]{display:flex;align-items:center;gap:4px}.hit-test-container .hit-test-result[data-v-dceb1c4e]{padding:20px;background-color:color-mix(in srgb,var(--n-color-neutral-w),transparent 30%);backdrop-filter:blur(10px);border-radius:var(--n-radius-triple);min-height:300px;height:calc(100% - 255px)}.hit-test-container .hit-test-result .table-wrapper[data-v-dceb1c4e]{height:100%;border-radius:var(--n-radius-triple);flex:1;overflow:hidden}.hit-test-container .hit-test-result .table-wrapper[data-v-dceb1c4e] .el-table{height:100%!important}.hit-test-container .hit-test-result .text-chunk-preview[data-v-dceb1c4e],.hit-test-container .hit-test-result .outline-preview[data-v-dceb1c4e]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;cursor:pointer;color:var(--el-color-primary)}.hit-test-container .hit-test-form[data-v-dceb1c4e]{height:235px;margin-top:20px;padding:20px;display:flex;flex-direction:column;box-sizing:border-box;background-color:color-mix(in srgb,var(--n-color-neutral-w),transparent 30%);backdrop-filter:blur(10px);border-radius:var(--n-radius-triple)}.hit-test-container .hit-test-form[data-v-dceb1c4e] .el-form-item__label{color:var(--n-color-font-dark);justify-content:flex-start}.hit-test-container .hit-test-form .top-k-input[data-v-dceb1c4e]{width:100px;margin-right:10px}.hit-test-container .hit-test-form .top-k-input[data-v-dceb1c4e] .el-form-item{margin-bottom:20px}.hit-test-container .hit-test-form .top-k-input[data-v-dceb1c4e] .el-input__wrapper{height:40px;background-color:color-mix(in srgb,var(--n-color-neutral-w),transparent 30%)}.hit-test-container .hit-test-form .top-k-input[data-v-dceb1c4e] .el-input-number{width:100%}.hit-test-container .hit-test-form .top-k-input[data-v-dceb1c4e] .el-input-number .el-input__inner{text-align:left}.hit-test-container .hit-test-form .input-area .el-textarea[data-v-dceb1c4e]{margin-bottom:5px}.hit-test-container .hit-test-form .input-area .el-textarea.text-input[data-v-dceb1c4e] .el-input__count{right:80px;bottom:15px;background:rgba(255,255,255,0)}.hit-test-container .hit-test-form .input-area .el-textarea.text-input[data-v-dceb1c4e] .el-textarea__inner{background:color-mix(in srgb,var(--n-color-neutral-w),transparent 80%);backdrop-filter:blur(10px);padding:15px 20px;border-color:color-mix(in srgb,var(--n-color-neutral-w),transparent 80%);word-wrap:break-word;word-break:break-all;box-shadow:none}.hit-test-container .hit-test-form .input-area .el-textarea.text-input[data-v-dceb1c4e] :hover{box-shadow:0 0 12px color-mix(in srgb,var(--el-color-primary-light-3),transparent 10%)}.hit-test-container .hit-test-form .input-area .el-button[data-v-dceb1c4e]{position:absolute;right:10px;bottom:30px}.rag-settings-page[data-v-26bd28c5]{padding:20px;background-color:color-mix(in srgb,var(--n-color-neutral-w),transparent 30%);backdrop-filter:blur(10px);border-radius:var(--n-radius-triple)}.rag-settings-page .section-title[data-v-26bd28c5]{margin-bottom:12px;font-weight:600;color:var(--n-color-font-dark)}.rag-settings-page .settings-select[data-v-26bd28c5]{width:240px}.rag-settings-page .rag-weight-slider[data-v-26bd28c5]{width:320px}.rag-settings-page .rag-weight-slider .rag-weight-values[data-v-26bd28c5]{display:flex;justify-content:space-between;margin-top:6px;color:var(--n-color-neutral-6);font-size:12px}.rag-settings-page .settings-actions[data-v-26bd28c5]{display:flex;justify-content:flex-end;margin-top:10px}.layout-container[data-v-e012f15a]{display:flex;flex-direction:column;height:100vh;overflow:hidden}.layout-container .content-wrapper[data-v-e012f15a]{display:flex;flex:1;overflow:hidden}.layout-container .content-wrapper[data-v-e012f15a] .el-menu{padding-top:60px;border-right:none;height:100%;background:color-mix(in srgb,var(--n-color-neutral-w),transparent 80%);backdrop-filter:blur(10px);border-right:1px solid rgba(255,255,255,.18);box-shadow:0 8px 32px rgba(31,38,135,.1)}.layout-container .content-wrapper[data-v-e012f15a] .el-menu-item{border-radius:8px;margin:5px 10px;transition:all .3s;color:var(--n-color-font-dark)}.layout-container .content-wrapper[data-v-e012f15a] .el-menu-item.is-active,.layout-container .content-wrapper[data-v-e012f15a] .el-menu-item:hover{background-color:var(--el-color-primary);color:var(--n-color-neutral-w)}.layout-container .content-wrapper[data-v-e012f15a] .el-menu--collapse .el-menu-item{margin:5px}.layout-container .content-wrapper .main-content[data-v-e012f15a]{padding-top:50px;flex:1;display:flex;flex-direction:column;overflow:hidden}.layout-container .content-wrapper .main-content .content-area[data-v-e012f15a]{flex:1;overflow:auto;padding:20px}.layout-container .content-wrapper .main-content .content-area .placeholder[data-v-e012f15a]{display:flex;justify-content:center;align-items:center;height:100%;font-size:18px;color:#999}\n",document.head.appendChild(l),System.register(["../index-legacy-94af24f8.js","./@vue-legacy-799a045e.js","./oem-legacy-aacc897f.js","./plugin-vue_export-helper-legacy-1285489a.js","./element-plus-legacy-99ea3658.js","./topoBar-legacy-7946bae5.js","./@element-plus-legacy-931e6d36.js","./property.api-legacy-ee9449ed.js"],(function(t,r){"use strict";var a,l,i,u,c,s,d,p,f,v,b,h,g,m,w,x,y,k,_,E,T,S,V,R,j,C,I,M,O,P,K,W,A,N,U,z,F,G,B,D,H,q,L,X,Y,Q,$,J,Z,ee;return{setters:[function(e){a=e.h,l=e.t,i=e._},function(e){u=e.d,c=e.r,s=e.at,d=e.f,p=e.aa,f=e.o,v=e.c,b=e.a,h=e.X,g=e.M,m=e.a4,w=e.Q,x=e.u,y=e.al,k=e.U,_=e.A,E=e.K,T=e.ab,S=e.n,V=e.j,R=e.s,j=e.O},function(e){C=e.g,I=e.p},function(e){M=e._},function(e){O=e.f,P=e.d,K=e.p,W=e.q,A=e.r,N=e.s,U=e.i,z=e.a,F=e.t,G=e.m,B=e.c,D=e.u,H=e.g,q=e.v,L=e.w,X=e.x,Y=e.y,Q=e.A},function(e){$=e.T},function(e){J=e.C},function(e){Z=e.g,ee=e.p}],execute:function(){function te(e){if(!e||isNaN(e))return"";var t=new Date(e),n=t.getMonth()+1;n<10&&(n="0"+n);var r=t.getDate();r<10&&(r="0"+r);var a=t.getHours();a<10&&(a="0"+a);var o=t.getMinutes();o<10&&(o="0"+o);var l=t.getSeconds();return l<10&&(l="0"+l),t.getFullYear()+"-"+n+"-"+r+" "+a+":"+o+":"+l}t("p",(function(e){return a.put("/v1".concat(C,"rest/").concat(I,"/knowledge"),e)})),t("d",(function(){window.open("/v1".concat(C,"rest/").concat(I,"/knowledge/json-template"))})),t("i",(function(e){var t=new FormData;return t.append("jsonTemplate",e),a.post("/v1".concat(C,"rest/").concat(I,"/knowledge/json-template"),t)}));var ne={class:"kb-table-container"},re={class:"header-actions"},ae={class:"btn-area"},oe={class:"search-area"},le={class:"table-wrapper"},ie={class:"outline-preview"},ue={class:"outline-full"},ce={class:"text-chunk-preview"},se={class:"text-chunk-full"},de={class:"pagination-wrapper"},pe=u({__name:"KnowledgeBaseList",setup:function(e){var t=c([]),u=c(!1),V=c(1),R=c(10),j=c(0),M=c(""),F=c([]),G=s((function(){return i((function(){return r.import("./KbAddDialog-legacy-6a3df61c.js")}),void 0)})),B=c(!1),D=function(){var e=o(n().m((function e(){var r,o,l;return n().w((function(e){for(;;)switch(e.p=e.n){case 0:return u.value=!0,e.p=1,e.n=2,n=(V.value-1)*R.value,i=R.value+1,c=M.value,a.get("/v1".concat(C,"rest/").concat(I,"/knowledge"),{params:{offset:n,limit:i,search:c}});case 2:o=e.v,(l=(null===(r=o.data)||void 0===r?void 0:r.data)||[]).length>R.value?(t.value=l.slice(0,R.value),j.value=(V.value+1)*R.value):(t.value=l,j.value=(V.value-1)*R.value+l.length),e.n=4;break;case 3:e.p=3,e.v,t.value=[],j.value=0;case 4:return e.p=4,u.value=!1,e.f(4);case 5:return e.a(2)}var n,i,c}),e,null,[[1,3,4,5]])})));return function(){return e.apply(this,arguments)}}(),H=function(e){R.value=e,D()},q=function(e){V.value=e,D()},L=function(){V.value=1,D()},X=function(){var e=o(n().m((function e(){return n().w((function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,S();case 1:B.value=!0,e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(){return e.apply(this,arguments)}}(),Y=function(){B.value=!1,D()},Q=function(e){F.value=e},$=function(){0!==F.value.length&&U.confirm("ç¡®è®¤åˆ é™¤é€‰ä¸­çš„ ".concat(F.value.length," é¡¹æ•°æ®å—ï¼Ÿ"),"è­¦å‘Š",{confirmButtonText:"ç¡®å®š",cancelButtonText:"å–æ¶ˆ",type:"warning"}).then(o(n().m((function e(){var t;return n().w((function(e){for(;;)switch(e.n){case 0:return t=F.value.map((function(e){return e.textChunkId})),e.n=1,n=t,a.post("/v1".concat(C,"rest/").concat(I,"/knowledge/delete"),n);case 1:z.success("åˆ é™¤æˆåŠŸ"),D();case 2:return e.a(2)}var n}),e)})))).catch((function(){}))};return d((function(){D()})),function(e,n){var r=p("loading");return f(),v("div",ne,[b("div",re,[b("div",ae,[h(x(O),{type:"primary",onClick:D},{default:g((function(){return[m(w("ğŸ”„ "+x(l)("common.refresh")),1)]})),_:1}),h(x(O),{type:"primary",onClick:X},{default:g((function(){return[m(w("â• "+x(l)("common.add")),1)]})),_:1}),h(x(O),{type:"danger",disabled:0===F.value.length,onClick:$},{default:g((function(){return[m(w("ğŸ—‘ï¸ "+x(l)("common.delete")),1)]})),_:1},8,["disabled"])]),b("div",oe,[h(x(P),{modelValue:M.value,"onUpdate:modelValue":n[0]||(n[0]=function(e){return M.value=e}),placeholder:x(l)("common.search.placeholder.keyword"),clearable:"",style:{width:"240px"},onKeyup:y(L,["enter"]),onClear:L},null,8,["modelValue","placeholder"]),h(x(O),{type:"primary",onClick:L},{default:g((function(){return[m(w("ğŸ”ï¸ "+x(l)("common.search")),1)]})),_:1})])]),b("div",le,[k((f(),_(x(A),{ref:"tableRef",data:t.value,style:{width:"100%",height:"100%"},border:"",onSelectionChange:Q},{default:g((function(){return[h(x(K),{type:"selection",width:"55",align:"center"}),h(x(K),{label:x(l)("kb.outline"),width:"300"},{default:g((function(e){return[h(x(W),{effect:"dark",trigger:"hover",placement:"top",width:"400"},{reference:g((function(){return[b("div",ie,w((t=e.row.outline,t&&0!==t.length?t.length<=3?t.join(" | "):"".concat(t.slice(0,3).join(", "),"... (+").concat(t.length-3,"é¡¹)"):"-")),1)];var t})),default:g((function(){return[b("div",ue,[(f(!0),v(E,null,T(e.row.outline,(function(e,t){return f(),v("div",{key:t},w(t+1)+". "+w(e),1)})),128))])]})),_:2},1024)]})),_:1},8,["label"]),h(x(K),{label:x(l)("kb.textChunk"),width:"300"},{default:g((function(e){return[h(x(W),{effect:"dark",trigger:"hover",placement:"top",width:"400"},{reference:g((function(){return[b("div",ce,w(e.row.textChunk),1)]})),default:g((function(){return[b("div",se,w(e.row.textChunk),1)]})),_:2},1024)]})),_:1},8,["label"]),h(x(K),{prop:"description",label:x(l)("kb.description"),"min-width":"150","show-overflow-tooltip":""},null,8,["label"]),h(x(K),{prop:"dimension",label:x(l)("kb.dimension"),width:"130"},null,8,["label"]),h(x(K),{prop:"embeddingModel",label:x(l)("kb.embeddingModel"),width:"150"},null,8,["label"]),h(x(K),{prop:"embeddingProvider",label:x(l)("kb.embeddingProvider"),width:"150"},null,8,["label"]),h(x(K),{prop:"createTime",label:x(l)("common.create.time"),width:"180"},{default:g((function(e){return[m(w(x(te)(e.row.createTime)),1)]})),_:1},8,["label"]),h(x(K),{prop:"updateTime",label:x(l)("common.update.time"),width:"180"},{default:g((function(e){return[m(w(x(te)(e.row.updateTime)),1)]})),_:1},8,["label"]),h(x(K),{prop:"createUsername",label:x(l)("kb.create.username"),width:"150"},null,8,["label"])]})),_:1},8,["data"])),[[r,u.value]])]),b("div",de,[h(x(N),{"current-page":V.value,"onUpdate:currentPage":n[1]||(n[1]=function(e){return V.value=e}),"page-size":R.value,"onUpdate:pageSize":n[2]||(n[2]=function(e){return R.value=e}),"page-sizes":[10,20,50,100],total:j.value,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:H,onCurrentChange:q},null,8,["current-page","page-size","total"])]),h(x(G),{modelValue:B.value,"onUpdate:modelValue":n[3]||(n[3]=function(e){return B.value=e}),onAddSuccess:Y},null,8,["modelValue"])])}}}),fe=M(pe,[["__scopeId","data-v-7fb40b10"]]),ve={class:"hit-test-container"},be={class:"hit-test-result"},he={class:"table-wrapper"},ge={class:"outline-preview"},me={class:"outline-full"},we={class:"text-chunk-full"},xe={class:"header-with-tooltip"},ye={class:"text-chunk-preview"},ke={class:"text-chunk-full"},_e={class:"hit-test-form"},Ee=u({__name:"HitTest",setup:function(t){var r=c({text:"",topK:5}),i=c(),u=c(!1),s=c([]),d=function(e){return Number.isFinite(e)?e.toFixed(4):"-"},y=function(){var e=o(n().m((function e(){return n().w((function(e){for(;;)switch(e.n){case 0:if(i.value){e.n=1;break}return e.a(2);case 1:return e.n=2,i.value.validate(function(){var e=o(n().m((function e(t){var o,l;return n().w((function(e){for(;;)switch(e.p=e.n){case 0:if(!t){e.n=5;break}return e.p=1,u.value=!0,e.n=2,n=r.value.text,i=r.value.topK,a.get("/v1".concat(C,"rest/").concat(I,"/knowledge/retrieve"),{params:{"query-text":n,"top-k":i}});case 2:l=e.v,s.value=(null===(o=l.data)||void 0===o?void 0:o.data)||[],e.n=4;break;case 3:e.p=3,e.v;case 4:return e.p=4,u.value=!1,e.f(4);case 5:return e.a(2)}var n,i}),e,null,[[1,3,4,5]])})));return function(t){return e.apply(this,arguments)}}());case 2:return e.a(2)}}),e)})));return function(){return e.apply(this,arguments)}}(),E=!0,T=function(e){"Enter"!==e.key||e.shiftKey||(E=!0,e.preventDefault())},S=function(){E=!1},V=function(){E&&(E=!1,y())};return function(t,n){var a=p("loading");return f(),v("div",ve,[b("div",be,[b("div",he,[k((f(),_(x(A),{ref:"tableRef",data:s.value,style:{width:"100%",height:"100%"},border:""},{default:g((function(){return[h(x(K),{label:x(l)("kb.outline"),width:"300"},{default:g((function(e){return[h(x(W),{effect:"dark",trigger:"hover",placement:"top",width:"400"},{reference:g((function(){return[b("div",ge,w(e.row.outline),1)]})),default:g((function(){return[b("div",me,[b("div",we,w(e.row.outline),1)])]})),_:2},1024)]})),_:1},8,["label"]),h(x(K),{prop:"denseMetricType",label:x(l)("kb.knowledge.hit.test.dense.metric"),width:"170"},null,8,["label"]),h(x(K),{label:x(l)("kb.knowledge.hit.test.dense.score"),width:"170",formatter:function(e){return d(e.denseScore)}},{header:g((function(){return[b("div",xe,[b("span",null,w(x(l)("kb.knowledge.hit.test.dense.score")),1),h(x(F),{effect:"dark",placement:"top","raw-content":!0,content:x(l)("kb.knowledge.hit.test.score.tip")},{default:g((function(){return[h(x(G),{class:"info-icon"},{default:g((function(){return[h(x(J))]})),_:1})]})),_:1},8,["content"])])]})),_:1},8,["label","formatter"]),h(x(K),{prop:"sparseMetricType",label:x(l)("kb.knowledge.hit.test.sparse.metric"),width:"170"},null,8,["label"]),h(x(K),{label:x(l)("kb.knowledge.hit.test.sparse.score"),width:"170",formatter:function(e){return d(e.sparseScore)}},null,8,["label","formatter"]),h(x(K),{label:x(l)("kb.knowledge.hit.test.hybrid.score"),width:"170",formatter:function(e){var t;return d(null!==(t=e.hybridScore)&&void 0!==t?t:e.score)}},null,8,["label","formatter"]),h(x(K),{label:x(l)("kb.textChunk"),width:"400"},{default:g((function(e){return[h(x(W),{effect:"dark",trigger:"hover",placement:"top",width:"400"},{reference:g((function(){return[b("div",ye,w(e.row.textChunk),1)]})),default:g((function(){return[b("div",ke,w(e.row.textChunk),1)]})),_:2},1024)]})),_:1},8,["label"]),h(x(K),{prop:"isFiltered",label:x(l)("kb.knowledge.hit.test.is.hit"),width:"150",formatter:function(e){return e.isFiltered?x(l)("common.no"):x(l)("common.yes")}},null,8,["label","formatter"]),h(x(K),{prop:"dimension",label:x(l)("kb.dimension"),width:"130"},null,8,["label"]),h(x(K),{prop:"embeddingModel",label:x(l)("kb.embeddingModel"),width:"150"},null,8,["label"]),h(x(K),{prop:"embeddingProvider",label:x(l)("kb.embeddingProvider"),width:"150"},null,8,["label"])]})),_:1},8,["data"])),[[a,u.value]])])]),b("div",_e,[h(x(H),{ref_key:"formRef",ref:i,model:r.value,"label-width":"120px"},{default:g((function(){return[h(x(B),{label:"TOP-K",prop:"topK",rules:[{required:!0,message:x(l)("common.input.required")}]},{default:g((function(){return[h(x(D),{class:"top-k-input",modelValue:r.value.topK,"onUpdate:modelValue":n[0]||(n[0]=function(e){return r.value.topK=e}),min:1,max:15,"controls-position":"right"},null,8,["modelValue"])]})),_:1},8,["rules"]),h(x(B),{label:x(l)("kb.knowledge.hit.test.text"),prop:"text",class:"input-area",rules:[{required:!0,message:x(l)("common.input.required")}]},{default:g((function(){return[h(x(P),{modelValue:r.value.text,"onUpdate:modelValue":n[1]||(n[1]=function(e){return r.value.text=e}),class:"text-input",placeholder:x(l)("kb.knowledge.hit.test.text.placeholder"),type:"textarea",autosize:{minRows:5,maxRows:10},maxlength:4e3,"show-word-limit":"",onKeydown:T,onInput:S,onKeyup:V},null,8,["modelValue","placeholder"]),h(x(O),{type:"primary",onClick:y},{default:g((function(){return e(n[2]||(n[2]=[m("æäº¤",-1)]))})),_:1})]})),_:1},8,["label","rules"])]})),_:1},8,["model"])])])}}}),Te=M(Ee,[["__scopeId","data-v-dceb1c4e"]]),Se={class:"rag-settings-page"},Ve={class:"section-title"},Re={class:"rag-weight-slider"},je={class:"rag-weight-values"},Ce={class:"settings-actions"},Ie="RETRIEVE_TOP_K",Me="RETRIEVE_METRIC_TYPE",Oe="RETRIEVE_METRIC_SCORE_COMPARE_EXPR",Pe="RETRIEVE_DENSE_WEIGHT",Ke="RETRIEVE_SPARSE_WEIGHT",We=u({__name:"RagSettings",setup:function(e){var t=c(!1),r=c(!1),a=c({topK:5,metricType:"COSINE",metricScoreExpr:"> 0.7",denseWeight:.5,sparseWeight:.5}),i=function(){var e=a.value.denseWeight,t=a.value.sparseWeight,n=e+t;if(!Number.isFinite(n)||n<=0)return a.value.denseWeight=.5,void(a.value.sparseWeight=.5);a.value.denseWeight=e/n,a.value.sparseWeight=t/n},u=V({get:function(){return Math.round(100*a.value.denseWeight)},set:function(e){var t=Math.min(100,Math.max(0,e));a.value.denseWeight=t/100,a.value.sparseWeight=(100-t)/100}}),s=function(e){var t=Math.min(100,Math.max(0,Math.round(e))),n=100-t;return"".concat(l("settings.rag.weight.dense"),": ").concat(t,"% / ").concat(l("settings.rag.weight.sparse"),": ").concat(n,"%")},y=function(e,t){if(null==e)return t;var n=Number(e);return Number.isFinite(n)?n:t},_=function(e){var t,n;return null!=e&&null!==(t=e.data)&&void 0!==t&&t.data?e.data.data:null!==(n=null==e?void 0:e.data)&&void 0!==n?n:{}},E=function(){var e=o(n().m((function e(){var r,o;return n().w((function(e){for(;;)switch(e.p=e.n){case 0:return t.value=!0,e.p=1,e.n=2,Z([Ie,Me,Oe,Pe,Ke]);case 2:r=e.v,o=_(r),a.value.topK=y(Ie in o?o.RETRIEVE_TOP_K:void 0,a.value.topK),a.value.metricType=o.RETRIEVE_METRIC_TYPE||a.value.metricType,a.value.metricScoreExpr=o.RETRIEVE_METRIC_SCORE_COMPARE_EXPR||a.value.metricScoreExpr,a.value.denseWeight=y(Pe in o?o.RETRIEVE_DENSE_WEIGHT:void 0,a.value.denseWeight),a.value.sparseWeight=y(Ke in o?o.RETRIEVE_SPARSE_WEIGHT:void 0,a.value.sparseWeight),i(),e.n=4;break;case 3:e.p=3,e.v,z.error(l("settings.load.failed"));case 4:return e.p=4,t.value=!1,e.f(4);case 5:return e.a(2)}}),e,null,[[1,3,4,5]])})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=o(n().m((function e(){return n().w((function(e){for(;;)switch(e.p=e.n){case 0:return r.value=!0,e.p=1,i(),e.n=2,ee([{propertyName:Ie,propertyValue:String(a.value.topK)},{propertyName:Me,propertyValue:a.value.metricType},{propertyName:Oe,propertyValue:a.value.metricScoreExpr},{propertyName:Pe,propertyValue:String(a.value.denseWeight)},{propertyName:Ke,propertyValue:String(a.value.sparseWeight)}]);case 2:z.success(l("settings.save.success")),e.n=4;break;case 3:e.p=3,e.v,z.error(l("settings.save.failed"));case 4:return e.p=4,r.value=!1,e.f(4);case 5:return e.a(2)}}),e,null,[[1,3,4,5]])})));return function(){return e.apply(this,arguments)}}();return d((function(){E()})),function(e,n){var o=p("loading");return k((f(),v("div",Se,[b("div",Ve,w(x(l)("settings.rag.section")),1),h(x(H),{model:a.value,"label-width":"220px"},{default:g((function(){return[h(x(B),{label:x(l)("settings.rag.topk")},{default:g((function(){return[h(x(D),{modelValue:a.value.topK,"onUpdate:modelValue":n[0]||(n[0]=function(e){return a.value.topK=e}),min:1},null,8,["modelValue"])]})),_:1},8,["label"]),h(x(B),{label:x(l)("settings.rag.metric.type.dense")},{default:g((function(){return[h(x(q),{modelValue:a.value.metricType,"onUpdate:modelValue":n[1]||(n[1]=function(e){return a.value.metricType=e}),class:"settings-select"},{default:g((function(){return[h(x(L),{label:"COSINE",value:"COSINE"}),h(x(L),{label:"IP",value:"IP"}),h(x(L),{label:"L2",value:"L2"})]})),_:1},8,["modelValue"])]})),_:1},8,["label"]),h(x(B),{label:x(l)("settings.rag.metric.type.sparse")},{default:g((function(){return[h(x(q),{"model-value":"BM25",class:"settings-select",disabled:""},{default:g((function(){return[h(x(L),{label:"BM25",value:"BM25"})]})),_:1})]})),_:1},8,["label"]),h(x(B),{label:x(l)("settings.rag.weight.label")},{default:g((function(){return[b("div",Re,[h(x(X),{modelValue:u.value,"onUpdate:modelValue":n[2]||(n[2]=function(e){return u.value=e}),min:0,max:100,"show-tooltip":!0,"format-tooltip":s},null,8,["modelValue"]),b("div",je,[b("span",null,w(x(l)("settings.rag.weight.dense"))+": "+w(u.value)+"%",1),b("span",null,w(x(l)("settings.rag.weight.sparse"))+": "+w(100-u.value)+"%",1)])])]})),_:1},8,["label"]),h(x(B),{label:x(l)("settings.rag.metric.score.expr")},{default:g((function(){return[h(x(P),{modelValue:a.value.metricScoreExpr,"onUpdate:modelValue":n[3]||(n[3]=function(e){return a.value.metricScoreExpr=e})},null,8,["modelValue"])]})),_:1},8,["label"])]})),_:1},8,["model"]),b("div",Ce,[h(x(O),{type:"primary",loading:r.value,onClick:T},{default:g((function(){return[m(w(x(l)("settings.save")),1)]})),_:1},8,["loading"])])])),[[o,t.value]])}}}),Ae=M(We,[["__scopeId","data-v-26bd28c5"]]),Ne={class:"layout-container"},Ue={class:"content-wrapper"},ze={class:"main-content"},Fe={class:"content-area"},Ge={key:1,class:"placeholder"},Be=u({__name:"index",setup:function(t){var n=c(!1),r=c("1"),a=R(fe),o=function(e,t){},i=function(e,t){},u=function(e,t){switch(r.value=e,e){default:a.value=fe;break;case"2":a.value=Te;break;case"3":a.value=Ae}};return function(t,c){return f(),v("div",Ne,[h($),b("div",Ue,[h(x(Q),{"default-active":r.value,class:"el-menu-vertical-demo",collapse:n.value,onOpen:o,onClose:i,onSelect:u},{default:g((function(){return[h(x(Y),{index:"1"},{default:g((function(){return[m(w(x(l)("kb.knowledge.list")),1)]})),_:1}),h(x(Y),{index:"2"},{default:g((function(){return[m(w(x(l)("kb.knowledge.hit.test")),1)]})),_:1}),h(x(Y),{index:"3"},{default:g((function(){return[m(w(x(l)("settings.rag.section")),1)]})),_:1})]})),_:1},8,["default-active","collapse"]),b("main",ze,[b("div",Fe,[a.value?(f(),_(j(a.value),{key:0})):(f(),v("div",Ge,e(c[0]||(c[0]=[b("p",null,"è¯·é€‰æ‹©ä¸€ä¸ªèœå•é¡¹",-1)]))))])])])])}}}),De=M(Be,[["__scopeId","data-v-e012f15a"]]),He=Object.freeze(Object.defineProperty({__proto__:null,default:De},Symbol.toStringTag,{value:"Module"}));t("a",He)}}}))}();
