import{t as a}from"../index-498d2843.js";import{T as s}from"./topoBar-203d5dba.js";import{a as o}from"./user.api-515b1d2f.js";import{_ as e}from"./plugin-vue_export-helper-3b0dab4c.js";import{c as l,d as r,f as d,g as t,a as c}from"./element-plus-68af0c8f.js";import{d as u,r as n,o as m,c as p,X as i,a as w,Q as f,u as v,M as P,a4 as b}from"./@vue-3d1b68dd.js";import"./vue-router-82f82b94.js";import"./axios-ff411c8f.js";import"./mitt-106818fe.js";import"./lodash-es-7a4ab7c3.js";import"./@popperjs-66964824.js";import"./@vueuse-63a82237.js";import"./@element-plus-0d456ff2.js";import"./async-validator-b6f94fc9.js";import"./@ctrl-d2fe7c9e.js";import"./normalize-wheel-es-233dc293.js";const j={class:"account-page"},_={class:"account-content"},h={class:"account-card"},y={class:"account-header"},V={class:"account-desc"};var g=e(u({__name:"AccountSettings",setup(e){const u=n(!1),g=n({oldPassword:"",newPassword:"",confirmPassword:""}),x=async()=>{if(g.value.oldPassword&&g.value.newPassword)if(g.value.newPassword===g.value.confirmPassword){u.value=!0;try{await o({oldPassword:g.value.oldPassword,newPassword:g.value.newPassword}),c.success(a("common.success")),g.value.oldPassword="",g.value.newPassword="",g.value.confirmPassword=""}catch(s){c.error(a("account.password.update.failed"))}finally{u.value=!1}}else c.error(a("account.password.mismatch"));else c.error(a("common.input.required"))};return(o,e)=>(m(),p("div",j,[i(s),w("div",_,[w("div",h,[w("div",y,[w("h2",null,f(v(a)("account.title")),1),w("p",V,f(v(a)("account.desc")),1)]),i(v(t),{model:g.value,"label-position":"top",class:"account-form"},{default:P((()=>[i(v(l),{label:v(a)("account.old.password")},{default:P((()=>[i(v(r),{modelValue:g.value.oldPassword,"onUpdate:modelValue":e[0]||(e[0]=a=>g.value.oldPassword=a),type:"password","show-password":""},null,8,["modelValue"])])),_:1},8,["label"]),i(v(l),{label:v(a)("account.new.password")},{default:P((()=>[i(v(r),{modelValue:g.value.newPassword,"onUpdate:modelValue":e[1]||(e[1]=a=>g.value.newPassword=a),type:"password","show-password":""},null,8,["modelValue"])])),_:1},8,["label"]),i(v(l),{label:v(a)("account.confirm.password")},{default:P((()=>[i(v(r),{modelValue:g.value.confirmPassword,"onUpdate:modelValue":e[2]||(e[2]=a=>g.value.confirmPassword=a),type:"password","show-password":""},null,8,["modelValue"])])),_:1},8,["label"]),i(v(l),{class:"action-row"},{default:P((()=>[i(v(d),{type:"primary",loading:u.value,onClick:x,class:"submit-btn"},{default:P((()=>[b(f(v(a)("common.ok")),1)])),_:1},8,["loading"])])),_:1})])),_:1},8,["model"])])])]))}}),[["__scopeId","data-v-37b7eab0"]]);export{g as default};
