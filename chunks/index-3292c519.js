import{e as a,g as e,p as s,t}from"../index-22adbbfb.js";import{T as l}from"./topoBar-0aefad07.js";import{_ as n}from"./plugin-vue_export-helper-3b0dab4c.js";import{f as o,p as c,B as i,r,a as u,t as d,d as p,v as m,w as v}from"./element-plus-310660e5.js";import{d as f,r as g,f as y,aa as _,U as b,o as h,c as j,a as w,Q as S,u as x,X as O,M as k,a4 as J,K as z,ab as N,J as $,A as C,s as B,O as I}from"./@vue-bb747027.js";import"./vue-router-6370cc0f.js";import"./axios-ff411c8f.js";import"./mitt-106818fe.js";import"./lodash-es-7a4ab7c3.js";import"./@popperjs-66964824.js";import"./@vueuse-09ca9f25.js";import"./@element-plus-ccefd8d4.js";import"./async-validator-b6f94fc9.js";import"./@ctrl-d2fe7c9e.js";import"./normalize-wheel-es-233dc293.js";const M={class:"mcp-status-page"},V={class:"header"},U={class:"tool-tags"},A={key:0};var E=n(f({__name:"McpServerStatus",setup(l){const n=g(!1),p=g([]),m=async()=>{n.value=!0;try{const t=await a.get(`/v1${e}rest/${s}/mcp/status`);p.value=(a=>a?.data?.data?a.data.data:a?.data??[])(t)||[]}catch(l){u.error(t("mcp.status.load.failed"))}finally{n.value=!1}};return y((()=>{m()})),(a,e)=>{const s=_("loading");return b((h(),j("div",M,[w("div",V,[w("h2",null,S(x(t)("mcp.status.title")),1),O(x(o),{size:"small",onClick:m,loading:n.value},{default:k((()=>[J(S(x(t)("common.refresh")),1)])),_:1},8,["loading"])]),O(x(r),{data:p.value,style:{width:"100%"}},{default:k((()=>[O(x(c),{prop:"name",label:x(t)("mcp.status.name"),"min-width":"160"},null,8,["label"]),O(x(c),{prop:"type",label:x(t)("mcp.status.type"),"min-width":"140"},null,8,["label"]),O(x(c),{prop:"endpoint",label:x(t)("mcp.status.endpoint"),"min-width":"260"},null,8,["label"]),O(x(c),{label:x(t)("mcp.status.status"),"min-width":"120"},{default:k((({row:a})=>[O(x(i),{type:"online"===a.status?"success":"danger"},{default:k((()=>[J(S("online"===a.status?x(t)("mcp.status.online"):x(t)("mcp.status.offline")),1)])),_:2},1032,["type"])])),_:1},8,["label"]),O(x(c),{label:x(t)("mcp.status.tools"),"min-width":"220"},{default:k((({row:a})=>[w("div",U,[(h(!0),j(z,null,N(a.tools||[],(a=>(h(),C(x(d),{key:a.name,content:a.description||"",disabled:!a.description,placement:"top"},{default:k((()=>[O(x(i),{size:"small",class:"tool-tag"},{default:k((()=>[J(S(a.name),1)])),_:2},1024)])),_:2},1032,["content","disabled"])))),128)),a.tools&&0!==a.tools.length?$("",!0):(h(),j("span",A,S(x(t)("mcp.status.empty.tools")),1))])])),_:1},8,["label"])])),_:1},8,["data"])])),[[s,n.value]])}}}),[["__scopeId","data-v-aabb01e6"]]);const K={class:"mcp-config-page"},Q={class:"header"},R={class:"actions"};var T=n(f({__name:"McpServerConfig",setup(l){const n=g(!1),c=g(!1),i=g(""),r=async()=>{n.value=!0;try{const t=(a=>a?.data?.data?a.data.data:a?.data??{})(await a.get(`/v1${e}rest/${s}/mcp/config`));i.value=JSON.stringify(t||{},null,2)}catch(l){u.error(t("mcp.config.load.failed"))}finally{n.value=!1}},d=()=>{if(i.value.trim())try{const a=JSON.parse(i.value);i.value=JSON.stringify(a,null,2)}catch(a){u.warning(t("mcp.config.invalid"))}else i.value=JSON.stringify({mcpServers:{}},null,2)},m=async()=>{c.value=!0;try{const n=JSON.parse(i.value);await(l=n,a.put(`/v1${e}rest/${s}/mcp/config`,l)),i.value=JSON.stringify(n,null,2),u.success(t("settings.save.success"))}catch(n){n instanceof SyntaxError?u.error(t("mcp.config.invalid")):u.error(t("settings.save.failed"))}finally{c.value=!1}var l};return y((()=>{r()})),(a,e)=>{const s=_("loading");return b((h(),j("div",K,[w("div",Q,[w("h2",null,S(x(t)("mcp.config.title")),1),w("div",R,[O(x(o),{size:"small",onClick:d},{default:k((()=>[J(S(x(t)("mcp.config.format")),1)])),_:1}),O(x(o),{type:"primary",size:"small",onClick:m,loading:c.value},{default:k((()=>[J(S(x(t)("settings.save")),1)])),_:1},8,["loading"])])]),O(x(p),{modelValue:i.value,"onUpdate:modelValue":e[0]||(e[0]=a=>i.value=a),type:"textarea",autosize:{minRows:14},placeholder:x(t)("mcp.config.placeholder"),onBlur:d},null,8,["modelValue","placeholder"])])),[[s,n.value]])}}}),[["__scopeId","data-v-3cb65729"]]);const X={class:"layout-container"},q={class:"content-wrapper"},D={class:"main-content"},F={class:"content-area"},G={key:1,class:"placeholder"};var H=n(f({__name:"index",setup(a){const e=g(!1),s=g("1"),n=B(E),o=(a,e)=>{},c=(a,e)=>{},i=a=>{if(s.value=a,"2"===a)n.value=T;else n.value=E};return(a,r)=>(h(),j("div",X,[O(l),w("div",q,[O(x(v),{"default-active":s.value,class:"el-menu-vertical-demo",collapse:e.value,onOpen:o,onClose:c,onSelect:i},{default:k((()=>[O(x(m),{index:"1"},{default:k((()=>[J(S(x(t)("mcp.menu.status")),1)])),_:1}),O(x(m),{index:"2"},{default:k((()=>[J(S(x(t)("mcp.menu.config")),1)])),_:1})])),_:1},8,["default-active","collapse"]),w("main",D,[w("div",F,[n.value?(h(),C(I(n.value),{key:0})):(h(),j("div",G,[w("p",null,S(x(t)("common.placeholder")),1)]))])])])]))}}),[["__scopeId","data-v-1048f2a7"]]);export{H as default};
