!function(){var e=document.createElement("style");e.innerHTML=".slider-container{position:relative;display:inline-block;flex-direction:column;justify-content:center;height:auto;margin:0 auto;padding:16px;border-radius:var(--n-radius-triple);background:#fff;box-shadow:0 2px 8px rgba(0,0,0,.1)}.slider-container .slider-canvas{position:relative;background-color:transparent;margin-bottom:16px}.slider-container .slider-canvas .puzzle-image{border-radius:4px}.slider-container .slider-canvas .slider-block{z-index:2;border-radius:4px;will-change:transform;backface-visibility:hidden;transform:translateZ(0)}@keyframes result-show{0%{opacity:0}to{opacity:.7}}.slider-container .result-mask{position:absolute;left:0;bottom:0;width:100%;opacity:.7}.slider-container .result-mask.success{background-color:#52ccba;animation:result-show 1s}.slider-container .result-mask.fail{background-color:#f57a7a;animation:result-show 1s}.slider-square{background-color:#f7f9fa;height:36px;text-align:center;line-height:36px;border:2px solid rgba(221,221,221,.17);position:relative;border-radius:4px;z-index:10}.slider-square .box{padding:0 16px;display:flex;align-items:center;justify-content:center;position:relative;height:100%}.slider-square .box span{flex:1;text-align:center;color:#666;font-size:14px}.slider-square .slider-square-icon{position:absolute;top:0;left:0;height:35px;width:35px;background-color:color-mix(in srgb,var(--el-color-primary),transparent 10%);cursor:pointer;z-index:11;user-select:none;will-change:transform;border:none;border-radius:var(--n-radius-double)}.slider-square .slider-square-icon:hover,.slider-square .slider-square-icon:active{background-color:var(--el-color-primary);box-shadow:0 0 10px var(--el-color-primary)}.login-container[data-v-ebbccee8]{display:flex;justify-content:center;align-items:center;height:100vh}.login-form[data-v-ebbccee8]{width:400px;padding:20px;background-color:rgba(255,255,255,.2);backdrop-filter:blur(12px);border-radius:8px;box-shadow:0 2px 8px rgba(0,0,0,.1);transition:transform .2s ease}.login-form[data-v-ebbccee8]:hover{transform:scale(1.02)}.logo-container[data-v-ebbccee8]{text-align:center;margin-bottom:20px}.logo-text[data-v-ebbccee8]{font-size:32px;font-weight:700;color:#409eff;margin:0}.title[data-v-ebbccee8]{margin-bottom:20px;text-align:center}.submit-btn[data-v-ebbccee8]{width:100%}.submit-btn[data-v-ebbccee8]:hover{transform:scale(1.01)}.captcha-dialog{min-width:auto;width:auto;padding:25px}\n",document.head.appendChild(e),System.register(["./@vue-legacy-68ac8a77.js","./vue-router-legacy-ca02dec5.js","./login.api-legacy-06c1e337.js","./axios-legacy-ec40b469.js","../index-legacy-364ac5d5.js","./element-plus-legacy-c7434952.js","./plugin-vue_export-helper-legacy-1285489a.js","./mitt-legacy-e809dc6d.js","./lodash-es-legacy-6963f153.js","./@vueuse-legacy-588eca1e.js","./@popperjs-legacy-f5ef238f.js","./@element-plus-legacy-91fd3977.js","./async-validator-legacy-9f2b928b.js","./@ctrl-legacy-93ea6807.js"],(function(e){"use strict";var a,t,l,n,i,r,o,s,u,c,d,v,p,f,h,g,m,b,x,y,w,k,z,_,j,L,S,q,U,C,V;return{setters:[function(e){a=e.d,t=e.r,l=e.w,n=e.U,i=e.f,r=e.a1,o=e.ah,s=e.R,u=e.o,c=e.c,d=e.a,v=e.P,p=e.H,f=e.O,h=e.L,g=e.J,m=e.u,b=e.a2,x=e.ag,y=e.G},function(e){w=e.d},function(e){k=e.l},function(e){z=e.a},function(e){_=e.t},function(e){j=e.b,L=e.c,S=e.d,q=e.f,U=e.g,C=e.h},function(e){V=e._},function(){},function(){},function(){},function(){},function(){},function(){},function(){}],execute:function(){var E={class:"slider-container"},R={class:"slider-square"},X={class:"box"},Y=a({__name:"SlipCaptcha",props:{loading:{type:Boolean,default:!1}},emits:["validPass"],setup:function(e,a){var h=a.expose,g=a.emit,m=t(!1),b=e;l((function(){return b.loading}),(function(e){m.value=e}));var x=g;h({updateSlideCaptcha:q});var y=t(null),w=t(null),k=t({hash:"",puzzleUrl:"",width:300,height:150,sliderUrl:"",sliderSize:0,sliderY:0,sliderLeft:0,blockX:0,blockY:0,scaleRatio:1,sliderText:""}),L=n({originX:0}),S=n({class:"",height:0});function q(){m.value=!0,w.value.style.transform="translate3d(0, 0, 0)",k.value.sliderLeft=0,z.get("/v1/auth/captcha/slide?"+(new Date).getTime()).then((function(e){k.value.hash=e.data.hash,k.value.puzzleUrl=e.data.puzzleUrl,k.value.width=e.data.width,k.value.height=e.data.height,k.value.sliderUrl=e.data.sliderUrl,k.value.sliderSize=e.data.sliderSize,k.value.sliderY=e.data.sliderY,k.value.blockY=k.value.sliderY})).then((function(){if(k.value.sliderText=_("captcha.tip"),S.height=0,S.class="",k.value.sliderLeft=0,w.value&&(w.value.style.left="0"),y.value){var e=y.value.getBoundingClientRect();k.value.scaleRatio=e.width/k.value.width,k.value.sliderY=k.value.sliderY*k.value.scaleRatio,k.value.sliderSize=k.value.sliderSize*k.value.scaleRatio}})).finally((function(){m.value=!1}))}i((function(){T(),q()}));var U=t(!1),C=function(e){var a;U.value=!0,k.value.sliderText="",L.originX=e.pageX||(null===(a=e.touches)||void 0===a||null===(a=a[0])||void 0===a?void 0:a.pageX),w.value.style.willChange="transform",e.preventDefault()},V=function(e){var a;if(U.value){var t=e.pageX||(null===(a=e.touches)||void 0===a||null===(a=a[0])||void 0===a?void 0:a.pageX);if(t){var l=t-L.originX,n=(k.value.width-k.value.sliderSize)*k.value.scaleRatio,i=Math.max(0,Math.min(l,n));w.value.style.transform="translate3d(".concat(i,"px, 0, 0)"),k.value.sliderLeft=i,e.preventDefault()}}},Y=function(){if(U.value){U.value=!1,w.value.style.willChange="auto";var e,a,t=k.value.sliderLeft/k.value.scaleRatio;(e=t,a=k.value.hash,z.get("/v1/auth/captcha/slide/validate",{params:{"slider-x":e,hash:a}})).then((function(e){e.data.result?x("validPass",{hash:k.value.hash,code:e.data.code}):(j.error(_("captcha.validate.fail")),q())}))}},T=function(){document.addEventListener("mousemove",V),document.addEventListener("mouseup",Y),document.addEventListener("touchmove",V,{passive:!1}),document.addEventListener("touchend",Y)};return r((function(){document.removeEventListener("mousemove",V),document.removeEventListener("mouseup",Y),document.removeEventListener("touchmove",V),document.removeEventListener("touchend",Y)})),function(e,a){var t=o("loading");return s((u(),c("div",E,[d("div",{class:"slider-canvas",style:v({width:"".concat(k.value.width,"px"),height:"".concat(k.value.height,"px")}),onClick:q},[d("div",{ref_key:"puzzle",ref:y,class:"puzzle-image",style:v({backgroundImage:"url(".concat(k.value.puzzleUrl,")"),width:"100%",height:"100%",position:"absolute",top:0,left:0,backgroundSize:"cover"})},null,4),d("div",{ref_key:"block",ref:w,class:"slider-block",style:v({backgroundImage:"url(".concat(k.value.sliderUrl,")"),width:k.value.sliderSize+"px",height:k.value.sliderSize+"px",top:k.value.blockY+"px",left:"0px",position:"absolute",backgroundSize:"cover"})},null,4),d("div",{class:p("result-mask ".concat(S.class)),style:v({height:"".concat(S.height,"px")})},null,6)],4),d("div",R,[d("div",X,[d("div",{class:"slider-square-icon",style:v({transform:"translateX(".concat(k.value.sliderLeft,"px)")}),onMousedown:C,onTouchstart:C},null,36),d("span",null,f(k.value.sliderText),1)])])])),[[t,m.value]])}}}),T={class:"login-container"},M=a({__name:"Login",setup:function(e){var a=w(),l=t(),i=t(!1),r=t(!1),o=n({username:"",password:""}),s={username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},v=function(){r.value=!0,l.value.updateSlideCaptcha()},p=function(e){i.value=!0,k(o.username,o.password,e.code,e.hash).then((function(){a.push("/")})).catch((function(e){401===e.status&&(r.value=!1,j.error(_("login.fail")))}))};return function(e,a){return u(),c(y,null,[d("div",T,[h(m(U),{ref:"loginForm",model:o,rules:s,"label-position":"left","label-width":"0px",class:"login-form",onKeyup:x(v,["enter"])},{default:g((function(){return[a[5]||(a[5]=d("div",{class:"logo-container"},[d("h2",{class:"logo-text"},"Jrag")],-1)),h(m(L),{prop:"username"},{default:g((function(){return[h(m(S),{modelValue:o.username,"onUpdate:modelValue":a[0]||(a[0]=function(e){return o.username=e}),placeholder:"用户名"},null,8,["modelValue"])]})),_:1}),h(m(L),{prop:"password"},{default:g((function(){return[h(m(S),{modelValue:o.password,"onUpdate:modelValue":a[1]||(a[1]=function(e){return o.password=e}),type:"password",placeholder:"密码"},null,8,["modelValue"])]})),_:1}),h(m(L),null,{default:g((function(){return[h(m(q),{type:"primary",onClick:v,class:"submit-btn"},{default:g((function(){return a[4]||(a[4]=[b(" 登录 ",-1)])})),_:1,__:[4]})]})),_:1})]})),_:1,__:[5]},8,["model"])]),h(m(C),{modelValue:r.value,"onUpdate:modelValue":a[2]||(a[2]=function(e){return r.value=e}),class:"captcha-dialog","align-center":"",loading:i.value,"show-close":"",onClose:a[3]||(a[3]=function(e){return i.value=!1})},{default:g((function(){return[h(Y,{ref_key:"slideCaptchaRef",ref:l,loading:i.value,onValidPass:p},null,8,["loading"])]})),_:1},8,["modelValue","loading"])],64)}}});e("default",V(M,[["__scopeId","data-v-ebbccee8"]]))}}}))}();
