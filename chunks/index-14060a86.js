import{h as e,t as l}from"../index-42d8866b.js";import{T as a}from"./topoBar-278bdce0.js";import{g as o,p as t}from"./oem-517c1d66.js";import{_ as n}from"./plugin-vue_export-helper-3b0dab4c.js";import{x as s,g as m,c as i,y as d,A as u,B as p,u as r,d as v,f as g,C as c,a as b,i as V}from"./element-plus-82bb4bf2.js";import{d as y,r as A,f,aa as h,o as N,c as U,X as _,U as x,a as B,Q as M,u as K,M as C,a4 as k}from"./@vue-bb747027.js";import"./vue-router-6370cc0f.js";import"./axios-ff411c8f.js";import"./mitt-106818fe.js";import"./lodash-es-99da8f02.js";import"./@popperjs-66964824.js";import"./@vueuse-09ca9f25.js";import"./@element-plus-ccefd8d4.js";import"./async-validator-b6f94fc9.js";import"./@ctrl-d2fe7c9e.js";import"./normalize-wheel-es-233dc293.js";const j={class:"settings-page"},w={class:"settings-content"},S={class:"settings-header"},L={class:"section-title"},P={class:"section-title"},T={class:"section-desc"},E={class:"section-title"},R={class:"section-desc"},$={class:"settings-actions"},q={class:"section-title"},J={class:"section-title"},O={class:"section-desc"},z={class:"section-title"},F={class:"section-desc"},I={class:"settings-actions"};var Q=n(y({__name:"index",setup(n){const y=A("llm"),Q=A(!1),X=A(!1),D=A({provider:"open-ai",useRag:!0,useTools:!0,temperature:0,ollamaModelName:"qwen3:14b-q8_0",ollamaBaseUrl:"http://172.16.8.107:11434",ollamaKeepAliveSeconds:3600,ollamaContextLength:32768,openAiModelName:"qwen-plus",openAiBaseUrl:"https://dashscope.aliyuncs.com",openAiCompletionsPath:"/compatible-mode/v1/chat/completions",openAiKey:"",openAiContextLength:32768}),G=A({provider:"open-ai",ollamaModelName:"nomic-embed-text:latest",ollamaBaseUrl:"http://127.0.0.1:11434",ollamaKeepAliveSeconds:3600,openAiModelName:"text-embedding-v4",openAiBaseUrl:"https://dashscope.aliyuncs.com",openAiEmbeddingsPath:"/compatible-mode/v1/embeddings",openAiKey:""}),H=A(""),W=(e,l=!1)=>null==e?l:"1"===e.trim()||"true"===e.trim().toLowerCase(),Y=(e,l)=>{if(null==e)return l;const a=Number(e);return Number.isFinite(a)?a:l},Z=async()=>{Q.value=!0;try{const l=["llm-provider","llm-use-rag","llm-use-tools","llm-temperature","llm-ollama-model-name","llm-ollama-base-url","llm-ollama-keep-alive-seconds","llm-ollama-context-length","llm-open-ai-model-name","llm-open-ai-base-url","llm-open-ai-completions-path","llm-open-ai-key","llm-open-ai-context-length","embedding-provider","embedding-ollama-model-name","embedding-ollama-base-url","embedding-ollama-keep_alive_seconds","embedding-open-ai-model-name","embedding-open-ai-base-url","embedding-open-ai-embeddings-path","embedding-open-ai-key"],n=(e=>e?.data?.data?e.data.data:e?.data??{})(await(a=l,e.post(`/v1${o}rest/${t}/property/get`,a)));D.value.provider=n["llm-provider"]||D.value.provider,D.value.useRag=W(n["llm-use-rag"],D.value.useRag),D.value.useTools=W(n["llm-use-tools"],D.value.useTools),D.value.temperature=Y(n["llm-temperature"],D.value.temperature),D.value.ollamaModelName=n["llm-ollama-model-name"]||D.value.ollamaModelName,D.value.ollamaBaseUrl=n["llm-ollama-base-url"]||D.value.ollamaBaseUrl,D.value.ollamaKeepAliveSeconds=Y(n["llm-ollama-keep-alive-seconds"],D.value.ollamaKeepAliveSeconds),D.value.ollamaContextLength=Y(n["llm-ollama-context-length"],D.value.ollamaContextLength),D.value.openAiModelName=n["llm-open-ai-model-name"]||D.value.openAiModelName,D.value.openAiBaseUrl=n["llm-open-ai-base-url"]||D.value.openAiBaseUrl,D.value.openAiCompletionsPath=n["llm-open-ai-completions-path"]||D.value.openAiCompletionsPath,D.value.openAiKey=n["llm-open-ai-key"]||D.value.openAiKey,D.value.openAiContextLength=Y(n["llm-open-ai-context-length"],D.value.openAiContextLength),G.value.provider=n["embedding-provider"]||G.value.provider,G.value.ollamaModelName=n["embedding-ollama-model-name"]||G.value.ollamaModelName,G.value.ollamaBaseUrl=n["embedding-ollama-base-url"]||G.value.ollamaBaseUrl,G.value.ollamaKeepAliveSeconds=Y(n["embedding-ollama-keep_alive_seconds"],G.value.ollamaKeepAliveSeconds),G.value.openAiModelName=n["embedding-open-ai-model-name"]||G.value.openAiModelName,G.value.openAiBaseUrl=n["embedding-open-ai-base-url"]||G.value.openAiBaseUrl,G.value.openAiEmbeddingsPath=n["embedding-open-ai-embeddings-path"]||G.value.openAiEmbeddingsPath,G.value.openAiKey=n["embedding-open-ai-key"]||G.value.openAiKey,H.value=JSON.stringify(G.value)}catch(n){b.error(l("settings.load.failed"))}finally{Q.value=!1}var a},ee=async()=>{X.value=!0;try{H.value!==JSON.stringify(G.value)&&await(async()=>{await V.confirm(l("settings.embedding.rebuild.confirm"),l("settings.embedding.rebuild.title"),{confirmButtonText:l("settings.embedding.rebuild.confirm.ok"),cancelButtonText:l("settings.embedding.rebuild.confirm.cancel"),type:"warning"})})(),await(a=(()=>{const e=e=>null==e?"":String(e);return[{propertyName:"llm-provider",propertyValue:e(D.value.provider)},{propertyName:"llm-use-rag",propertyValue:e(D.value.useRag)},{propertyName:"llm-use-tools",propertyValue:e(D.value.useTools)},{propertyName:"llm-temperature",propertyValue:e(D.value.temperature)},{propertyName:"llm-ollama-model-name",propertyValue:e(D.value.ollamaModelName)},{propertyName:"llm-ollama-base-url",propertyValue:e(D.value.ollamaBaseUrl)},{propertyName:"llm-ollama-keep-alive-seconds",propertyValue:e(D.value.ollamaKeepAliveSeconds)},{propertyName:"llm-ollama-context-length",propertyValue:e(D.value.ollamaContextLength)},{propertyName:"llm-open-ai-model-name",propertyValue:e(D.value.openAiModelName)},{propertyName:"llm-open-ai-base-url",propertyValue:e(D.value.openAiBaseUrl)},{propertyName:"llm-open-ai-completions-path",propertyValue:e(D.value.openAiCompletionsPath)},{propertyName:"llm-open-ai-key",propertyValue:e(D.value.openAiKey)},{propertyName:"llm-open-ai-context-length",propertyValue:e(D.value.openAiContextLength)},{propertyName:"embedding-provider",propertyValue:e(G.value.provider)},{propertyName:"embedding-ollama-model-name",propertyValue:e(G.value.ollamaModelName)},{propertyName:"embedding-ollama-base-url",propertyValue:e(G.value.ollamaBaseUrl)},{propertyName:"embedding-ollama-keep_alive_seconds",propertyValue:e(G.value.ollamaKeepAliveSeconds)},{propertyName:"embedding-open-ai-model-name",propertyValue:e(G.value.openAiModelName)},{propertyName:"embedding-open-ai-base-url",propertyValue:e(G.value.openAiBaseUrl)},{propertyName:"embedding-open-ai-embeddings-path",propertyValue:e(G.value.openAiEmbeddingsPath)},{propertyName:"embedding-open-ai-key",propertyValue:e(G.value.openAiKey)}]})(),e.put(`/v1${o}rest/${t}/property`,a)),H.value=JSON.stringify(G.value),b.success(l("settings.save.success"))}catch(n){"cancel"!==n&&b.error(l("settings.save.failed"))}finally{X.value=!1}var a};return f((()=>{Z()})),(e,o)=>{const t=h("loading");return N(),U("div",j,[_(a),x((N(),U("div",w,[B("div",S,[B("h2",null,M(K(l)("settings.title")),1)]),_(K(c),{modelValue:y.value,"onUpdate:modelValue":o[21]||(o[21]=e=>y.value=e),class:"settings-tabs"},{default:C((()=>[_(K(s),{label:K(l)("settings.llm.section"),name:"llm"},{default:C((()=>[_(K(m),{model:D.value,"label-width":"180px"},{default:C((()=>[B("div",L,M(K(l)("settings.basic.section")),1),_(K(i),{label:K(l)("settings.provider")},{default:C((()=>[_(K(d),{modelValue:D.value.provider,"onUpdate:modelValue":o[0]||(o[0]=e=>D.value.provider=e),class:"settings-select"},{default:C((()=>[_(K(u),{label:K(l)("settings.provider.openai"),value:"open-ai"},null,8,["label"]),_(K(u),{label:K(l)("settings.provider.ollama"),value:"ollama"},null,8,["label"])])),_:1},8,["modelValue"])])),_:1},8,["label"]),_(K(i),{label:K(l)("settings.use.rag")},{default:C((()=>[_(K(p),{modelValue:D.value.useRag,"onUpdate:modelValue":o[1]||(o[1]=e=>D.value.useRag=e)},null,8,["modelValue"])])),_:1},8,["label"]),_(K(i),{label:K(l)("settings.use.tools")},{default:C((()=>[_(K(p),{modelValue:D.value.useTools,"onUpdate:modelValue":o[2]||(o[2]=e=>D.value.useTools=e)},null,8,["modelValue"])])),_:1},8,["label"]),_(K(i),{label:K(l)("settings.temperature")},{default:C((()=>[_(K(r),{modelValue:D.value.temperature,"onUpdate:modelValue":o[3]||(o[3]=e=>D.value.temperature=e),min:0,max:2,step:.1},null,8,["modelValue"])])),_:1},8,["label"]),B("div",P,M(K(l)("settings.ollama.section")),1),B("div",T,M(K(l)("settings.ollama.desc")),1),_(K(i),{label:K(l)("settings.model.name")},{default:C((()=>[_(K(v),{modelValue:D.value.ollamaModelName,"onUpdate:modelValue":o[4]||(o[4]=e=>D.value.ollamaModelName=e)},null,8,["modelValue"])])),_:1},8,["label"]),_(K(i),{label:K(l)("settings.base.url")},{default:C((()=>[_(K(v),{modelValue:D.value.ollamaBaseUrl,"onUpdate:modelValue":o[5]||(o[5]=e=>D.value.ollamaBaseUrl=e)},null,8,["modelValue"])])),_:1},8,["label"]),_(K(i),{label:K(l)("settings.keep.alive.seconds")},{default:C((()=>[_(K(r),{modelValue:D.value.ollamaKeepAliveSeconds,"onUpdate:modelValue":o[6]||(o[6]=e=>D.value.ollamaKeepAliveSeconds=e),min:1},null,8,["modelValue"])])),_:1},8,["label"]),_(K(i),{label:K(l)("settings.context.length")},{default:C((()=>[_(K(r),{modelValue:D.value.ollamaContextLength,"onUpdate:modelValue":o[7]||(o[7]=e=>D.value.ollamaContextLength=e),min:1},null,8,["modelValue"])])),_:1},8,["label"]),B("div",E,M(K(l)("settings.openai.section")),1),B("div",R,M(K(l)("settings.openai.desc")),1),_(K(i),{label:K(l)("settings.model.name")},{default:C((()=>[_(K(v),{modelValue:D.value.openAiModelName,"onUpdate:modelValue":o[8]||(o[8]=e=>D.value.openAiModelName=e)},null,8,["modelValue"])])),_:1},8,["label"]),_(K(i),{label:K(l)("settings.base.url")},{default:C((()=>[_(K(v),{modelValue:D.value.openAiBaseUrl,"onUpdate:modelValue":o[9]||(o[9]=e=>D.value.openAiBaseUrl=e)},null,8,["modelValue"])])),_:1},8,["label"]),_(K(i),{label:K(l)("settings.completions.path")},{default:C((()=>[_(K(v),{modelValue:D.value.openAiCompletionsPath,"onUpdate:modelValue":o[10]||(o[10]=e=>D.value.openAiCompletionsPath=e)},null,8,["modelValue"])])),_:1},8,["label"]),_(K(i),{label:K(l)("settings.api.key")},{default:C((()=>[_(K(v),{modelValue:D.value.openAiKey,"onUpdate:modelValue":o[11]||(o[11]=e=>D.value.openAiKey=e),type:"password","show-password":""},null,8,["modelValue"])])),_:1},8,["label"]),_(K(i),{label:K(l)("settings.context.length")},{default:C((()=>[_(K(r),{modelValue:D.value.openAiContextLength,"onUpdate:modelValue":o[12]||(o[12]=e=>D.value.openAiContextLength=e),min:1},null,8,["modelValue"])])),_:1},8,["label"])])),_:1},8,["model"]),B("div",$,[_(K(g),{type:"primary",loading:X.value,onClick:ee},{default:C((()=>[k(M(K(l)("settings.save")),1)])),_:1},8,["loading"])])])),_:1},8,["label"]),_(K(s),{label:K(l)("settings.embedding.section"),name:"embedding"},{default:C((()=>[_(K(m),{model:G.value,"label-width":"180px"},{default:C((()=>[B("div",q,M(K(l)("settings.basic.section")),1),_(K(i),{label:K(l)("settings.provider")},{default:C((()=>[_(K(d),{modelValue:G.value.provider,"onUpdate:modelValue":o[13]||(o[13]=e=>G.value.provider=e),class:"settings-select"},{default:C((()=>[_(K(u),{label:K(l)("settings.provider.openai"),value:"open-ai"},null,8,["label"]),_(K(u),{label:K(l)("settings.provider.ollama"),value:"ollama"},null,8,["label"])])),_:1},8,["modelValue"])])),_:1},8,["label"]),B("div",J,M(K(l)("settings.ollama.section")),1),B("div",O,M(K(l)("settings.ollama.desc")),1),_(K(i),{label:K(l)("settings.model.name")},{default:C((()=>[_(K(v),{modelValue:G.value.ollamaModelName,"onUpdate:modelValue":o[14]||(o[14]=e=>G.value.ollamaModelName=e)},null,8,["modelValue"])])),_:1},8,["label"]),_(K(i),{label:K(l)("settings.base.url")},{default:C((()=>[_(K(v),{modelValue:G.value.ollamaBaseUrl,"onUpdate:modelValue":o[15]||(o[15]=e=>G.value.ollamaBaseUrl=e)},null,8,["modelValue"])])),_:1},8,["label"]),_(K(i),{label:K(l)("settings.keep.alive.seconds")},{default:C((()=>[_(K(r),{modelValue:G.value.ollamaKeepAliveSeconds,"onUpdate:modelValue":o[16]||(o[16]=e=>G.value.ollamaKeepAliveSeconds=e),min:1},null,8,["modelValue"])])),_:1},8,["label"]),B("div",z,M(K(l)("settings.openai.section")),1),B("div",F,M(K(l)("settings.openai.desc")),1),_(K(i),{label:K(l)("settings.model.name")},{default:C((()=>[_(K(v),{modelValue:G.value.openAiModelName,"onUpdate:modelValue":o[17]||(o[17]=e=>G.value.openAiModelName=e)},null,8,["modelValue"])])),_:1},8,["label"]),_(K(i),{label:K(l)("settings.base.url")},{default:C((()=>[_(K(v),{modelValue:G.value.openAiBaseUrl,"onUpdate:modelValue":o[18]||(o[18]=e=>G.value.openAiBaseUrl=e)},null,8,["modelValue"])])),_:1},8,["label"]),_(K(i),{label:K(l)("settings.embeddings.path")},{default:C((()=>[_(K(v),{modelValue:G.value.openAiEmbeddingsPath,"onUpdate:modelValue":o[19]||(o[19]=e=>G.value.openAiEmbeddingsPath=e)},null,8,["modelValue"])])),_:1},8,["label"]),_(K(i),{label:K(l)("settings.api.key")},{default:C((()=>[_(K(v),{modelValue:G.value.openAiKey,"onUpdate:modelValue":o[20]||(o[20]=e=>G.value.openAiKey=e),type:"password","show-password":""},null,8,["modelValue"])])),_:1},8,["label"])])),_:1},8,["model"]),B("div",I,[_(K(g),{type:"primary",loading:X.value,onClick:ee},{default:C((()=>[k(M(K(l)("settings.save")),1)])),_:1},8,["loading"])])])),_:1},8,["label"])])),_:1},8,["modelValue"])])),[[t,Q.value]])])}}}),[["__scopeId","data-v-63ab6e6d"]]);export{Q as default};
