import{t as e,h as a}from"../index-ed01918a.js";import{_ as l}from"./plugin-vue_export-helper-3b0dab4c.js";import{c as s,u as t,x as o,y as i,A as r,d as u,g as n,f as d}from"./element-plus-d2b1cdd3.js";import{d as p,F as g,j as m,o as v,c,Q as b,u as h,J as f,X as _,M as y,a as V,a4 as w}from"./@vue-bb747027.js";import{g as x,p as M}from"./oem-517c1d66.js";const $={key:0,class:"section-title"},j={class:"rag-weight-slider"},B={class:"rag-weight-values"},I={class:"settings-actions"};var S=l(p({__name:"RagSettingsPanel",props:{form:{},saving:{type:Boolean},showTitle:{type:Boolean,default:!1}},emits:["save"],setup(a,{emit:l}){const p=a,x=l,M=g(p,"form"),S=g(p,"saving"),E=m({get:()=>Math.round(100*M.value.denseWeight),set:e=>{const a=Math.min(100,Math.max(0,e));M.value.denseWeight=a/100,M.value.sparseWeight=(100-a)/100}}),T=a=>{const l=Math.min(100,Math.max(0,Math.round(a))),s=100-l;return`${e("settings.rag.weight.dense")}: ${l}% / ${e("settings.rag.weight.sparse")}: ${s}%`};return(l,p)=>(v(),c("div",null,[a.showTitle?(v(),c("div",$,b(h(e)("settings.rag.section")),1)):f("",!0),_(h(n),{model:M.value,"label-width":"220px"},{default:y((()=>[_(h(s),{label:h(e)("settings.rag.topk")},{default:y((()=>[_(h(t),{modelValue:M.value.topK,"onUpdate:modelValue":p[0]||(p[0]=e=>M.value.topK=e),min:1},null,8,["modelValue"])])),_:1},8,["label"]),_(h(s),{label:h(e)("settings.rag.metric.type.dense")},{default:y((()=>[_(h(o),{modelValue:M.value.metricType,"onUpdate:modelValue":p[1]||(p[1]=e=>M.value.metricType=e),class:"settings-select"},{default:y((()=>[_(h(i),{label:"COSINE",value:"COSINE"}),_(h(i),{label:"IP",value:"IP"}),_(h(i),{label:"L2",value:"L2"})])),_:1},8,["modelValue"])])),_:1},8,["label"]),_(h(s),{label:h(e)("settings.rag.metric.type.sparse")},{default:y((()=>[_(h(o),{"model-value":"BM25",class:"settings-select",disabled:""},{default:y((()=>[_(h(i),{label:"BM25",value:"BM25"})])),_:1})])),_:1},8,["label"]),_(h(s),{label:h(e)("settings.rag.weight.label")},{default:y((()=>[V("div",j,[_(h(r),{modelValue:E.value,"onUpdate:modelValue":p[2]||(p[2]=e=>E.value=e),min:0,max:100,"show-tooltip":!0,"format-tooltip":T},null,8,["modelValue"]),V("div",B,[V("span",null,b(h(e)("settings.rag.weight.dense"))+": "+b(E.value)+"%",1),V("span",null,b(h(e)("settings.rag.weight.sparse"))+": "+b(100-E.value)+"%",1)])])])),_:1},8,["label"]),_(h(s),{label:h(e)("settings.rag.metric.score.expr")},{default:y((()=>[_(h(u),{modelValue:M.value.metricScoreExpr,"onUpdate:modelValue":p[3]||(p[3]=e=>M.value.metricScoreExpr=e)},null,8,["modelValue"])])),_:1},8,["label"])])),_:1},8,["model"]),V("div",I,[_(h(d),{type:"primary",loading:S.value,onClick:p[4]||(p[4]=e=>x("save"))},{default:y((()=>[w(b(h(e)("settings.save")),1)])),_:1},8,["loading"])])]))}}),[["__scopeId","data-v-3f4db90e"]]);const E=e=>a.post(`/v1${x}rest/${M}/property/get`,e),T=e=>a.put(`/v1${x}rest/${M}/property`,e);export{S as R,E as g,T as p};
