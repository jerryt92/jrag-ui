!function(){function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,a){if(e){if("string"==typeof e)return t(e,a);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t(e,a):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=Array(t);a<t;a++)n[a]=e[a];return n}function a(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function l(a,r,o,i){var l=r&&r.prototype instanceof s?r:s,c=Object.create(l.prototype);return n(c,"_invoke",function(a,n,r){var o,i,l,s=0,c=r||[],d=!1,f={p:0,n:0,v:e,a:v,f:v.bind(e,4),d:function(t,a){return o=t,i=0,l=e,f.n=a,u}};function v(a,n){for(i=a,l=n,t=0;!d&&s&&!r&&t<c.length;t++){var r,o=c[t],v=f.p,p=o[2];a>3?(r=p===n)&&(l=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=v&&((r=a<2&&v<o[1])?(i=0,f.v=n,f.n=o[1]):v<p&&(r=a<3||o[0]>n||n>p)&&(o[4]=a,o[5]=n,f.n=p,i=0))}if(r||a>1)return u;throw d=!0,n}return function(r,c,p){if(s>1)throw TypeError("Generator is already running");for(d&&1===c&&v(c,p),i=c,l=p;(t=i<2?e:l)||!d;){o||(i?i<3?(i>1&&(f.n=-1),v(i,l)):f.n=l:f.v=l);try{if(s=2,o){if(i||(r="next"),t=o[r]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(l=TypeError("The iterator does not provide a '"+r+"' method"),i=1);o=e}else if((t=(d=f.n<0)?l:a.call(n,f))!==u)break}catch(t){o=e,i=1,l=t}finally{s=1}}return{value:t,done:d}}}(a,o,i),!0),c}var u={};function s(){}function c(){}function d(){}t=Object.getPrototypeOf;var f=[][o]?t(t([][o]())):(n(t={},o,(function(){return this})),t),v=d.prototype=s.prototype=Object.create(f);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,n(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e}return c.prototype=d,n(v,"constructor",d),n(d,"constructor",c),c.displayName="GeneratorFunction",n(d,i,"GeneratorFunction"),n(v),n(v,i,"Generator"),n(v,o,(function(){return this})),n(v,"toString",(function(){return"[object Generator]"})),(a=function(){return{w:l,m:p}})()}function n(e,t,a,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}n=function(e,t,a,r){function i(t,a){n(e,t,(function(e){return this._invoke(t,a,e)}))}t?o?o(e,t,{value:a,enumerable:!r,configurable:!r,writable:!r}):e[t]=a:(i("next",0),i("throw",1),i("return",2))},n(e,t,a,r)}function r(e,t,a,n,r,o,i){try{var l=e[o](i),u=l.value}catch(e){return void a(e)}l.done?t(u):Promise.resolve(u).then(n,r)}function o(e){return function(){var t=this,a=arguments;return new Promise((function(n,o){var i=e.apply(t,a);function l(e){r(i,n,o,l,u,"next",e)}function u(e){r(i,n,o,l,u,"throw",e)}l(void 0)}))}}var i=document.createElement("style");i.innerHTML=".slider-container{position:relative;display:inline-block;flex-direction:column;justify-content:center;height:auto;margin:0 auto;padding:16px;border-radius:var(--n-radius-triple);background:#fff;box-shadow:0 2px 8px rgba(0,0,0,.1)}.slider-container .slider-canvas{position:relative;background-color:transparent;margin-bottom:16px}.slider-container .slider-canvas .puzzle-image{border-radius:4px}.slider-container .slider-canvas .slider-block{z-index:2;border-radius:4px;will-change:transform;backface-visibility:hidden;transform:translateZ(0)}@keyframes result-show{0%{opacity:0}to{opacity:.7}}.slider-container .result-mask{position:absolute;left:0;bottom:0;width:100%;opacity:.7}.slider-container .result-mask.success{background-color:#52ccba;animation:result-show 1s}.slider-container .result-mask.fail{background-color:#f57a7a;animation:result-show 1s}.slider-square{background-color:#f7f9fa;height:36px;text-align:center;line-height:36px;border:2px solid rgba(221,221,221,.17);position:relative;border-radius:4px;z-index:10}.slider-square .box{padding:0 16px;display:flex;align-items:center;justify-content:center;position:relative;height:100%}.slider-square .box span{flex:1;text-align:center;color:#666;font-size:14px}.slider-square .slider-square-icon{position:absolute;top:0;left:0;height:35px;width:35px;background-color:color-mix(in srgb,var(--el-color-primary),transparent 10%);cursor:pointer;z-index:11;user-select:none;will-change:transform;border:none;border-radius:var(--n-radius-double)}.slider-square .slider-square-icon:hover,.slider-square .slider-square-icon:active{background-color:var(--el-color-primary);box-shadow:0 0 10px var(--el-color-primary)}.login-container[data-v-330f95b9]{display:flex;justify-content:center;align-items:center;height:100vh}.login-container .login-form[data-v-330f95b9]{width:380px;padding:20px;background-color:rgba(255,255,255,.2);backdrop-filter:blur(12px);border-radius:8px;box-shadow:0 2px 8px rgba(0,0,0,.1);transition:transform .2s ease}.login-container .login-form[data-v-330f95b9]:hover{transform:scale(1.02)}.login-container .logo-container[data-v-330f95b9]{text-align:center;margin-bottom:20px}.login-container .logo-text[data-v-330f95b9]{font-size:var(--n-font-size-4);font-weight:700;color:var(--el-color-primary);margin:0}.login-container .title[data-v-330f95b9]{margin-bottom:20px;text-align:center}.login-container .submit-btn[data-v-330f95b9]{width:100%}.login-container .submit-btn[data-v-330f95b9]:hover{transform:scale(1.01)}.login-container .el-dialog{background:color-mix(in srgb,var(--n-color-neutral-w),transparent 90%)}.login-container .captcha-dialog{min-width:auto;width:auto;padding:25px}\n",document.head.appendChild(i),System.register(["./@vue-legacy-799a045e.js","./vue-router-legacy-e9561e30.js","../index-legacy-ebe55ddc.js","./axios-legacy-ec40b469.js","./element-plus-legacy-89569ebe.js","./plugin-vue_export-helper-legacy-1285489a.js","./mitt-legacy-e809dc6d.js","./lodash-es-legacy-d6cd1adf.js","./@popperjs-legacy-3f90cf56.js","./@vueuse-legacy-98dafae0.js","./@element-plus-legacy-931e6d36.js","./async-validator-legacy-9f2b928b.js","./@ctrl-legacy-93ea6807.js","./normalize-wheel-es-legacy-2498f61f.js"],(function(t){"use strict";var n,r,i,l,u,s,c,d,f,v,p,h,g,m,b,y,x,w,k,z,j,S,_,L,T,q,E,U,C,O,V,X,P,R;return{setters:[function(e){n=e.d,r=e.r,i=e.w,l=e.Y,u=e.f,s=e.a3,c=e.aa,d=e.U,f=e.o,v=e.c,p=e.a,h=e.R,g=e.L,m=e.Q,b=e.X,y=e.M,x=e.u,w=e.a4,k=e.al},function(e){z=e.d},function(e){j=e.t,S=e.g,_=e.p,L=e.l,T=e.a,q=e.s},function(e){E=e.a},function(e){U=e.a,C=e.c,O=e.d,V=e.f,X=e.g,P=e.h},function(e){R=e._},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){}],execute:function(){var Y={class:"slider-container"},A={class:"slider-square"},G={class:"box"},I=n({__name:"SlipCaptcha",props:{loading:{type:Boolean,default:!1}},emits:["validPass"],setup:function(e,t){var a=t.expose,n=t.emit,o=r(!1),b=e;i((function(){return b.loading}),(function(e){o.value=e}));var y=n;a({updateSlideCaptcha:T});var x=r(null),w=r(null),k=r({hash:"",puzzleUrl:"",width:300,height:225,sliderUrl:"",sliderSize:0,sliderY:0,sliderLeft:0,blockX:0,blockY:0,scaleRatio:1,sliderText:""}),z=l({originX:0}),L=l({class:"",height:0});function T(){o.value=!0,w.value.style.transform="translate3d(0, 0, 0)",k.value.sliderLeft=0,E.get("/v1".concat(S,"auth/").concat(_,"/captcha/slide?")+(new Date).getTime()).then((function(e){k.value.hash=e.data.hash,k.value.puzzleUrl=e.data.puzzleUrl,k.value.width=e.data.width,k.value.height=e.data.height,k.value.sliderUrl=e.data.sliderUrl,k.value.sliderSize=e.data.sliderSize,k.value.blockY=e.data.sliderY})).then((function(){k.value.sliderText=j("captcha.tip"),L.height=0,L.class="",k.value.sliderLeft=0,w.value&&(w.value.style.left="0"),x.value&&(k.value.scaleRatio=300/k.value.width,k.value.width=k.value.width*k.value.scaleRatio,k.value.height=k.value.height*k.value.scaleRatio,k.value.blockY=k.value.blockY*k.value.scaleRatio,k.value.sliderSize=k.value.sliderSize*k.value.scaleRatio)})).finally((function(){o.value=!1}))}u((function(){X(),T()}));var q=r(!1),C=function(e){var t;q.value=!0,k.value.sliderText="",z.originX=e.pageX||(null===(t=e.touches)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.pageX),w.value.style.willChange="transform",e.preventDefault()},O=function(e){var t;if(q.value){var a=e.pageX||(null===(t=e.touches)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.pageX);if(a){var n=a-z.originX,r=k.value.width-k.value.sliderSize,o=Math.max(0,Math.min(n,r));w.value.style.transform="translate3d(".concat(o,"px, 0, 0)"),k.value.sliderLeft=o,e.preventDefault()}}},V=function(){if(q.value){q.value=!1,w.value.style.willChange="auto";var e,t,a=k.value.sliderLeft/k.value.scaleRatio;(e=a,t=k.value.hash,E.get("/v1".concat(S,"auth/").concat(_,"/captcha/slide/validate"),{params:{"slider-x":e,hash:t}})).then((function(e){e.data.result?y("validPass",{hash:k.value.hash,code:e.data.code}):(U.error(j("captcha.validate.fail")),T())}))}},X=function(){document.addEventListener("mousemove",O),document.addEventListener("mouseup",V),document.addEventListener("touchmove",O,{passive:!1}),document.addEventListener("touchend",V)};return s((function(){document.removeEventListener("mousemove",O),document.removeEventListener("mouseup",V),document.removeEventListener("touchmove",O),document.removeEventListener("touchend",V)})),function(e,t){var a=c("loading");return d((f(),v("div",Y,[p("div",{class:"slider-canvas",style:h({width:"".concat(k.value.width,"px"),height:"".concat(k.value.height,"px")}),onClick:T},[p("div",{ref_key:"puzzle",ref:x,class:"puzzle-image",style:h({backgroundImage:"url(".concat(k.value.puzzleUrl,")"),width:"100%",height:"100%",position:"absolute",top:0,left:0,backgroundSize:"cover"})},null,4),p("div",{ref_key:"block",ref:w,class:"slider-block",style:h({backgroundImage:"url(".concat(k.value.sliderUrl,")"),width:k.value.sliderSize+"px",height:k.value.sliderSize+"px",top:k.value.blockY+"px",left:"0px",position:"absolute",backgroundSize:"cover"})},null,4),p("div",{class:g("result-mask ".concat(L.class)),style:h({height:"".concat(L.height,"px")})},null,6)],4),p("div",A,[p("div",G,[p("div",{class:"slider-square-icon",style:h({transform:"translateX(".concat(k.value.sliderLeft,"px)")}),onMousedown:C,onTouchstart:C},null,36),p("span",null,m(k.value.sliderText),1)])])])),[[a,o.value]])}}}),M={class:"login-container"},F={class:"logo-container"},D={class:"logo-text"},B=n({__name:"Login",setup:function(t){var n=z(),i=r(),u=r(!1),s=r(!1),c=l({username:"",password:""}),d={username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},h=function(){s.value=!0,i.value.updateSlideCaptcha()},g=function(e){u.value=!0,L(c.username,c.password,e.code,e.hash).then(o(a().m((function e(){var t;return a().w((function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,T();case 1:t=e.v,q(t.data),t.data.role>1?n.push("/chat/assistant"):n.push("/"),e.n=3;break;case 2:e.p=2,e.v,q(null),n.push("/");case 3:return e.a(2)}}),e,null,[[0,2]])})))).catch((function(e){401===e.status&&(s.value=!1,U.error(j("login.fail")))}))};return function(t,a){return f(),v("div",M,[b(x(X),{ref:"loginForm",model:c,rules:d,"label-position":"left","label-width":"0px",class:"login-form",onKeyup:k(h,["enter"])},{default:y((function(){return[p("div",F,[p("h2",D,m(x(j)("ai.center.title")),1)]),b(x(C),{prop:"username"},{default:y((function(){return[b(x(O),{modelValue:c.username,"onUpdate:modelValue":a[0]||(a[0]=function(e){return c.username=e}),placeholder:"用户名"},null,8,["modelValue"])]})),_:1}),b(x(C),{prop:"password"},{default:y((function(){return[b(x(O),{modelValue:c.password,"onUpdate:modelValue":a[1]||(a[1]=function(e){return c.password=e}),type:"password",placeholder:"密码"},null,8,["modelValue"])]})),_:1}),b(x(C),null,{default:y((function(){return[b(x(V),{type:"primary",onClick:h,class:"submit-btn"},{default:y((function(){return e(a[4]||(a[4]=[w(" 登录 ",-1)]))})),_:1})]})),_:1})]})),_:1},8,["model"]),b(x(P),{modelValue:s.value,"onUpdate:modelValue":a[2]||(a[2]=function(e){return s.value=e}),class:"captcha-dialog","align-center":"",loading:u.value,"show-close":"",onClose:a[3]||(a[3]=function(e){return u.value=!1}),draggable:""},{default:y((function(){return[b(I,{ref_key:"slideCaptchaRef",ref:i,loading:u.value,onValidPass:g},null,8,["loading"])]})),_:1},8,["modelValue","loading"])])}}});t("default",R(B,[["__scopeId","data-v-330f95b9"]]))}}}))}();
