import{d as e,r as a,o as l,c as t,a as s,R as n,aj as r,O as i,F as o}from"./@vue-2527e674.js";import{h as p}from"../index-e58d08c8.js";import{_ as u}from"./plugin-vue_export-helper-3b0dab4c.js";import{g as d}from"./element-plus-c1d4f178.js";import"./vue-router-f6a6a654.js";import"./axios-ff411c8f.js";import"./mitt-106818fe.js";import"./lodash-es-0d8c957d.js";import"./@popperjs-19b81b33.js";import"./@vueuse-4568576e.js";import"./@element-plus-f2588365.js";import"./async-validator-b6f94fc9.js";import"./@ctrl-d2fe7c9e.js";const f={class:"uploader-container"},v={key:0,class:"file-info"},c={key:1,class:"error-message"},m=["disabled"];var j=u(e({__name:"FileUploader",setup(e){const u=a(null),j=a(),b=a("未选择文件"),g=a(""),h=a(""),y=e=>{const a=e.target;if(a.files&&a.files.length>0){const e=a.files[0];_(e)}},D=e=>{if(e.preventDefault(),e.dataTransfer&&e.dataTransfer.files.length>0){const a=e.dataTransfer.files[0];_(a)}},x=e=>{e.preventDefault()},_=e=>{u.value=e,b.value=e.name,g.value=`${(e.size/1024).toFixed(2)} KB`,h.value=""},F=async()=>{u.value&&(h.value="",j.value?((e,a)=>{const l=new FormData;return l.append("id",e.toString()),l.append("file",a),p.put("/private/ai-center/file",l)})(j.value,u.value).then((e=>{d.info("文件上传成功")})):(e=>{const a=new FormData;return a.append("file",e),p.post("/private/ai-center/file",a)})(u.value).then((e=>{d.info("文件上传成功")})))};return(e,a)=>(l(),t("div",f,[s("div",{class:"drop-zone",onDragover:x,onDrop:D},[a[1]||(a[1]=s("p",null,"将文件拖拽至此区域上传",-1)),a[2]||(a[2]=s("p",{class:"file-info"},"或",-1)),s("input",{type:"file",accept:"image/*",onChange:y},null,32)],32),s("p",null,[n(s("input",{type:"number",style:{width:"200px"},"onUpdate:modelValue":a[0]||(a[0]=e=>j.value=e),placeholder:"输入文件ID则表示覆盖文件",min:"1"},null,512),[[r,j.value]])]),u.value?(l(),t("div",v,[s("p",null,"文件名："+i(b.value),1),s("p",null,"大小："+i(g.value),1)])):o("",!0),h.value?(l(),t("div",c,i(h.value),1)):o("",!0),s("button",{class:"submit-button",disabled:!u.value,onClick:F}," 提交上传 ",8,m)]))}}),[["__scopeId","data-v-dc8d5580"]]);export{j as default};
