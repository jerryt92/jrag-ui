import{d as e,r as a,o as l,c as s,a as t,H as n,L as r,R as o,aj as i,O as u,F as p}from"./@vue-b6573999.js";import{h as c}from"../index-c404bb6b.js";import{M as d}from"./menuCard-ba0ddd1b.js";import{_ as f}from"./plugin-vue_export-helper-3b0dab4c.js";import{b as v}from"./element-plus-0defecf4.js";import"./vue-router-e68aa853.js";import"./axios-ff411c8f.js";import"./mitt-106818fe.js";import"./lodash-es-0d8c957d.js";import"./@vueuse-f9ccc613.js";import"./@popperjs-19b81b33.js";import"./@element-plus-142e0c99.js";import"./async-validator-b6f94fc9.js";import"./@ctrl-d2fe7c9e.js";const m={class:"uploader-container"},b={class:"top-bar"},h={class:"menu-button-box"},j={key:0,class:"file-info"},g={key:1,class:"error-message"},x=["disabled"];var y=f(e({__name:"FileUploader",setup(e){const f=a(null),y=a(),w=a("未选择文件"),k=a(""),C=a(""),D=a(null),_=a(!1),F=()=>{D.value.show()},I=e=>{const a=e.target;if(a.files&&a.files.length>0){const e=a.files[0];B(e)}},T=e=>{if(e.preventDefault(),e.dataTransfer&&e.dataTransfer.files.length>0){const a=e.dataTransfer.files[0];B(a)}},z=e=>{e.preventDefault()},B=e=>{f.value=e,w.value=e.name,k.value=`${(e.size/1024).toFixed(2)} KB`,C.value=""},R=async()=>{f.value&&(C.value="",y.value?((e,a)=>{const l=new FormData;return l.append("id",e.toString()),l.append("file",a),c.put("/private/ai-center/file",l)})(y.value,f.value).then((e=>{v.info("文件上传成功")})):(e=>{const a=new FormData;return a.append("file",e),c.post("/private/ai-center/file",a)})(f.value).then((e=>{v.info("文件上传成功")})))};return(e,a)=>(l(),s("div",m,[t("div",b,[a[3]||(a[3]=t("h3",null,"🤖 Jrag AI",-1)),t("div",h,[t("span",{class:n(["menu-button",{active:_.value}]),onClick:F},a[2]||(a[2]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-menu"},[t("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),t("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),t("line",{x1:"3",y1:"18",x2:"21",y2:"18"})],-1)]),2)])]),r(d,{ref_key:"menuCardRef",ref:D,class:"menu-card",onShowChange:a[0]||(a[0]=e=>_.value=e)},null,512),t("div",{class:"drop-zone",onDragover:z,onDrop:T},[a[4]||(a[4]=t("p",null,"将文件拖拽至此区域上传",-1)),a[5]||(a[5]=t("p",{class:"file-info"},"或",-1)),t("input",{type:"file",accept:"image/*",onChange:I},null,32)],32),t("p",null,[o(t("input",{type:"number",style:{width:"200px"},"onUpdate:modelValue":a[1]||(a[1]=e=>y.value=e),placeholder:"输入文件ID则表示覆盖文件",min:"1"},null,512),[[i,y.value]])]),f.value?(l(),s("div",j,[t("p",null,"文件名："+u(w.value),1),t("p",null,"大小："+u(k.value),1)])):p("",!0),C.value?(l(),s("div",g,u(C.value),1)):p("",!0),t("button",{class:"submit-button",disabled:!f.value,onClick:R}," 提交上传 ",8,x)]))}}),[["__scopeId","data-v-9a3c6c08"]]);export{y as default};
