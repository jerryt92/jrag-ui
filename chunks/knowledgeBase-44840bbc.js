import{M as e}from"./menuCard-9a7d478c.js";import{h as a,t as l}from"../index-ba126a1a.js";import{_ as t}from"./plugin-vue_export-helper-3b0dab4c.js";import{p as r,q as s,r as o,s as n}from"./element-plus-8bb2754a.js";import{d as u,r as i,f as d,ae as p,o as v,c,a as f,H as m,L as b,R as g,I as h,J as w,u as k,O as j,G as x,af as y}from"./@vue-b09eb706.js";import"./vue-router-d9611c02.js";import"./axios-ff411c8f.js";import"./mitt-106818fe.js";import"./lodash-es-ca13b026.js";import"./@vueuse-413f935c.js";import"./@element-plus-5f995288.js";import"./async-validator-b6f94fc9.js";import"./@popperjs-19b81b33.js";import"./normalize-wheel-es-233dc293.js";import"./@ctrl-d2fe7c9e.js";const _={class:"uploader-container"},C={class:"top-bar"},z={class:"menu-button-box"},I={class:"text-chunk-preview"},M={class:"text-chunk-full"},P={class:"outline-preview"},S={class:"outline-full"};var B=t(u({__name:"knowledgeBase",setup(t){const u=i(null),B=i(!1),J=i([]),N=i(!1),R=i(1),U=i(10),q=i(0),A=()=>{u.value.show()},G=async()=>{N.value=!0;try{const t=(await(e=(R.value-1)*U.value,l=U.value+1,a.get("/v1/rest/jrag/knowledge",{params:{offset:e,limit:l}}))).data?.data||[];t.length>U.value?(J.value=t.slice(0,U.value),q.value=(R.value+1)*U.value):(J.value=t,q.value=(R.value-1)*U.value+t.length)}catch(t){J.value=[],q.value=0}finally{N.value=!1}var e,l},H=e=>{U.value=e,G()},L=e=>{R.value=e,G()};return d((()=>{G()})),(a,t)=>{const i=p("loading");return v(),c("div",_,[f("div",C,[t[4]||(t[4]=f("h3",null,"ðŸ¤– Jrag AI",-1)),f("div",z,[f("span",{class:m(["menu-button",{active:B.value}]),onClick:A},t[3]||(t[3]=[f("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-menu"},[f("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),f("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),f("line",{x1:"3",y1:"18",x2:"21",y2:"18"})],-1)]),2)])]),b(e,{ref_key:"menuCardRef",ref:u,class:"menu-card",onShowChange:t[0]||(t[0]=e=>B.value=e)},null,512),g((v(),h(k(o),{data:J.value,style:{width:"100%"}},{default:w((()=>[b(k(r),{prop:"fileName",label:k(l)("kb.fileName")},null,8,["label"]),b(k(r),{prop:"description",label:k(l)("kb.description")},null,8,["label"]),b(k(r),{prop:"embeddingModel",label:k(l)("kb.embeddingModel")},null,8,["label"]),b(k(r),{prop:"embeddingProvider",label:k(l)("kb.embeddingProvider")},null,8,["label"]),b(k(r),{label:k(l)("kb.textChunk"),width:"300"},{default:w((e=>[b(k(s),{effect:"dark",trigger:"hover",placement:"top",width:"400"},{reference:w((()=>[f("div",I,j(e.row.textChunk),1)])),default:w((()=>[f("div",M,j(e.row.textChunk),1)])),_:2},1024)])),_:1},8,["label"]),b(k(r),{label:k(l)("kb.outline"),width:"300"},{default:w((e=>[b(k(s),{effect:"dark",trigger:"hover",placement:"top",width:"400"},{reference:w((()=>[f("div",P,j(e.row.outline?.join(", ")),1)])),default:w((()=>[f("div",S,[(v(!0),c(x,null,y(e.row.outline,((e,a)=>(v(),c("div",{key:a},j(e),1)))),128))])])),_:2},1024)])),_:1},8,["label"])])),_:1},8,["data"])),[[i,N.value]]),b(k(n),{"current-page":R.value,"onUpdate:currentPage":t[1]||(t[1]=e=>R.value=e),"page-size":U.value,"onUpdate:pageSize":t[2]||(t[2]=e=>U.value=e),"page-sizes":[10,20,50,100],total:q.value,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:H,onCurrentChange:L},null,8,["current-page","page-size","total"])])}}}),[["__scopeId","data-v-f6308f62"]]);export{B as default};
