import{t as e,k as l,m as a}from"../index-69bd6b9a.js";import{T as o}from"./topoBar-617f185f.js";import{_ as t}from"./plugin-vue_export-helper-3b0dab4c.js";import{c as s,y as n,A as u,d as m,v as d,g as r,f as i,C as p,p as v,r as c,h as g,a as b,i as y,D as V,F as f}from"./element-plus-06bb7c4a.js";import{d as _,F as E,o as h,c as A,X as w,M as N,a as R,Q as U,u as T,a4 as C,K as k,r as K,j as I,f as S,aa as x,U as M,A as P,ab as B,n as W}from"./@vue-bb747027.js";import{R as j,g as L,p as O}from"./RagSettingsPanel-3f4599de.js";import{g as G,c as H,d as q,u as D,a as z}from"./user.api-8e96725a.js";import"./vue-router-6370cc0f.js";import"./axios-ff411c8f.js";import"./mitt-106818fe.js";import"./lodash-es-7a4ab7c3.js";import"./@popperjs-66964824.js";import"./@vueuse-09ca9f25.js";import"./@element-plus-ccefd8d4.js";import"./async-validator-b6f94fc9.js";import"./@ctrl-d2fe7c9e.js";import"./normalize-wheel-es-233dc293.js";const F={class:"section-title"},X={class:"section-title"},J={class:"section-desc"},Y={class:"section-title"},$={class:"section-desc"},Q={class:"settings-actions"};var Z=t(_({__name:"EmbeddingSettingsPanel",props:{form:{},saving:{type:Boolean}},emits:["save"],setup(l,{emit:a}){const o=l,t=a,p=E(o,"form"),v=E(o,"saving");return(l,a)=>(h(),A(k,null,[w(T(r),{model:p.value,"label-width":"180px"},{default:N((()=>[R("div",F,U(T(e)("settings.basic.section")),1),w(T(s),{label:T(e)("settings.provider")},{default:N((()=>[w(T(n),{modelValue:p.value.provider,"onUpdate:modelValue":a[0]||(a[0]=e=>p.value.provider=e),class:"settings-select"},{default:N((()=>[w(T(u),{label:T(e)("settings.provider.openai"),value:"open-ai"},null,8,["label"]),w(T(u),{label:T(e)("settings.provider.ollama"),value:"ollama"},null,8,["label"])])),_:1},8,["modelValue"])])),_:1},8,["label"]),R("div",X,U(T(e)("settings.ollama.section")),1),R("div",J,U(T(e)("settings.ollama.desc")),1),w(T(s),{label:T(e)("settings.model.name")},{default:N((()=>[w(T(m),{modelValue:p.value.ollamaModelName,"onUpdate:modelValue":a[1]||(a[1]=e=>p.value.ollamaModelName=e)},null,8,["modelValue"])])),_:1},8,["label"]),w(T(s),{label:T(e)("settings.base.url")},{default:N((()=>[w(T(m),{modelValue:p.value.ollamaBaseUrl,"onUpdate:modelValue":a[2]||(a[2]=e=>p.value.ollamaBaseUrl=e)},null,8,["modelValue"])])),_:1},8,["label"]),w(T(s),{label:T(e)("settings.ollama.api.key")},{default:N((()=>[w(T(m),{modelValue:p.value.ollamaKey,"onUpdate:modelValue":a[3]||(a[3]=e=>p.value.ollamaKey=e),type:"password","show-password":""},null,8,["modelValue"])])),_:1},8,["label"]),w(T(s),{label:T(e)("settings.keep.alive.seconds")},{default:N((()=>[w(T(d),{modelValue:p.value.ollamaKeepAliveSeconds,"onUpdate:modelValue":a[4]||(a[4]=e=>p.value.ollamaKeepAliveSeconds=e),min:1},null,8,["modelValue"])])),_:1},8,["label"]),R("div",Y,U(T(e)("settings.openai.section")),1),R("div",$,U(T(e)("settings.openai.desc")),1),w(T(s),{label:T(e)("settings.model.name")},{default:N((()=>[w(T(m),{modelValue:p.value.openAiModelName,"onUpdate:modelValue":a[5]||(a[5]=e=>p.value.openAiModelName=e)},null,8,["modelValue"])])),_:1},8,["label"]),w(T(s),{label:T(e)("settings.base.url")},{default:N((()=>[w(T(m),{modelValue:p.value.openAiBaseUrl,"onUpdate:modelValue":a[6]||(a[6]=e=>p.value.openAiBaseUrl=e)},null,8,["modelValue"])])),_:1},8,["label"]),w(T(s),{label:T(e)("settings.embeddings.path")},{default:N((()=>[w(T(m),{modelValue:p.value.openAiEmbeddingsPath,"onUpdate:modelValue":a[7]||(a[7]=e=>p.value.openAiEmbeddingsPath=e)},null,8,["modelValue"])])),_:1},8,["label"]),w(T(s),{label:T(e)("settings.api.key")},{default:N((()=>[w(T(m),{modelValue:p.value.openAiKey,"onUpdate:modelValue":a[8]||(a[8]=e=>p.value.openAiKey=e),type:"password","show-password":""},null,8,["modelValue"])])),_:1},8,["label"])])),_:1},8,["model"]),R("div",Q,[w(T(i),{type:"primary",loading:v.value,onClick:a[9]||(a[9]=e=>t("save"))},{default:N((()=>[C(U(T(e)("settings.save")),1)])),_:1},8,["loading"])])],64))}}),[["__scopeId","data-v-e34c669c"]]);const ee={class:"section-title"},le={class:"section-title"},ae={class:"section-desc"},oe={class:"section-title"},te={class:"section-desc"},se={class:"settings-actions"};var ne=t(_({__name:"LlmSettingsPanel",props:{form:{},saving:{type:Boolean}},emits:["save"],setup(l,{emit:a}){const o=l,t=a,v=E(o,"form"),c=E(o,"saving");return(l,a)=>(h(),A(k,null,[w(T(r),{model:v.value,"label-width":"180px"},{default:N((()=>[R("div",ee,U(T(e)("settings.basic.section")),1),w(T(s),{label:T(e)("settings.provider")},{default:N((()=>[w(T(n),{modelValue:v.value.provider,"onUpdate:modelValue":a[0]||(a[0]=e=>v.value.provider=e),class:"settings-select"},{default:N((()=>[w(T(u),{label:T(e)("settings.provider.openai"),value:"open-ai"},null,8,["label"]),w(T(u),{label:T(e)("settings.provider.ollama"),value:"ollama"},null,8,["label"])])),_:1},8,["modelValue"])])),_:1},8,["label"]),w(T(s),{label:T(e)("settings.use.rag")},{default:N((()=>[w(T(p),{modelValue:v.value.useRag,"onUpdate:modelValue":a[1]||(a[1]=e=>v.value.useRag=e)},null,8,["modelValue"])])),_:1},8,["label"]),w(T(s),{label:T(e)("settings.use.tools")},{default:N((()=>[w(T(p),{modelValue:v.value.useTools,"onUpdate:modelValue":a[2]||(a[2]=e=>v.value.useTools=e)},null,8,["modelValue"])])),_:1},8,["label"]),w(T(s),{label:T(e)("settings.temperature")},{default:N((()=>[w(T(d),{modelValue:v.value.temperature,"onUpdate:modelValue":a[3]||(a[3]=e=>v.value.temperature=e),min:0,max:2,step:.1},null,8,["modelValue"])])),_:1},8,["label"]),R("div",le,U(T(e)("settings.ollama.section")),1),R("div",ae,U(T(e)("settings.ollama.desc")),1),w(T(s),{label:T(e)("settings.model.name")},{default:N((()=>[w(T(m),{modelValue:v.value.ollamaModelName,"onUpdate:modelValue":a[4]||(a[4]=e=>v.value.ollamaModelName=e)},null,8,["modelValue"])])),_:1},8,["label"]),w(T(s),{label:T(e)("settings.base.url")},{default:N((()=>[w(T(m),{modelValue:v.value.ollamaBaseUrl,"onUpdate:modelValue":a[5]||(a[5]=e=>v.value.ollamaBaseUrl=e)},null,8,["modelValue"])])),_:1},8,["label"]),w(T(s),{label:T(e)("settings.ollama.api.key")},{default:N((()=>[w(T(m),{modelValue:v.value.ollamaKey,"onUpdate:modelValue":a[6]||(a[6]=e=>v.value.ollamaKey=e),type:"password","show-password":""},null,8,["modelValue"])])),_:1},8,["label"]),w(T(s),{label:T(e)("settings.keep.alive.seconds")},{default:N((()=>[w(T(d),{modelValue:v.value.ollamaKeepAliveSeconds,"onUpdate:modelValue":a[7]||(a[7]=e=>v.value.ollamaKeepAliveSeconds=e),min:1},null,8,["modelValue"])])),_:1},8,["label"]),w(T(s),{label:T(e)("settings.context.length")},{default:N((()=>[w(T(d),{modelValue:v.value.ollamaContextLength,"onUpdate:modelValue":a[8]||(a[8]=e=>v.value.ollamaContextLength=e),min:1},null,8,["modelValue"])])),_:1},8,["label"]),R("div",oe,U(T(e)("settings.openai.section")),1),R("div",te,U(T(e)("settings.openai.desc")),1),w(T(s),{label:T(e)("settings.model.name")},{default:N((()=>[w(T(m),{modelValue:v.value.openAiModelName,"onUpdate:modelValue":a[9]||(a[9]=e=>v.value.openAiModelName=e)},null,8,["modelValue"])])),_:1},8,["label"]),w(T(s),{label:T(e)("settings.base.url")},{default:N((()=>[w(T(m),{modelValue:v.value.openAiBaseUrl,"onUpdate:modelValue":a[10]||(a[10]=e=>v.value.openAiBaseUrl=e)},null,8,["modelValue"])])),_:1},8,["label"]),w(T(s),{label:T(e)("settings.completions.path")},{default:N((()=>[w(T(m),{modelValue:v.value.openAiCompletionsPath,"onUpdate:modelValue":a[11]||(a[11]=e=>v.value.openAiCompletionsPath=e)},null,8,["modelValue"])])),_:1},8,["label"]),w(T(s),{label:T(e)("settings.api.key")},{default:N((()=>[w(T(m),{modelValue:v.value.openAiKey,"onUpdate:modelValue":a[12]||(a[12]=e=>v.value.openAiKey=e),type:"password","show-password":""},null,8,["modelValue"])])),_:1},8,["label"]),w(T(s),{label:T(e)("settings.context.length")},{default:N((()=>[w(T(d),{modelValue:v.value.openAiContextLength,"onUpdate:modelValue":a[13]||(a[13]=e=>v.value.openAiContextLength=e),min:1},null,8,["modelValue"])])),_:1},8,["label"])])),_:1},8,["model"]),R("div",se,[w(T(i),{type:"primary",loading:c.value,onClick:a[14]||(a[14]=e=>t("save"))},{default:N((()=>[C(U(T(e)("settings.save")),1)])),_:1},8,["loading"])])],64))}}),[["__scopeId","data-v-6deac535"]]);const ue={class:"user-management"},me={class:"user-management-header"},de={key:1,class:"role-label"};var re=t(_({__name:"UserManagementPanel",setup(o){const t=K([]),d=K(!1),p=K(!1),V=K(!1),f=K(!1),_=K(null),E=K({username:"",password:"",role:2}),j=K({password:""}),L=I((()=>{const l=[{value:2,label:e("user.management.role.user")}];return O.value&&l.unshift({value:1,label:e("user.management.role.admin")}),l})),O=I((()=>l())),F=e=>{if(O.value)return"admin"!==e.username;return 1===a().role&&e.role>=2&&"admin"!==e.username},X=e=>"admin"===e.username||!F(e),J=async()=>{d.value=!0;try{const e=await G();t.value=e.data?.data??[]}catch(l){b.error(e("user.management.load.failed"))}finally{d.value=!1}},Y=()=>{E.value={username:"",password:"",role:2},V.value=!0,W((()=>{E.value.username="",E.value.password=""}))},$=async()=>{if(E.value.username&&E.value.password){p.value=!0;try{await H({username:E.value.username,password:E.value.password,role:E.value.role}),b.success(e("common.success")),V.value=!1,await J()}catch(l){b.error(e("user.management.create.failed"))}finally{p.value=!1}}else b.error(e("common.input.required"))},Q=async()=>{if(_.value)if(j.value.password){p.value=!0;try{await z({userId:_.value.userId,newPassword:j.value.password}),b.success(e("common.success")),f.value=!1}catch(l){b.error(e("user.management.password.update.failed"))}finally{p.value=!1}}else b.error(e("common.input.required"))};return S((()=>{J()})),(l,a)=>{const o=x("loading");return h(),A("div",ue,[R("div",me,[w(T(i),{type:"primary",onClick:Y},{default:N((()=>[C(U(T(e)("user.management.create")),1)])),_:1}),w(T(i),{onClick:J},{default:N((()=>[C(U(T(e)("common.refresh")),1)])),_:1})]),M((h(),P(T(c),{data:t.value,stripe:""},{default:N((()=>[w(T(v),{prop:"username",label:T(e)("user.management.username")},null,8,["label"]),w(T(v),{prop:"role",label:T(e)("user.management.role")},{default:N((({row:l})=>{return[F(l)?(h(),P(T(n),{key:0,modelValue:l.role,"onUpdate:modelValue":e=>l.role=e,size:"small",onChange:()=>(async l=>{try{await D({userId:l.userId,role:l.role}),b.success(e("common.success"))}catch(a){b.error(e("user.management.role.update.failed")),await J()}})(l)},{default:N((()=>[(h(!0),A(k,null,B(L.value,(e=>(h(),P(T(u),{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onUpdate:modelValue","onChange"])):(h(),A("span",de,U((a=l.role,e(1===a?"user.management.role.admin":"user.management.role.user"))),1))];var a})),_:1},8,["label"]),w(T(v),{label:T(e)("common.action"),width:"240"},{default:N((({row:l})=>{return[w(T(i),{size:"small",onClick:e=>{return a=l,_.value=a,j.value.password="",void(f.value=!0);var a},disabled:(a=l,!F(a))},{default:N((()=>[C(U(T(e)("user.management.reset.password")),1)])),_:1},8,["onClick","disabled"]),w(T(i),{size:"small",type:"danger",disabled:X(l),onClick:a=>(async l=>{try{await y.confirm(`${e("user.management.delete.confirm")} ${l.username}`,e("common.delete"),{confirmButtonText:e("common.ok"),cancelButtonText:e("common.cancel"),type:"warning"}),await q(l.userId),b.success(e("common.success")),await J()}catch(a){"cancel"!==a&&b.error(e("user.management.delete.failed"))}})(l)},{default:N((()=>[C(U(T(e)("common.delete")),1)])),_:1},8,["disabled","onClick"])];var a})),_:1},8,["label"])])),_:1},8,["data"])),[[o,d.value]]),w(T(g),{modelValue:V.value,"onUpdate:modelValue":a[4]||(a[4]=e=>V.value=e),title:T(e)("user.management.create")},{footer:N((()=>[w(T(i),{onClick:a[3]||(a[3]=e=>V.value=!1)},{default:N((()=>[C(U(T(e)("common.cancel")),1)])),_:1}),w(T(i),{type:"primary",loading:p.value,onClick:$},{default:N((()=>[C(U(T(e)("common.ok")),1)])),_:1},8,["loading"])])),default:N((()=>[w(T(r),{model:E.value,"label-width":"90px",autocomplete:"off"},{default:N((()=>[w(T(s),{label:T(e)("user.management.username")},{default:N((()=>[w(T(m),{modelValue:E.value.username,"onUpdate:modelValue":a[0]||(a[0]=e=>E.value.username=e),autocomplete:"off"},null,8,["modelValue"])])),_:1},8,["label"]),w(T(s),{label:T(e)("user.management.password")},{default:N((()=>[w(T(m),{modelValue:E.value.password,"onUpdate:modelValue":a[1]||(a[1]=e=>E.value.password=e),type:"password",autocomplete:"new-password","show-password":""},null,8,["modelValue"])])),_:1},8,["label"]),w(T(s),{label:T(e)("user.management.role")},{default:N((()=>[w(T(n),{modelValue:E.value.role,"onUpdate:modelValue":a[2]||(a[2]=e=>E.value.role=e),disabled:!O.value},{default:N((()=>[(h(!0),A(k,null,B(L.value,(e=>(h(),P(T(u),{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue","disabled"])])),_:1},8,["label"])])),_:1},8,["model"])])),_:1},8,["modelValue","title"]),w(T(g),{modelValue:f.value,"onUpdate:modelValue":a[7]||(a[7]=e=>f.value=e),title:T(e)("user.management.reset.password")},{footer:N((()=>[w(T(i),{onClick:a[6]||(a[6]=e=>f.value=!1)},{default:N((()=>[C(U(T(e)("common.cancel")),1)])),_:1}),w(T(i),{type:"primary",loading:p.value,onClick:Q},{default:N((()=>[C(U(T(e)("common.ok")),1)])),_:1},8,["loading"])])),default:N((()=>[w(T(r),{model:j.value,"label-width":"90px",autocomplete:"off"},{default:N((()=>[w(T(s),{label:T(e)("user.management.password")},{default:N((()=>[w(T(m),{modelValue:j.value.password,"onUpdate:modelValue":a[5]||(a[5]=e=>j.value.password=e),type:"password",autocomplete:"new-password","show-password":""},null,8,["modelValue"])])),_:1},8,["label"])])),_:1},8,["model"])])),_:1},8,["modelValue","title"])])}}}),[["__scopeId","data-v-7380c573"]]);const ie={class:"settings-page"},pe={class:"settings-content"},ve={class:"settings-header"};var ce=t(_({__name:"index",setup(l){const a=K("llm"),t=K(!1),s=K(!1),n=K({provider:"open-ai",useRag:!0,useTools:!0,temperature:0,ollamaModelName:"qwen3:14b-q8_0",ollamaBaseUrl:"http://172.16.8.107:11434",ollamaKeepAliveSeconds:3600,ollamaContextLength:32768,ollamaKey:"",openAiModelName:"qwen-plus",openAiBaseUrl:"https://dashscope.aliyuncs.com",openAiCompletionsPath:"/compatible-mode/v1/chat/completions",openAiKey:"",openAiContextLength:32768}),u=K({provider:"open-ai",ollamaModelName:"nomic-embed-text:latest",ollamaBaseUrl:"http://127.0.0.1:11434",ollamaKeepAliveSeconds:3600,ollamaKey:"",openAiModelName:"text-embedding-v4",openAiBaseUrl:"https://dashscope.aliyuncs.com",openAiEmbeddingsPath:"/compatible-mode/v1/embeddings",openAiKey:""}),m=K(""),d=K({topK:5,metricType:"COSINE",metricScoreExpr:"> 0.7",denseWeight:.5,sparseWeight:.5}),r=(e,l=!1)=>null==e?l:"1"===e.trim()||"true"===e.trim().toLowerCase(),i=(e,l)=>{if(null==e)return l;const a=Number(e);return Number.isFinite(a)?a:l},p=()=>{const e=d.value.denseWeight,l=d.value.sparseWeight,a=e+l;if(!Number.isFinite(a)||a<=0)return d.value.denseWeight=.5,void(d.value.sparseWeight=.5);d.value.denseWeight=e/a,d.value.sparseWeight=l/a},v=async()=>{s.value=!0;try{m.value!==JSON.stringify(u.value)&&await(async()=>{await y.confirm(e("settings.embedding.rebuild.confirm"),e("settings.embedding.rebuild.title"),{confirmButtonText:e("settings.embedding.rebuild.confirm.ok"),cancelButtonText:e("settings.embedding.rebuild.confirm.cancel"),type:"warning"})})(),await O((()=>{p();const e=e=>null==e?"":String(e);return[{propertyName:"llm-provider",propertyValue:e(n.value.provider)},{propertyName:"llm-use-rag",propertyValue:e(n.value.useRag)},{propertyName:"llm-use-tools",propertyValue:e(n.value.useTools)},{propertyName:"llm-temperature",propertyValue:e(n.value.temperature)},{propertyName:"llm-ollama-model-name",propertyValue:e(n.value.ollamaModelName)},{propertyName:"llm-ollama-base-url",propertyValue:e(n.value.ollamaBaseUrl)},{propertyName:"llm-ollama-keep-alive-seconds",propertyValue:e(n.value.ollamaKeepAliveSeconds)},{propertyName:"llm-ollama-context-length",propertyValue:e(n.value.ollamaContextLength)},{propertyName:"llm-ollama-key",propertyValue:e(n.value.ollamaKey)},{propertyName:"llm-open-ai-model-name",propertyValue:e(n.value.openAiModelName)},{propertyName:"llm-open-ai-base-url",propertyValue:e(n.value.openAiBaseUrl)},{propertyName:"llm-open-ai-completions-path",propertyValue:e(n.value.openAiCompletionsPath)},{propertyName:"llm-open-ai-key",propertyValue:e(n.value.openAiKey)},{propertyName:"llm-open-ai-context-length",propertyValue:e(n.value.openAiContextLength)},{propertyName:"embedding-provider",propertyValue:e(u.value.provider)},{propertyName:"embedding-ollama-model-name",propertyValue:e(u.value.ollamaModelName)},{propertyName:"embedding-ollama-base-url",propertyValue:e(u.value.ollamaBaseUrl)},{propertyName:"embedding-ollama-keep_alive_seconds",propertyValue:e(u.value.ollamaKeepAliveSeconds)},{propertyName:"embedding-ollama-key",propertyValue:e(u.value.ollamaKey)},{propertyName:"embedding-open-ai-model-name",propertyValue:e(u.value.openAiModelName)},{propertyName:"embedding-open-ai-base-url",propertyValue:e(u.value.openAiBaseUrl)},{propertyName:"embedding-open-ai-embeddings-path",propertyValue:e(u.value.openAiEmbeddingsPath)},{propertyName:"embedding-open-ai-key",propertyValue:e(u.value.openAiKey)},{propertyName:"RETRIEVE_TOP_K",propertyValue:e(d.value.topK)},{propertyName:"RETRIEVE_METRIC_TYPE",propertyValue:e(d.value.metricType)},{propertyName:"RETRIEVE_METRIC_SCORE_COMPARE_EXPR",propertyValue:e(d.value.metricScoreExpr)},{propertyName:"RETRIEVE_DENSE_WEIGHT",propertyValue:e(d.value.denseWeight)},{propertyName:"RETRIEVE_SPARSE_WEIGHT",propertyValue:e(d.value.sparseWeight)}]})()),m.value=JSON.stringify(u.value),b.success(e("settings.save.success"))}catch(l){"cancel"!==l&&b.error(e("settings.save.failed"))}finally{s.value=!1}};return S((()=>{(async()=>{t.value=!0;try{const e=["llm-provider","llm-use-rag","llm-use-tools","llm-temperature","llm-ollama-model-name","llm-ollama-base-url","llm-ollama-keep-alive-seconds","llm-ollama-context-length","llm-ollama-key","llm-open-ai-model-name","llm-open-ai-base-url","llm-open-ai-completions-path","llm-open-ai-key","llm-open-ai-context-length","embedding-provider","embedding-ollama-model-name","embedding-ollama-base-url","embedding-ollama-keep_alive_seconds","embedding-ollama-key","embedding-open-ai-model-name","embedding-open-ai-base-url","embedding-open-ai-embeddings-path","embedding-open-ai-key","RETRIEVE_TOP_K","RETRIEVE_METRIC_TYPE","RETRIEVE_METRIC_SCORE_COMPARE_EXPR","RETRIEVE_DENSE_WEIGHT","RETRIEVE_SPARSE_WEIGHT"],a=(l=await L(e))?.data?.data?l.data.data:l?.data??{};n.value.provider=a["llm-provider"]||n.value.provider,n.value.useRag=r(a["llm-use-rag"],n.value.useRag),n.value.useTools=r(a["llm-use-tools"],n.value.useTools),n.value.temperature=i(a["llm-temperature"],n.value.temperature),n.value.ollamaModelName=a["llm-ollama-model-name"]||n.value.ollamaModelName,n.value.ollamaBaseUrl=a["llm-ollama-base-url"]||n.value.ollamaBaseUrl,n.value.ollamaKeepAliveSeconds=i(a["llm-ollama-keep-alive-seconds"],n.value.ollamaKeepAliveSeconds),n.value.ollamaContextLength=i(a["llm-ollama-context-length"],n.value.ollamaContextLength),n.value.ollamaKey=a["llm-ollama-key"]||n.value.ollamaKey,n.value.openAiModelName=a["llm-open-ai-model-name"]||n.value.openAiModelName,n.value.openAiBaseUrl=a["llm-open-ai-base-url"]||n.value.openAiBaseUrl,n.value.openAiCompletionsPath=a["llm-open-ai-completions-path"]||n.value.openAiCompletionsPath,n.value.openAiKey=a["llm-open-ai-key"]||n.value.openAiKey,n.value.openAiContextLength=i(a["llm-open-ai-context-length"],n.value.openAiContextLength),u.value.provider=a["embedding-provider"]||u.value.provider,u.value.ollamaModelName=a["embedding-ollama-model-name"]||u.value.ollamaModelName,u.value.ollamaBaseUrl=a["embedding-ollama-base-url"]||u.value.ollamaBaseUrl,u.value.ollamaKeepAliveSeconds=i(a["embedding-ollama-keep_alive_seconds"],u.value.ollamaKeepAliveSeconds),u.value.ollamaKey=a["embedding-ollama-key"]||u.value.ollamaKey,u.value.openAiModelName=a["embedding-open-ai-model-name"]||u.value.openAiModelName,u.value.openAiBaseUrl=a["embedding-open-ai-base-url"]||u.value.openAiBaseUrl,u.value.openAiEmbeddingsPath=a["embedding-open-ai-embeddings-path"]||u.value.openAiEmbeddingsPath,u.value.openAiKey=a["embedding-open-ai-key"]||u.value.openAiKey,m.value=JSON.stringify(u.value),d.value.topK=i("RETRIEVE_TOP_K"in a?a.RETRIEVE_TOP_K:void 0,d.value.topK),d.value.metricType=a.RETRIEVE_METRIC_TYPE||d.value.metricType,d.value.metricScoreExpr=a.RETRIEVE_METRIC_SCORE_COMPARE_EXPR||d.value.metricScoreExpr,d.value.denseWeight=i("RETRIEVE_DENSE_WEIGHT"in a?a.RETRIEVE_DENSE_WEIGHT:void 0,d.value.denseWeight),d.value.sparseWeight=i("RETRIEVE_SPARSE_WEIGHT"in a?a.RETRIEVE_SPARSE_WEIGHT:void 0,d.value.sparseWeight),p()}catch(a){b.error(e("settings.load.failed"))}finally{t.value=!1}var l})()})),(l,m)=>{const r=x("loading");return h(),A("div",ie,[w(o),M((h(),A("div",pe,[R("div",ve,[R("h2",null,U(T(e)("settings.title")),1)]),w(T(f),{modelValue:a.value,"onUpdate:modelValue":m[0]||(m[0]=e=>a.value=e),class:"settings-tabs"},{default:N((()=>[w(T(V),{label:T(e)("settings.llm.section"),name:"llm"},{default:N((()=>[w(ne,{form:n.value,saving:s.value,onSave:v},null,8,["form","saving"])])),_:1},8,["label"]),w(T(V),{label:T(e)("settings.embedding.section"),name:"embedding"},{default:N((()=>[w(Z,{form:u.value,saving:s.value,onSave:v},null,8,["form","saving"])])),_:1},8,["label"]),w(T(V),{label:T(e)("settings.rag.section"),name:"rag"},{default:N((()=>[w(j,{form:d.value,saving:s.value,onSave:v},null,8,["form","saving"])])),_:1},8,["label"]),w(T(V),{label:T(e)("user.management.title"),name:"user"},{default:N((()=>[w(re)])),_:1},8,["label"])])),_:1},8,["modelValue"])])),[[r,t.value]])])}}}),[["__scopeId","data-v-a7afdd26"]]);export{ce as default};
