import{M as e}from"./menuCard-b32e7b10.js";import{h as a,t as l}from"../index-1be2c002.js";import{_ as t}from"./plugin-vue_export-helper-3b0dab4c.js";import{p as r,q as s,r as o,s as n}from"./element-plus-2fe69178.js";import{d as u,r as i,f as d,ae as p,o as v,c,a as m,H as f,S as b,Q as h,I as g,J as w,u as k,M as j,G as x,af as y}from"./@vue-215071e0.js";import"./vue-router-aac73014.js";import"./axios-ff411c8f.js";import"./mitt-106818fe.js";import"./lodash-es-ca13b026.js";import"./@vueuse-3587b3f7.js";import"./@element-plus-c2689db4.js";import"./async-validator-b6f94fc9.js";import"./@popperjs-19b81b33.js";import"./normalize-wheel-es-233dc293.js";import"./@ctrl-d2fe7c9e.js";const _={class:"uploader-container"},C={class:"top-bar"},z={class:"menu-button-box"},M={class:"text-chunk-preview"},S={class:"text-chunk-full"},P={class:"outline-preview"},B={class:"outline-full"};var I=t(u({__name:"knowledgeBase",setup(t){const u=i(null),I=i(!1),N=i([]),U=i(!1),q=i(1),G=i(10),H=i(0),J=()=>{u.value.show()},Q=async()=>{U.value=!0;try{const t=(await(e=(q.value-1)*G.value,l=G.value+1,a.get("/v1/rest/jrag/knowledge",{params:{offset:e,limit:l}}))).data?.data||[];t.length>G.value?(N.value=t.slice(0,G.value),H.value=(q.value+1)*G.value):(N.value=t,H.value=(q.value-1)*G.value+t.length)}catch(t){N.value=[],H.value=0}finally{U.value=!1}var e,l},R=e=>{G.value=e,Q()},A=e=>{q.value=e,Q()};return d((()=>{Q()})),(a,t)=>{const i=p("loading");return v(),c("div",_,[m("div",C,[t[4]||(t[4]=m("h3",null,"🤖 数据通信百科助手",-1)),m("div",z,[m("span",{class:f(["menu-button",{active:I.value}]),onClick:J},[...t[3]||(t[3]=[m("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-menu"},[m("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),m("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),m("line",{x1:"3",y1:"18",x2:"21",y2:"18"})],-1)])],2)])]),b(e,{ref_key:"menuCardRef",ref:u,class:"menu-card",onShowChange:t[0]||(t[0]=e=>I.value=e)},null,512),h((v(),g(k(o),{data:N.value,style:{width:"100%"}},{default:w((()=>[b(k(r),{prop:"fileName",label:k(l)("kb.fileName")},null,8,["label"]),b(k(r),{prop:"description",label:k(l)("kb.description")},null,8,["label"]),b(k(r),{prop:"embeddingModel",label:k(l)("kb.embeddingModel")},null,8,["label"]),b(k(r),{prop:"embeddingProvider",label:k(l)("kb.embeddingProvider")},null,8,["label"]),b(k(r),{label:k(l)("kb.textChunk"),width:"300"},{default:w((e=>[b(k(s),{effect:"dark",trigger:"hover",placement:"top",width:"400"},{reference:w((()=>[m("div",M,j(e.row.textChunk),1)])),default:w((()=>[m("div",S,j(e.row.textChunk),1)])),_:2},1024)])),_:1},8,["label"]),b(k(r),{label:k(l)("kb.outline"),width:"300"},{default:w((e=>[b(k(s),{effect:"dark",trigger:"hover",placement:"top",width:"400"},{reference:w((()=>[m("div",P,j(e.row.outline?.join(", ")),1)])),default:w((()=>[m("div",B,[(v(!0),c(x,null,y(e.row.outline,((e,a)=>(v(),c("div",{key:a},j(e),1)))),128))])])),_:2},1024)])),_:1},8,["label"])])),_:1},8,["data"])),[[i,U.value]]),b(k(n),{"current-page":q.value,"onUpdate:currentPage":t[1]||(t[1]=e=>q.value=e),"page-size":G.value,"onUpdate:pageSize":t[2]||(t[2]=e=>G.value=e),"page-sizes":[10,20,50,100],total:H.value,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:R,onCurrentChange:A},null,8,["current-page","page-size","total"])])}}}),[["__scopeId","data-v-6601e9d9"]]);export{I as default};
