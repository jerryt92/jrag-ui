import{t as e,e as a,g as l,p as s}from"../index-b5aeebb0.js";import{_ as t}from"./plugin-vue_export-helper-3b0dab4c.js";import{c as o,u as i,x as u,y as n,A as r,d,g,f as p}from"./element-plus-310660e5.js";import{d as m,F as v,j as c,o as b,c as h,Q as f,u as _,J as y,X as V,M as w,a as x,a4 as M}from"./@vue-bb747027.js";const $={key:0,class:"section-title"},j={class:"rag-weight-slider"},B={class:"rag-weight-values"},I={class:"settings-actions"};var S=t(m({__name:"RagSettingsPanel",props:{form:{},saving:{type:Boolean},showTitle:{type:Boolean,default:!1}},emits:["save"],setup(a,{emit:l}){const s=a,t=l,m=v(s,"form"),S=v(s,"saving"),E=c({get:()=>Math.round(100*m.value.denseWeight),set:e=>{const a=Math.min(100,Math.max(0,e));m.value.denseWeight=a/100,m.value.sparseWeight=(100-a)/100}}),T=a=>{const l=Math.min(100,Math.max(0,Math.round(a))),s=100-l;return`${e("settings.rag.weight.dense")}: ${l}% / ${e("settings.rag.weight.sparse")}: ${s}%`};return(l,s)=>(b(),h("div",null,[a.showTitle?(b(),h("div",$,f(_(e)("settings.rag.section")),1)):y("",!0),V(_(g),{model:m.value,"label-width":"220px"},{default:w((()=>[V(_(o),{label:_(e)("settings.rag.topk")},{default:w((()=>[V(_(i),{modelValue:m.value.topK,"onUpdate:modelValue":s[0]||(s[0]=e=>m.value.topK=e),min:1},null,8,["modelValue"])])),_:1},8,["label"]),V(_(o),{label:_(e)("settings.rag.metric.type.dense")},{default:w((()=>[V(_(u),{modelValue:m.value.metricType,"onUpdate:modelValue":s[1]||(s[1]=e=>m.value.metricType=e),class:"settings-select"},{default:w((()=>[V(_(n),{label:"COSINE",value:"COSINE"}),V(_(n),{label:"IP",value:"IP"}),V(_(n),{label:"L2",value:"L2"})])),_:1},8,["modelValue"])])),_:1},8,["label"]),V(_(o),{label:_(e)("settings.rag.metric.type.sparse")},{default:w((()=>[V(_(u),{"model-value":"BM25",class:"settings-select",disabled:""},{default:w((()=>[V(_(n),{label:"BM25",value:"BM25"})])),_:1})])),_:1},8,["label"]),V(_(o),{label:_(e)("settings.rag.weight.label")},{default:w((()=>[x("div",j,[V(_(r),{modelValue:E.value,"onUpdate:modelValue":s[2]||(s[2]=e=>E.value=e),min:0,max:100,"show-tooltip":!0,"format-tooltip":T},null,8,["modelValue"]),x("div",B,[x("span",null,f(_(e)("settings.rag.weight.dense"))+": "+f(E.value)+"%",1),x("span",null,f(_(e)("settings.rag.weight.sparse"))+": "+f(100-E.value)+"%",1)])])])),_:1},8,["label"]),V(_(o),{label:_(e)("settings.rag.metric.score.expr")},{default:w((()=>[V(_(d),{modelValue:m.value.metricScoreExpr,"onUpdate:modelValue":s[3]||(s[3]=e=>m.value.metricScoreExpr=e)},null,8,["modelValue"])])),_:1},8,["label"])])),_:1},8,["model"]),x("div",I,[V(_(p),{type:"primary",loading:S.value,onClick:s[4]||(s[4]=e=>t("save"))},{default:w((()=>[M(f(_(e)("settings.save")),1)])),_:1},8,["loading"])])]))}}),[["__scopeId","data-v-3f4db90e"]]);const E=e=>a.post(`/v1${l}rest/${s}/property/get`,e),T=e=>a.put(`/v1${l}rest/${s}/property`,e);export{S as R,E as g,T as p};
