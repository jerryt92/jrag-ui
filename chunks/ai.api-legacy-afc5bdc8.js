System.register(["./sse.js-legacy-c6427e4c.js","../index-legacy-a2ba0622.js"],(function(t){"use strict";var e,r,n;return{setters:[function(t){e=t.S},function(t){r=t.h,n=t.l}],execute:function(){var a="chatContext";t("s",(function(t){if("public"===n){for(var e={historyContextItem:{contextId:t.contextId,title:"",lastUpdateTime:Date.now()},chatContextDto:t},r=0;r<t.messages.length;r++){var o=t.messages[r];if("user"===o.role){e.historyContextItem.title=o.content.length>64?o.content.substring(0,64):o.content;break}}var s=localStorage.getItem(a),i=s?JSON.parse(s):{};i[t.contextId]=e,localStorage.setItem(a,JSON.stringify(i))}return Promise.resolve()})),t("a",(function(t){return new e("/v1/rest/jrag/chat",{headers:{"Content-Type":"application/json"},method:"POST",payload:JSON.stringify(t)})})),t("c",(function(){return r.get("/v1/rest/jrag/api/check")})),t("e",(function(){return r.get("/v1/rest/jrag/context/id")})),t("g",(function(t,e){if("public"===n){var o=localStorage.getItem(a),s=o?JSON.parse(o):{},i={data:Object.values(s).map((function(t){return t.historyContextItem}))};return Promise.resolve({data:i})}return r.get("/v1/rest/jrag/context/list",{params:{offset:t,limit:e}})})),t("f",(function(t){if("public"===n){var e,o=localStorage.getItem(a),s=o?JSON.parse(o):{};return Promise.resolve({data:null===(e=s[t])||void 0===e?void 0:e.chatContextDto})}return r.get("/v1/rest/jrag/context",{params:{"context-id":t}})})),t("h",(function(t){return"user"===n?r.post("/v1/rest/jrag/context/message/feedback",t):Promise.resolve()})),t("d",(function(t){if("public"===n){var e=localStorage.getItem(a),o=e?JSON.parse(e):{};return Array.isArray(t)?t.forEach((function(t){delete o[t]})):delete o[t],localStorage.setItem(a,JSON.stringify(o)),Promise.resolve()}return r.delete("/v1/rest/jrag/context",{params:{"context-id":Array.isArray(t)?t.join(","):t}})})),t("b",(function(t){return r.get("/v1/rest/jrag/qa-template",{params:{limit:t}})})),t("o",(function(t){return new WebSocket(window.location.origin.replace("http","ws")+"/ws/jrag/chat/alive?context-id="+t)}))}}}));
