!function(){function e(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var l,n,t="function"==typeof Symbol?Symbol:{},o=t.iterator||"@@iterator",r=t.toStringTag||"@@toStringTag";function u(e,t,o,r){var u=t&&t.prototype instanceof s?t:s,d=Object.create(u.prototype);return a(d,"_invoke",function(e,a,t){var o,r,u,s=0,d=t||[],c=!1,m={p:0,n:0,v:l,a:p,f:p.bind(l,4),d:function(e,a){return o=e,r=0,u=l,m.n=a,i}};function p(e,a){for(r=e,u=a,n=0;!c&&s&&!t&&n<d.length;n++){var t,o=d[n],p=m.p,v=o[2];e>3?(t=v===a)&&(u=o[(r=o[4])?5:(r=3,3)],o[4]=o[5]=l):o[0]<=p&&((t=e<2&&p<o[1])?(r=0,m.v=a,m.n=o[1]):p<v&&(t=e<3||o[0]>a||a>v)&&(o[4]=e,o[5]=a,m.n=v,r=0))}if(t||e>1)return i;throw c=!0,a}return function(t,d,v){if(s>1)throw TypeError("Generator is already running");for(c&&1===d&&p(d,v),r=d,u=v;(n=r<2?l:u)||!c;){o||(r?r<3?(r>1&&(m.n=-1),p(r,u)):m.n=u:m.v=u);try{if(s=2,o){if(r||(t="next"),n=o[t]){if(!(n=n.call(o,u)))throw TypeError("iterator result is not an object");if(!n.done)return n;u=n.value,r<2&&(r=0)}else 1===r&&(n=o.return)&&n.call(o),r<2&&(u=TypeError("The iterator does not provide a '"+t+"' method"),r=1);o=l}else if((n=(c=m.n<0)?u:e.call(a,m))!==i)break}catch(n){o=l,r=1,u=n}finally{s=1}}return{value:n,done:c}}}(e,o,r),!0),d}var i={};function s(){}function d(){}function c(){}n=Object.getPrototypeOf;var m=[][o]?n(n([][o]())):(a(n={},o,(function(){return this})),n),p=c.prototype=s.prototype=Object.create(m);function v(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,a(e,r,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=c,a(p,"constructor",c),a(c,"constructor",d),d.displayName="GeneratorFunction",a(c,r,"GeneratorFunction"),a(p),a(p,r,"Generator"),a(p,o,(function(){return this})),a(p,"toString",(function(){return"[object Generator]"})),(e=function(){return{w:u,m:v}})()}function a(e,l,n,t){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}a=function(e,l,n,t){function r(l,n){a(e,l,(function(e){return this._invoke(l,n,e)}))}l?o?o(e,l,{value:n,enumerable:!t,configurable:!t,writable:!t}):e[l]=n:(r("next",0),r("throw",1),r("return",2))},a(e,l,n,t)}function l(e,a,l,n,t,o,r){try{var u=e[o](r),i=u.value}catch(e){return void l(e)}u.done?a(i):Promise.resolve(i).then(n,t)}function n(e){return function(){var a=this,n=arguments;return new Promise((function(t,o){var r=e.apply(a,n);function u(e){l(r,t,o,u,i,"next",e)}function i(e){l(r,t,o,u,i,"throw",e)}u(void 0)}))}}var t=document.createElement("style");t.innerHTML=".settings-select[data-v-a08c580e]{width:240px}.section-title[data-v-a08c580e]{margin:20px 0 10px;font-weight:600;color:var(--n-color-font-dark)}.section-desc[data-v-a08c580e]{margin-bottom:10px;color:var(--n-color-neutral-5);font-size:13px}.settings-actions[data-v-a08c580e]{display:flex;justify-content:flex-end;margin-top:10px;padding-bottom:10px}.settings-select[data-v-bb4a22bc]{width:240px}.section-title[data-v-bb4a22bc]{margin:20px 0 10px;font-weight:600;color:var(--n-color-font-dark)}.section-desc[data-v-bb4a22bc]{margin-bottom:10px;color:var(--n-color-neutral-5);font-size:13px}.settings-actions[data-v-bb4a22bc]{display:flex;justify-content:flex-end;margin-top:10px;padding-bottom:10px}.user-management[data-v-7380c573]{display:flex;flex-direction:column;gap:12px}.user-management-header[data-v-7380c573]{display:flex;gap:10px}.role-label[data-v-7380c573]{color:var(--n-color-font-dark);font-weight:500}.settings-page[data-v-b165eb2c]{height:100%;padding-top:50px}.settings-content[data-v-b165eb2c]{padding:20px;height:calc(100% - 50px);overflow:auto}.settings-header[data-v-b165eb2c]{display:flex;align-items:center;justify-content:space-between;margin-bottom:10px}.settings-header h2[data-v-b165eb2c]{margin:0;color:var(--n-color-font-dark);font-weight:600}.settings-tabs[data-v-b165eb2c]{background:color-mix(in srgb,var(--n-color-neutral-w),transparent 90%);border-radius:var(--n-radius-quadruple);padding:10px 20px 20px;box-shadow:0 8px 32px rgba(31,38,135,.1)}\n",document.head.appendChild(t),System.register(["../index-legacy-f1b0cce2.js","./topoBar-legacy-0f95bf54.js","./plugin-vue_export-helper-legacy-1285489a.js","./element-plus-legacy-89569ebe.js","./@vue-legacy-799a045e.js","./property.api-legacy-ba462398.js","./user.api-legacy-789b91c6.js","./vue-router-legacy-e9561e30.js","./axios-legacy-ec40b469.js","./mitt-legacy-e809dc6d.js","./lodash-es-legacy-d6cd1adf.js","./@popperjs-legacy-3f90cf56.js","./@vueuse-legacy-98dafae0.js","./@element-plus-legacy-931e6d36.js","./async-validator-legacy-9f2b928b.js","./@ctrl-legacy-93ea6807.js","./normalize-wheel-es-legacy-2498f61f.js"],(function(a){"use strict";var l,t,o,r,u,i,s,d,c,m,p,v,f,g,b,y,h,V,_,w,x,A,E,N,U,k,C,T,S,R,M,P,j,B,K,I,O,W,L,G,F,q,z,H,D,J,X;return{setters:[function(e){l=e.t,t=e.k,o=e.m},function(e){r=e.T},function(e){u=e._},function(e){i=e.c,s=e.x,d=e.y,c=e.d,m=e.u,p=e.g,v=e.f,f=e.C,g=e.p,b=e.r,y=e.h,h=e.a,V=e.i,_=e.D,w=e.F},function(e){x=e.d,A=e.F,E=e.o,N=e.c,U=e.X,k=e.M,C=e.a,T=e.Q,S=e.u,R=e.a4,M=e.K,P=e.r,j=e.j,B=e.f,K=e.aa,I=e.U,O=e.A,W=e.ab,L=e.n},function(e){G=e.R,F=e.g,q=e.p},function(e){z=e.g,H=e.c,D=e.d,J=e.u,X=e.a},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){}],execute:function(){var Y={class:"section-title"},Q={class:"section-title"},Z={class:"section-desc"},$={class:"section-title"},ee={class:"section-desc"},ae={class:"settings-actions"},le=x({__name:"EmbeddingSettingsPanel",props:{form:{},saving:{type:Boolean}},emits:["save"],setup:function(e,a){var n=e,t=a.emit,o=A(n,"form"),r=A(n,"saving");return function(e,a){return E(),N(M,null,[U(S(p),{model:o.value,"label-width":"180px"},{default:k((function(){return[C("div",Y,T(S(l)("settings.basic.section")),1),U(S(i),{label:S(l)("settings.provider")},{default:k((function(){return[U(S(s),{modelValue:o.value.provider,"onUpdate:modelValue":a[0]||(a[0]=function(e){return o.value.provider=e}),class:"settings-select"},{default:k((function(){return[U(S(d),{label:S(l)("settings.provider.openai"),value:"open-ai"},null,8,["label"]),U(S(d),{label:S(l)("settings.provider.ollama"),value:"ollama"},null,8,["label"])]})),_:1},8,["modelValue"])]})),_:1},8,["label"]),C("div",Q,T(S(l)("settings.ollama.section")),1),C("div",Z,T(S(l)("settings.ollama.desc")),1),U(S(i),{label:S(l)("settings.model.name")},{default:k((function(){return[U(S(c),{modelValue:o.value.ollamaModelName,"onUpdate:modelValue":a[1]||(a[1]=function(e){return o.value.ollamaModelName=e})},null,8,["modelValue"])]})),_:1},8,["label"]),U(S(i),{label:S(l)("settings.base.url")},{default:k((function(){return[U(S(c),{modelValue:o.value.ollamaBaseUrl,"onUpdate:modelValue":a[2]||(a[2]=function(e){return o.value.ollamaBaseUrl=e})},null,8,["modelValue"])]})),_:1},8,["label"]),U(S(i),{label:S(l)("settings.keep.alive.seconds")},{default:k((function(){return[U(S(m),{modelValue:o.value.ollamaKeepAliveSeconds,"onUpdate:modelValue":a[3]||(a[3]=function(e){return o.value.ollamaKeepAliveSeconds=e}),min:1},null,8,["modelValue"])]})),_:1},8,["label"]),C("div",$,T(S(l)("settings.openai.section")),1),C("div",ee,T(S(l)("settings.openai.desc")),1),U(S(i),{label:S(l)("settings.model.name")},{default:k((function(){return[U(S(c),{modelValue:o.value.openAiModelName,"onUpdate:modelValue":a[4]||(a[4]=function(e){return o.value.openAiModelName=e})},null,8,["modelValue"])]})),_:1},8,["label"]),U(S(i),{label:S(l)("settings.base.url")},{default:k((function(){return[U(S(c),{modelValue:o.value.openAiBaseUrl,"onUpdate:modelValue":a[5]||(a[5]=function(e){return o.value.openAiBaseUrl=e})},null,8,["modelValue"])]})),_:1},8,["label"]),U(S(i),{label:S(l)("settings.embeddings.path")},{default:k((function(){return[U(S(c),{modelValue:o.value.openAiEmbeddingsPath,"onUpdate:modelValue":a[6]||(a[6]=function(e){return o.value.openAiEmbeddingsPath=e})},null,8,["modelValue"])]})),_:1},8,["label"]),U(S(i),{label:S(l)("settings.api.key")},{default:k((function(){return[U(S(c),{modelValue:o.value.openAiKey,"onUpdate:modelValue":a[7]||(a[7]=function(e){return o.value.openAiKey=e}),type:"password","show-password":""},null,8,["modelValue"])]})),_:1},8,["label"])]})),_:1},8,["model"]),C("div",ae,[U(S(v),{type:"primary",loading:r.value,onClick:a[8]||(a[8]=function(e){return t("save")})},{default:k((function(){return[R(T(S(l)("settings.save")),1)]})),_:1},8,["loading"])])],64)}}}),ne=u(le,[["__scopeId","data-v-a08c580e"]]),te={class:"section-title"},oe={class:"section-title"},re={class:"section-desc"},ue={class:"section-title"},ie={class:"section-desc"},se={class:"settings-actions"},de=x({__name:"LlmSettingsPanel",props:{form:{},saving:{type:Boolean}},emits:["save"],setup:function(e,a){var n=e,t=a.emit,o=A(n,"form"),r=A(n,"saving");return function(e,a){return E(),N(M,null,[U(S(p),{model:o.value,"label-width":"180px"},{default:k((function(){return[C("div",te,T(S(l)("settings.basic.section")),1),U(S(i),{label:S(l)("settings.provider")},{default:k((function(){return[U(S(s),{modelValue:o.value.provider,"onUpdate:modelValue":a[0]||(a[0]=function(e){return o.value.provider=e}),class:"settings-select"},{default:k((function(){return[U(S(d),{label:S(l)("settings.provider.openai"),value:"open-ai"},null,8,["label"]),U(S(d),{label:S(l)("settings.provider.ollama"),value:"ollama"},null,8,["label"])]})),_:1},8,["modelValue"])]})),_:1},8,["label"]),U(S(i),{label:S(l)("settings.use.rag")},{default:k((function(){return[U(S(f),{modelValue:o.value.useRag,"onUpdate:modelValue":a[1]||(a[1]=function(e){return o.value.useRag=e})},null,8,["modelValue"])]})),_:1},8,["label"]),U(S(i),{label:S(l)("settings.use.tools")},{default:k((function(){return[U(S(f),{modelValue:o.value.useTools,"onUpdate:modelValue":a[2]||(a[2]=function(e){return o.value.useTools=e})},null,8,["modelValue"])]})),_:1},8,["label"]),U(S(i),{label:S(l)("settings.temperature")},{default:k((function(){return[U(S(m),{modelValue:o.value.temperature,"onUpdate:modelValue":a[3]||(a[3]=function(e){return o.value.temperature=e}),min:0,max:2,step:.1},null,8,["modelValue"])]})),_:1},8,["label"]),C("div",oe,T(S(l)("settings.ollama.section")),1),C("div",re,T(S(l)("settings.ollama.desc")),1),U(S(i),{label:S(l)("settings.model.name")},{default:k((function(){return[U(S(c),{modelValue:o.value.ollamaModelName,"onUpdate:modelValue":a[4]||(a[4]=function(e){return o.value.ollamaModelName=e})},null,8,["modelValue"])]})),_:1},8,["label"]),U(S(i),{label:S(l)("settings.base.url")},{default:k((function(){return[U(S(c),{modelValue:o.value.ollamaBaseUrl,"onUpdate:modelValue":a[5]||(a[5]=function(e){return o.value.ollamaBaseUrl=e})},null,8,["modelValue"])]})),_:1},8,["label"]),U(S(i),{label:S(l)("settings.keep.alive.seconds")},{default:k((function(){return[U(S(m),{modelValue:o.value.ollamaKeepAliveSeconds,"onUpdate:modelValue":a[6]||(a[6]=function(e){return o.value.ollamaKeepAliveSeconds=e}),min:1},null,8,["modelValue"])]})),_:1},8,["label"]),U(S(i),{label:S(l)("settings.context.length")},{default:k((function(){return[U(S(m),{modelValue:o.value.ollamaContextLength,"onUpdate:modelValue":a[7]||(a[7]=function(e){return o.value.ollamaContextLength=e}),min:1},null,8,["modelValue"])]})),_:1},8,["label"]),C("div",ue,T(S(l)("settings.openai.section")),1),C("div",ie,T(S(l)("settings.openai.desc")),1),U(S(i),{label:S(l)("settings.model.name")},{default:k((function(){return[U(S(c),{modelValue:o.value.openAiModelName,"onUpdate:modelValue":a[8]||(a[8]=function(e){return o.value.openAiModelName=e})},null,8,["modelValue"])]})),_:1},8,["label"]),U(S(i),{label:S(l)("settings.base.url")},{default:k((function(){return[U(S(c),{modelValue:o.value.openAiBaseUrl,"onUpdate:modelValue":a[9]||(a[9]=function(e){return o.value.openAiBaseUrl=e})},null,8,["modelValue"])]})),_:1},8,["label"]),U(S(i),{label:S(l)("settings.completions.path")},{default:k((function(){return[U(S(c),{modelValue:o.value.openAiCompletionsPath,"onUpdate:modelValue":a[10]||(a[10]=function(e){return o.value.openAiCompletionsPath=e})},null,8,["modelValue"])]})),_:1},8,["label"]),U(S(i),{label:S(l)("settings.api.key")},{default:k((function(){return[U(S(c),{modelValue:o.value.openAiKey,"onUpdate:modelValue":a[11]||(a[11]=function(e){return o.value.openAiKey=e}),type:"password","show-password":""},null,8,["modelValue"])]})),_:1},8,["label"]),U(S(i),{label:S(l)("settings.context.length")},{default:k((function(){return[U(S(m),{modelValue:o.value.openAiContextLength,"onUpdate:modelValue":a[12]||(a[12]=function(e){return o.value.openAiContextLength=e}),min:1},null,8,["modelValue"])]})),_:1},8,["label"])]})),_:1},8,["model"]),C("div",se,[U(S(v),{type:"primary",loading:r.value,onClick:a[13]||(a[13]=function(e){return t("save")})},{default:k((function(){return[R(T(S(l)("settings.save")),1)]})),_:1},8,["loading"])])],64)}}}),ce=u(de,[["__scopeId","data-v-bb4a22bc"]]),me={class:"user-management"},pe={class:"user-management-header"},ve={key:1,class:"role-label"},fe=x({__name:"UserManagementPanel",setup:function(a){var r=P([]),u=P(!1),m=P(!1),f=P(!1),_=P(!1),w=P(null),x=P({username:"",password:"",role:2}),A=P({password:""}),G=j((function(){var e=[{value:2,label:l("user.management.role.user")}];return F.value&&e.unshift({value:1,label:l("user.management.role.admin")}),e})),F=j((function(){return t()})),q=function(e){return(F.value||1===o().role&&e.role>=2)&&"admin"!==e.username},Y=function(e){return"admin"===e.username||!q(e)},Q=function(){var a=n(e().m((function a(){var n,t,o;return e().w((function(e){for(;;)switch(e.p=e.n){case 0:return u.value=!0,e.p=1,e.n=2,z();case 2:o=e.v,r.value=null!==(n=null===(t=o.data)||void 0===t?void 0:t.data)&&void 0!==n?n:[],e.n=4;break;case 3:e.p=3,e.v,h.error(l("user.management.load.failed"));case 4:return e.p=4,u.value=!1,e.f(4);case 5:return e.a(2)}}),a,null,[[1,3,4,5]])})));return function(){return a.apply(this,arguments)}}(),Z=function(){x.value={username:"",password:"",role:2},f.value=!0,L((function(){x.value.username="",x.value.password=""}))},$=function(){var a=n(e().m((function a(){return e().w((function(e){for(;;)switch(e.p=e.n){case 0:if(x.value.username&&x.value.password){e.n=1;break}return h.error(l("common.input.required")),e.a(2);case 1:return m.value=!0,e.p=2,e.n=3,H({username:x.value.username,password:x.value.password,role:x.value.role});case 3:return h.success(l("common.success")),f.value=!1,e.n=4,Q();case 4:e.n=6;break;case 5:e.p=5,e.v,h.error(l("user.management.create.failed"));case 6:return e.p=6,m.value=!1,e.f(6);case 7:return e.a(2)}}),a,null,[[2,5,6,7]])})));return function(){return a.apply(this,arguments)}}(),ee=function(){var a=n(e().m((function a(n){return e().w((function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,V.confirm("".concat(l("user.management.delete.confirm")," ").concat(n.username),l("common.delete"),{confirmButtonText:l("common.ok"),cancelButtonText:l("common.cancel"),type:"warning"});case 1:return e.n=2,D(n.userId);case 2:return h.success(l("common.success")),e.n=3,Q();case 3:e.n=5;break;case 4:e.p=4,"cancel"!==e.v&&h.error(l("user.management.delete.failed"));case 5:return e.a(2)}}),a,null,[[0,4]])})));return function(e){return a.apply(this,arguments)}}(),ae=function(){var a=n(e().m((function a(n){return e().w((function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,J({userId:n.userId,role:n.role});case 1:h.success(l("common.success")),e.n=3;break;case 2:return e.p=2,e.v,h.error(l("user.management.role.update.failed")),e.n=3,Q();case 3:return e.a(2)}}),a,null,[[0,2]])})));return function(e){return a.apply(this,arguments)}}(),le=function(){var a=n(e().m((function a(){return e().w((function(e){for(;;)switch(e.p=e.n){case 0:if(w.value){e.n=1;break}return e.a(2);case 1:if(A.value.password){e.n=2;break}return h.error(l("common.input.required")),e.a(2);case 2:return m.value=!0,e.p=3,e.n=4,X({userId:w.value.userId,newPassword:A.value.password});case 4:h.success(l("common.success")),_.value=!1,e.n=6;break;case 5:e.p=5,e.v,h.error(l("user.management.password.update.failed"));case 6:return e.p=6,m.value=!1,e.f(6);case 7:return e.a(2)}}),a,null,[[3,5,6,7]])})));return function(){return a.apply(this,arguments)}}();return B((function(){Q()})),function(e,a){var n=K("loading");return E(),N("div",me,[C("div",pe,[U(S(v),{type:"primary",onClick:Z},{default:k((function(){return[R(T(S(l)("user.management.create")),1)]})),_:1}),U(S(v),{onClick:Q},{default:k((function(){return[R(T(S(l)("common.refresh")),1)]})),_:1})]),I((E(),O(S(b),{data:r.value,stripe:""},{default:k((function(){return[U(S(g),{prop:"username",label:S(l)("user.management.username")},null,8,["label"]),U(S(g),{prop:"role",label:S(l)("user.management.role")},{default:k((function(e){var a,n=e.row;return[q(n)?(E(),O(S(s),{key:0,modelValue:n.role,"onUpdate:modelValue":function(e){return n.role=e},size:"small",onChange:function(){return ae(n)}},{default:k((function(){return[(E(!0),N(M,null,W(G.value,(function(e){return E(),O(S(d),{key:e.value,label:e.label,value:e.value},null,8,["label","value"])})),128))]})),_:1},8,["modelValue","onUpdate:modelValue","onChange"])):(E(),N("span",ve,T((a=n.role,l(1===a?"user.management.role.admin":"user.management.role.user"))),1))]})),_:1},8,["label"]),U(S(g),{label:S(l)("common.action"),width:"240"},{default:k((function(e){var a,n=e.row;return[U(S(v),{size:"small",onClick:function(e){return a=n,w.value=a,A.value.password="",void(_.value=!0);var a},disabled:(a=n,!q(a))},{default:k((function(){return[R(T(S(l)("user.management.reset.password")),1)]})),_:1},8,["onClick","disabled"]),U(S(v),{size:"small",type:"danger",disabled:Y(n),onClick:function(e){return ee(n)}},{default:k((function(){return[R(T(S(l)("common.delete")),1)]})),_:1},8,["disabled","onClick"])]})),_:1},8,["label"])]})),_:1},8,["data"])),[[n,u.value]]),U(S(y),{modelValue:f.value,"onUpdate:modelValue":a[4]||(a[4]=function(e){return f.value=e}),title:S(l)("user.management.create")},{footer:k((function(){return[U(S(v),{onClick:a[3]||(a[3]=function(e){return f.value=!1})},{default:k((function(){return[R(T(S(l)("common.cancel")),1)]})),_:1}),U(S(v),{type:"primary",loading:m.value,onClick:$},{default:k((function(){return[R(T(S(l)("common.ok")),1)]})),_:1},8,["loading"])]})),default:k((function(){return[U(S(p),{model:x.value,"label-width":"90px",autocomplete:"off"},{default:k((function(){return[U(S(i),{label:S(l)("user.management.username")},{default:k((function(){return[U(S(c),{modelValue:x.value.username,"onUpdate:modelValue":a[0]||(a[0]=function(e){return x.value.username=e}),autocomplete:"off"},null,8,["modelValue"])]})),_:1},8,["label"]),U(S(i),{label:S(l)("user.management.password")},{default:k((function(){return[U(S(c),{modelValue:x.value.password,"onUpdate:modelValue":a[1]||(a[1]=function(e){return x.value.password=e}),type:"password",autocomplete:"new-password","show-password":""},null,8,["modelValue"])]})),_:1},8,["label"]),U(S(i),{label:S(l)("user.management.role")},{default:k((function(){return[U(S(s),{modelValue:x.value.role,"onUpdate:modelValue":a[2]||(a[2]=function(e){return x.value.role=e}),disabled:!F.value},{default:k((function(){return[(E(!0),N(M,null,W(G.value,(function(e){return E(),O(S(d),{key:e.value,label:e.label,value:e.value},null,8,["label","value"])})),128))]})),_:1},8,["modelValue","disabled"])]})),_:1},8,["label"])]})),_:1},8,["model"])]})),_:1},8,["modelValue","title"]),U(S(y),{modelValue:_.value,"onUpdate:modelValue":a[7]||(a[7]=function(e){return _.value=e}),title:S(l)("user.management.reset.password")},{footer:k((function(){return[U(S(v),{onClick:a[6]||(a[6]=function(e){return _.value=!1})},{default:k((function(){return[R(T(S(l)("common.cancel")),1)]})),_:1}),U(S(v),{type:"primary",loading:m.value,onClick:le},{default:k((function(){return[R(T(S(l)("common.ok")),1)]})),_:1},8,["loading"])]})),default:k((function(){return[U(S(p),{model:A.value,"label-width":"90px",autocomplete:"off"},{default:k((function(){return[U(S(i),{label:S(l)("user.management.password")},{default:k((function(){return[U(S(c),{modelValue:A.value.password,"onUpdate:modelValue":a[5]||(a[5]=function(e){return A.value.password=e}),type:"password",autocomplete:"new-password","show-password":""},null,8,["modelValue"])]})),_:1},8,["label"])]})),_:1},8,["model"])]})),_:1},8,["modelValue","title"])])}}}),ge=u(fe,[["__scopeId","data-v-7380c573"]]),be={class:"settings-page"},ye={class:"settings-content"},he={class:"settings-header"},Ve="llm-provider",_e="llm-use-rag",we="llm-use-tools",xe="llm-temperature",Ae="llm-ollama-model-name",Ee="llm-ollama-base-url",Ne="llm-ollama-keep-alive-seconds",Ue="llm-ollama-context-length",ke="llm-open-ai-model-name",Ce="llm-open-ai-base-url",Te="llm-open-ai-completions-path",Se="llm-open-ai-key",Re="llm-open-ai-context-length",Me="embedding-provider",Pe="embedding-ollama-model-name",je="embedding-ollama-base-url",Be="embedding-ollama-keep_alive_seconds",Ke="embedding-open-ai-model-name",Ie="embedding-open-ai-base-url",Oe="embedding-open-ai-embeddings-path",We="embedding-open-ai-key",Le="RETRIEVE_TOP_K",Ge="RETRIEVE_METRIC_TYPE",Fe="RETRIEVE_METRIC_SCORE_COMPARE_EXPR",qe="RETRIEVE_DENSE_WEIGHT",ze="RETRIEVE_SPARSE_WEIGHT",He=x({__name:"index",setup:function(a){var t=P("llm"),o=P(!1),u=P(!1),i=P({provider:"open-ai",useRag:!0,useTools:!0,temperature:0,ollamaModelName:"qwen3:14b-q8_0",ollamaBaseUrl:"http://172.16.8.107:11434",ollamaKeepAliveSeconds:3600,ollamaContextLength:32768,openAiModelName:"qwen-plus",openAiBaseUrl:"https://dashscope.aliyuncs.com",openAiCompletionsPath:"/compatible-mode/v1/chat/completions",openAiKey:"",openAiContextLength:32768}),s=P({provider:"open-ai",ollamaModelName:"nomic-embed-text:latest",ollamaBaseUrl:"http://127.0.0.1:11434",ollamaKeepAliveSeconds:3600,openAiModelName:"text-embedding-v4",openAiBaseUrl:"https://dashscope.aliyuncs.com",openAiEmbeddingsPath:"/compatible-mode/v1/embeddings",openAiKey:""}),d=P(""),c=P({topK:5,metricType:"COSINE",metricScoreExpr:"> 0.7",denseWeight:.5,sparseWeight:.5}),m=function(e){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return null==e?a:"1"===e.trim()||"true"===e.trim().toLowerCase()},p=function(e,a){if(null==e)return a;var l=Number(e);return Number.isFinite(l)?l:a},v=function(){var e=c.value.denseWeight,a=c.value.sparseWeight,l=e+a;if(!Number.isFinite(l)||l<=0)return c.value.denseWeight=.5,void(c.value.sparseWeight=.5);c.value.denseWeight=e/l,c.value.sparseWeight=a/l},f=function(e){var a,l;return null!=e&&null!==(a=e.data)&&void 0!==a&&a.data?e.data.data:null!==(l=null==e?void 0:e.data)&&void 0!==l?l:{}},g=function(){var a=n(e().m((function a(){var n,t,r;return e().w((function(e){for(;;)switch(e.p=e.n){case 0:return o.value=!0,e.p=1,n=[Ve,_e,we,xe,Ae,Ee,Ne,Ue,ke,Ce,Te,Se,Re,Me,Pe,je,Be,Ke,Ie,Oe,We,Le,Ge,Fe,qe,ze],e.n=2,F(n);case 2:t=e.v,r=f(t),i.value.provider=r["llm-provider"]||i.value.provider,i.value.useRag=m(r["llm-use-rag"],i.value.useRag),i.value.useTools=m(r["llm-use-tools"],i.value.useTools),i.value.temperature=p(r["llm-temperature"],i.value.temperature),i.value.ollamaModelName=r["llm-ollama-model-name"]||i.value.ollamaModelName,i.value.ollamaBaseUrl=r["llm-ollama-base-url"]||i.value.ollamaBaseUrl,i.value.ollamaKeepAliveSeconds=p(r["llm-ollama-keep-alive-seconds"],i.value.ollamaKeepAliveSeconds),i.value.ollamaContextLength=p(r["llm-ollama-context-length"],i.value.ollamaContextLength),i.value.openAiModelName=r["llm-open-ai-model-name"]||i.value.openAiModelName,i.value.openAiBaseUrl=r["llm-open-ai-base-url"]||i.value.openAiBaseUrl,i.value.openAiCompletionsPath=r["llm-open-ai-completions-path"]||i.value.openAiCompletionsPath,i.value.openAiKey=r["llm-open-ai-key"]||i.value.openAiKey,i.value.openAiContextLength=p(r["llm-open-ai-context-length"],i.value.openAiContextLength),s.value.provider=r["embedding-provider"]||s.value.provider,s.value.ollamaModelName=r["embedding-ollama-model-name"]||s.value.ollamaModelName,s.value.ollamaBaseUrl=r["embedding-ollama-base-url"]||s.value.ollamaBaseUrl,s.value.ollamaKeepAliveSeconds=p(r["embedding-ollama-keep_alive_seconds"],s.value.ollamaKeepAliveSeconds),s.value.openAiModelName=r["embedding-open-ai-model-name"]||s.value.openAiModelName,s.value.openAiBaseUrl=r["embedding-open-ai-base-url"]||s.value.openAiBaseUrl,s.value.openAiEmbeddingsPath=r["embedding-open-ai-embeddings-path"]||s.value.openAiEmbeddingsPath,s.value.openAiKey=r["embedding-open-ai-key"]||s.value.openAiKey,d.value=JSON.stringify(s.value),c.value.topK=p(Le in r?r.RETRIEVE_TOP_K:void 0,c.value.topK),c.value.metricType=r.RETRIEVE_METRIC_TYPE||c.value.metricType,c.value.metricScoreExpr=r.RETRIEVE_METRIC_SCORE_COMPARE_EXPR||c.value.metricScoreExpr,c.value.denseWeight=p(qe in r?r.RETRIEVE_DENSE_WEIGHT:void 0,c.value.denseWeight),c.value.sparseWeight=p(ze in r?r.RETRIEVE_SPARSE_WEIGHT:void 0,c.value.sparseWeight),v(),e.n=4;break;case 3:e.p=3,e.v,h.error(l("settings.load.failed"));case 4:return e.p=4,o.value=!1,e.f(4);case 5:return e.a(2)}}),a,null,[[1,3,4,5]])})));return function(){return a.apply(this,arguments)}}(),b=function(){v();var e=function(e){return null==e?"":String(e)};return[{propertyName:Ve,propertyValue:e(i.value.provider)},{propertyName:_e,propertyValue:e(i.value.useRag)},{propertyName:we,propertyValue:e(i.value.useTools)},{propertyName:xe,propertyValue:e(i.value.temperature)},{propertyName:Ae,propertyValue:e(i.value.ollamaModelName)},{propertyName:Ee,propertyValue:e(i.value.ollamaBaseUrl)},{propertyName:Ne,propertyValue:e(i.value.ollamaKeepAliveSeconds)},{propertyName:Ue,propertyValue:e(i.value.ollamaContextLength)},{propertyName:ke,propertyValue:e(i.value.openAiModelName)},{propertyName:Ce,propertyValue:e(i.value.openAiBaseUrl)},{propertyName:Te,propertyValue:e(i.value.openAiCompletionsPath)},{propertyName:Se,propertyValue:e(i.value.openAiKey)},{propertyName:Re,propertyValue:e(i.value.openAiContextLength)},{propertyName:Me,propertyValue:e(s.value.provider)},{propertyName:Pe,propertyValue:e(s.value.ollamaModelName)},{propertyName:je,propertyValue:e(s.value.ollamaBaseUrl)},{propertyName:Be,propertyValue:e(s.value.ollamaKeepAliveSeconds)},{propertyName:Ke,propertyValue:e(s.value.openAiModelName)},{propertyName:Ie,propertyValue:e(s.value.openAiBaseUrl)},{propertyName:Oe,propertyValue:e(s.value.openAiEmbeddingsPath)},{propertyName:We,propertyValue:e(s.value.openAiKey)},{propertyName:Le,propertyValue:e(c.value.topK)},{propertyName:Ge,propertyValue:e(c.value.metricType)},{propertyName:Fe,propertyValue:e(c.value.metricScoreExpr)},{propertyName:qe,propertyValue:e(c.value.denseWeight)},{propertyName:ze,propertyValue:e(c.value.sparseWeight)}]},y=function(){var a=n(e().m((function a(){return e().w((function(e){for(;;)switch(e.n){case 0:return e.n=1,V.confirm(l("settings.embedding.rebuild.confirm"),l("settings.embedding.rebuild.title"),{confirmButtonText:l("settings.embedding.rebuild.confirm.ok"),cancelButtonText:l("settings.embedding.rebuild.confirm.cancel"),type:"warning"});case 1:return e.a(2)}}),a)})));return function(){return a.apply(this,arguments)}}(),x=function(){var a=n(e().m((function a(){return e().w((function(e){for(;;)switch(e.p=e.n){case 0:if(u.value=!0,e.p=1,d.value===JSON.stringify(s.value)){e.n=2;break}return e.n=2,y();case 2:return e.n=3,q(b());case 3:d.value=JSON.stringify(s.value),h.success(l("settings.save.success")),e.n=5;break;case 4:e.p=4,"cancel"!==e.v&&h.error(l("settings.save.failed"));case 5:return e.p=5,u.value=!1,e.f(5);case 6:return e.a(2)}}),a,null,[[1,4,5,6]])})));return function(){return a.apply(this,arguments)}}();return B((function(){g()})),function(e,a){var n=K("loading");return E(),N("div",be,[U(r),I((E(),N("div",ye,[C("div",he,[C("h2",null,T(S(l)("settings.title")),1)]),U(S(w),{modelValue:t.value,"onUpdate:modelValue":a[0]||(a[0]=function(e){return t.value=e}),class:"settings-tabs"},{default:k((function(){return[U(S(_),{label:S(l)("settings.llm.section"),name:"llm"},{default:k((function(){return[U(ce,{form:i.value,saving:u.value,onSave:x},null,8,["form","saving"])]})),_:1},8,["label"]),U(S(_),{label:S(l)("settings.embedding.section"),name:"embedding"},{default:k((function(){return[U(ne,{form:s.value,saving:u.value,onSave:x},null,8,["form","saving"])]})),_:1},8,["label"]),U(S(_),{label:S(l)("settings.rag.section"),name:"rag"},{default:k((function(){return[U(G,{form:c.value,saving:u.value,onSave:x},null,8,["form","saving"])]})),_:1},8,["label"]),U(S(_),{label:S(l)("user.management.title"),name:"user"},{default:k((function(){return[U(ge)]})),_:1},8,["label"])]})),_:1},8,["modelValue"])])),[[n,o.value]])])}}});a("default",u(He,[["__scopeId","data-v-b165eb2c"]]))}}}))}();
