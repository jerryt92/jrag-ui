!function(){function e(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var l={}.toString.call(e).slice(8,-1);return"Object"===l&&e.constructor&&(l=e.constructor.name),"Map"===l||"Set"===l?Array.from(e):"Arguments"===l||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?a(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,a){(null==a||a>e.length)&&(a=e.length);for(var t=0,l=Array(a);t<a;t++)l[t]=e[t];return l}var t=document.createElement("style");t.innerHTML=".slider-container{position:relative;display:inline-block;flex-direction:column;justify-content:center;height:auto;margin:0 auto;padding:16px;border-radius:var(--n-radius-triple);background:#fff;box-shadow:0 2px 8px rgba(0,0,0,.1)}.slider-container .slider-canvas{position:relative;background-color:transparent;margin-bottom:16px}.slider-container .slider-canvas .puzzle-image{border-radius:4px}.slider-container .slider-canvas .slider-block{z-index:2;border-radius:4px;will-change:transform;backface-visibility:hidden;transform:translateZ(0)}@keyframes result-show{0%{opacity:0}to{opacity:.7}}.slider-container .result-mask{position:absolute;left:0;bottom:0;width:100%;opacity:.7}.slider-container .result-mask.success{background-color:#52ccba;animation:result-show 1s}.slider-container .result-mask.fail{background-color:#f57a7a;animation:result-show 1s}.slider-square{background-color:#f7f9fa;height:36px;text-align:center;line-height:36px;border:2px solid rgba(221,221,221,.17);position:relative;border-radius:4px;z-index:10}.slider-square .box{padding:0 16px;display:flex;align-items:center;justify-content:center;position:relative;height:100%}.slider-square .box span{flex:1;text-align:center;color:#666;font-size:14px}.slider-square .slider-square-icon{position:absolute;top:0;left:0;height:35px;width:35px;background-color:var(--el-color-primary);cursor:pointer;z-index:11;user-select:none;will-change:transform;border:none;border-radius:var(--n-radius-double)}.slider-square .slider-square-icon:hover,.slider-square .slider-square-icon:active{background-color:var(--el-color-primary);box-shadow:0 0 5px var(--el-color-primary)}.login-container[data-v-495eac40]{display:flex;justify-content:center;align-items:center;height:100vh}.login-form[data-v-495eac40]{width:380px;padding:20px;background-color:rgba(255,255,255,.2);backdrop-filter:blur(12px);border-radius:8px;box-shadow:0 2px 8px rgba(0,0,0,.1);transition:transform .2s ease}.login-form[data-v-495eac40]:hover{transform:scale(1.02)}.logo-container[data-v-495eac40]{text-align:center;margin-bottom:20px}.logo-text[data-v-495eac40]{font-size:32px;font-weight:700;color:#409eff;margin:0}.title[data-v-495eac40]{margin-bottom:20px;text-align:center}.submit-btn[data-v-495eac40]{width:100%}.submit-btn[data-v-495eac40]:hover{transform:scale(1.01)}.captcha-dialog{min-width:auto;width:auto;padding:25px}\n",document.head.appendChild(t),System.register(["./@vue-legacy-679761dc.js","./vue-router-legacy-023693fc.js","../index-legacy-35c783da.js","./axios-legacy-ec40b469.js","./element-plus-legacy-f7c2fe8d.js","./plugin-vue_export-helper-legacy-1285489a.js","./mitt-legacy-e809dc6d.js","./lodash-es-legacy-0f78b4f1.js","./@vueuse-legacy-057012f9.js","./@element-plus-legacy-e0305bcc.js","./async-validator-legacy-9f2b928b.js","./@ctrl-legacy-93ea6807.js","./@popperjs-legacy-f5ef238f.js","./normalize-wheel-es-legacy-2498f61f.js"],(function(a){"use strict";var t,l,n,r,i,o,s,u,c,d,v,f,p,h,g,m,b,x,y,w,k,z,j,S,_,L,q,U,C,E,V,X;return{setters:[function(e){t=e.d,l=e.r,n=e.w,r=e.U,i=e.f,o=e.a1,s=e.ag,u=e.Q,c=e.o,d=e.c,v=e.a,f=e.O,p=e.H,h=e.M,g=e.S,m=e.J,b=e.u,x=e.a2,y=e.ah,w=e.G},function(e){k=e.d},function(e){z=e.t,j=e.l,S=e.a},function(e){_=e.a},function(e){L=e.b,q=e.c,U=e.d,C=e.f,E=e.g,V=e.h},function(e){X=e._},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){}],execute:function(){var R={class:"slider-container"},T={class:"slider-square"},A={class:"box"},Y=t({__name:"SlipCaptcha",props:{loading:{type:Boolean,default:!1}},emits:["validPass"],setup:function(e,a){var t=a.expose,g=a.emit,m=l(!1),b=e;n((function(){return b.loading}),(function(e){m.value=e}));var x=g;t({updateSlideCaptcha:q});var y=l(null),w=l(null),k=l({hash:"",puzzleUrl:"",width:300,height:225,sliderUrl:"",sliderSize:0,sliderY:0,sliderLeft:0,blockX:0,blockY:0,scaleRatio:1,sliderText:""}),j=r({originX:0}),S=r({class:"",height:0});function q(){m.value=!0,w.value.style.transform="translate3d(0, 0, 0)",k.value.sliderLeft=0,_.get("/v1/auth/captcha/slide?"+(new Date).getTime()).then((function(e){k.value.hash=e.data.hash,k.value.puzzleUrl=e.data.puzzleUrl,k.value.width=e.data.width,k.value.height=e.data.height,k.value.sliderUrl=e.data.sliderUrl,k.value.sliderSize=e.data.sliderSize,k.value.blockY=e.data.sliderY})).then((function(){k.value.sliderText=z("captcha.tip"),S.height=0,S.class="",k.value.sliderLeft=0,w.value&&(w.value.style.left="0"),y.value&&(k.value.scaleRatio=300/k.value.width,k.value.width=k.value.width*k.value.scaleRatio,k.value.height=k.value.height*k.value.scaleRatio,k.value.blockY=k.value.blockY*k.value.scaleRatio,k.value.sliderSize=k.value.sliderSize*k.value.scaleRatio)})).finally((function(){m.value=!1}))}i((function(){X(),q()}));var U=l(!1),C=function(e){var a;U.value=!0,k.value.sliderText="",j.originX=e.pageX||(null===(a=e.touches)||void 0===a||null===(a=a[0])||void 0===a?void 0:a.pageX),w.value.style.willChange="transform",e.preventDefault()},E=function(e){var a;if(U.value){var t=e.pageX||(null===(a=e.touches)||void 0===a||null===(a=a[0])||void 0===a?void 0:a.pageX);if(t){var l=t-j.originX,n=k.value.width-k.value.sliderSize,r=Math.max(0,Math.min(l,n));w.value.style.transform="translate3d(".concat(r,"px, 0, 0)"),k.value.sliderLeft=r,e.preventDefault()}}},V=function(){if(U.value){U.value=!1,w.value.style.willChange="auto";var e,a,t=k.value.sliderLeft/k.value.scaleRatio;(e=t,a=k.value.hash,_.get("/v1/auth/captcha/slide/validate",{params:{"slider-x":e,hash:a}})).then((function(e){e.data.result?x("validPass",{hash:k.value.hash,code:e.data.code}):(L.error(z("captcha.validate.fail")),q())}))}},X=function(){document.addEventListener("mousemove",E),document.addEventListener("mouseup",V),document.addEventListener("touchmove",E,{passive:!1}),document.addEventListener("touchend",V)};return o((function(){document.removeEventListener("mousemove",E),document.removeEventListener("mouseup",V),document.removeEventListener("touchmove",E),document.removeEventListener("touchend",V)})),function(e,a){var t=s("loading");return u((c(),d("div",R,[v("div",{class:"slider-canvas",style:f({width:"".concat(k.value.width,"px"),height:"".concat(k.value.height,"px")}),onClick:q},[v("div",{ref_key:"puzzle",ref:y,class:"puzzle-image",style:f({backgroundImage:"url(".concat(k.value.puzzleUrl,")"),width:"100%",height:"100%",position:"absolute",top:0,left:0,backgroundSize:"cover"})},null,4),v("div",{ref_key:"block",ref:w,class:"slider-block",style:f({backgroundImage:"url(".concat(k.value.sliderUrl,")"),width:k.value.sliderSize+"px",height:k.value.sliderSize+"px",top:k.value.blockY+"px",left:"0px",position:"absolute",backgroundSize:"cover"})},null,4),v("div",{class:p("result-mask ".concat(S.class)),style:f({height:"".concat(S.height,"px")})},null,6)],4),v("div",T,[v("div",A,[v("div",{class:"slider-square-icon",style:f({transform:"translateX(".concat(k.value.sliderLeft,"px)")}),onMousedown:C,onTouchstart:C},null,36),v("span",null,h(k.value.sliderText),1)])])])),[[t,m.value]])}}}),I={class:"login-container"},M=t({__name:"Login",setup:function(a){var t=k(),n=l(),o=l(!1),s=l(!1);i((function(){"public"===j&&t.push("/")}));var u=r({username:"",password:""}),f={username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},p=function(){s.value=!0,n.value.updateSlideCaptcha()},h=function(e){o.value=!0,S(u.username,u.password,e.code,e.hash).then((function(){t.push("/")})).catch((function(e){401===e.status&&(s.value=!1,L.error(z("login.fail")))}))};return function(a,t){return c(),d(w,null,[v("div",I,[g(b(E),{ref:"loginForm",model:u,rules:f,"label-position":"left","label-width":"0px",class:"login-form",onKeyup:y(p,["enter"])},{default:m((function(){return[t[5]||(t[5]=v("div",{class:"logo-container"},[v("h2",{class:"logo-text"},"Jrag")],-1)),g(b(q),{prop:"username"},{default:m((function(){return[g(b(U),{modelValue:u.username,"onUpdate:modelValue":t[0]||(t[0]=function(e){return u.username=e}),placeholder:"用户名"},null,8,["modelValue"])]})),_:1}),g(b(q),{prop:"password"},{default:m((function(){return[g(b(U),{modelValue:u.password,"onUpdate:modelValue":t[1]||(t[1]=function(e){return u.password=e}),type:"password",placeholder:"密码"},null,8,["modelValue"])]})),_:1}),g(b(q),null,{default:m((function(){return[g(b(C),{type:"primary",onClick:p,class:"submit-btn"},{default:m((function(){return e(t[4]||(t[4]=[x(" 登录 ",-1)]))})),_:1})]})),_:1})]})),_:1},8,["model"])]),g(b(V),{modelValue:s.value,"onUpdate:modelValue":t[2]||(t[2]=function(e){return s.value=e}),class:"captcha-dialog","align-center":"",loading:o.value,"show-close":"",onClose:t[3]||(t[3]=function(e){return o.value=!1})},{default:m((function(){return[g(Y,{ref_key:"slideCaptchaRef",ref:n,loading:o.value,onValidPass:h},null,8,["loading"])]})),_:1},8,["modelValue","loading"])],64)}}});a("default",X(M,[["__scopeId","data-v-495eac40"]]))}}}))}();
